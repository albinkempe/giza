import"../chunks/DsnmJJEf.js";import{i as gt}from"../chunks/CUt07OLi.js";import{G as De,o as se,A as ht,J as st,p as _t,n as wt,S as r,ax as bt,D as Rt,H as Lt,F as Je,I as Me,z as ye,af as xt,aj as At,w as Ye,M as Ct,K as St,an as rt,i as $t,R as at,aJ as Qe,aK as Ze,O as ot,P as Ut,aL as Ae,aM as Pe,y as it,aN as Ce,aO as Et,ah as It,aP as Ot,am as Tt,aQ as kt,ac as Bt,aR as nt,ad as Dt,aS as Mt,a5 as Pt,$ as de,a1 as ne,a2 as _,a6 as Nt,a3 as C,a9 as g,a7 as L,a8 as w,a4 as T,aI as Ne,aH as ge,aT as he,T as ce}from"../chunks/FdxM7R8A.js";import{w as Gt,a as P,e as Ge}from"../chunks/Cp2QLTMB.js";import{i as N,s as Ht,a as Ft}from"../chunks/B9CFh63M.js";import{s as H}from"../chunks/Ve6-S-tC.js";function K(s,e){return e}function Yt(s,e,t){for(var i=s.items,c=[],m=e.length,d=0;d<m;d++)Ot(e[d].e,c,!0);var p=m>0&&c.length===0&&t!==null;if(p){var R=t.parentNode;Tt(R),R.append(t),i.clear(),Q(s,e[0].prev,e[m-1].next)}kt(c,()=>{for(var S=0;S<m;S++){var E=e[S];p||(i.delete(E.k),Q(s,E.prev,E.next)),it(E.e,!p)}})}function J(s,e,t,i,c,m=null){var d=s,p={flags:e,items:new Map,first:null},R=(e&nt)!==0;if(R){var S=s;d=se?De(ht(S)):S.appendChild(st())}se&&_t();var E=null,z=!1,V=new Map,Z=bt(()=>{var v=t();return $t(v)?v:v==null?[]:rt(v)}),f,h;function n(){qt(h,f,p,V,d,c,e,i,t),m!==null&&(f.length===0?E?ot(E):E=Ye(()=>m(d)):E!==null&&Ut(E,()=>{E=null}))}wt(()=>{h??=Bt,f=r(Z);var v=f.length;if(z&&v===0)return;z=v===0;let A=!1;if(se){var G=Rt(d)===Lt;G!==(v===0)&&(d=Je(),De(d),Me(!1),A=!0)}if(se){for(var F=null,l,o=0;o<v;o++){if(ye.nodeType===xt&&ye.data===At){d=ye,A=!0,Me(!1);break}var u=f[o],a=i(u,o);l=qe(ye,p,F,null,u,a,o,c,e,t),p.items.set(a,l),F=l}v>0&&De(Je())}if(se)v===0&&m&&(E=Ye(()=>m(d)));else if(Ct()){var I=new Set,k=St;for(o=0;o<v;o+=1){u=f[o],a=i(u,o);var Y=p.items.get(a)??V.get(a);Y?(e&(Ce|Ae))!==0&&ct(Y,u,o,e):(l=qe(null,p,null,null,u,a,o,c,e,t,!0),V.set(a,l)),I.add(a)}for(const[B,re]of p.items)I.has(B)||k.skipped_effects.add(re.e);k.add_callback(n)}else n();A&&Me(!0),r(Z)}),se&&(d=ye)}function qt(s,e,t,i,c,m,d,p,R){var S=(d&Mt)!==0,E=(d&(Ce|Ae))!==0,z=e.length,V=t.items,Z=t.first,f=Z,h,n=null,v,A=[],G=[],F,l,o,u;if(S)for(u=0;u<z;u+=1)F=e[u],l=p(F,u),o=V.get(l),o!==void 0&&(o.a?.measure(),(v??=new Set).add(o));for(u=0;u<z;u+=1){if(F=e[u],l=p(F,u),o=V.get(l),o===void 0){var a=i.get(l);if(a!==void 0){i.delete(l),V.set(l,a);var I=n?n.next:f;Q(t,n,a),Q(t,a,I),He(a,I,c),n=a}else{var k=f?f.e.nodes_start:c;n=qe(k,t,n,n===null?t.first:n.next,F,l,u,m,d,R)}V.set(l,n),A=[],G=[],f=n.next;continue}if(E&&ct(o,F,u,d),(o.e.f&Pe)!==0&&(ot(o.e),S&&(o.a?.unfix(),(v??=new Set).delete(o))),o!==f){if(h!==void 0&&h.has(o)){if(A.length<G.length){var Y=G[0],B;n=Y.prev;var re=A[0],X=A[A.length-1];for(B=0;B<A.length;B+=1)He(A[B],Y,c);for(B=0;B<G.length;B+=1)h.delete(G[B]);Q(t,re.prev,X.next),Q(t,n,re),Q(t,X,Y),f=Y,n=X,u-=1,A=[],G=[]}else h.delete(o),He(o,f,c),Q(t,o.prev,o.next),Q(t,o,n===null?t.first:n.next),Q(t,n,o),n=o;continue}for(A=[],G=[];f!==null&&f.k!==l;)(f.e.f&Pe)===0&&(h??=new Set).add(f),G.push(f),f=f.next;if(f===null)continue;o=f}A.push(o),n=o,f=o.next}if(f!==null||h!==void 0){for(var ee=h===void 0?[]:rt(h);f!==null;)(f.e.f&Pe)===0&&ee.push(f),f=f.next;var j=ee.length;if(j>0){var oe=(d&nt)!==0&&z===0?c:null;if(S){for(u=0;u<j;u+=1)ee[u].a?.measure();for(u=0;u<j;u+=1)ee[u].a?.fix()}Yt(t,ee,oe)}}S&&Dt(()=>{if(v!==void 0)for(o of v)o.a?.apply()}),s.first=t.first&&t.first.e,s.last=n&&n.e;for(var ae of i.values())it(ae.e);i.clear()}function ct(s,e,t,i){(i&Ce)!==0&&Ze(s.v,e),(i&Ae)!==0?Ze(s.i,t):s.i=t}function qe(s,e,t,i,c,m,d,p,R,S,E){var z=(R&Ce)!==0,V=(R&Et)===0,Z=z?V?at(c,!1,!1):Qe(c):c,f=(R&Ae)===0?d:Qe(d),h={i:f,v:Z,k:m,a:null,e:null,prev:t,next:i};try{if(s===null){var n=document.createDocumentFragment();n.append(s=st())}return h.e=Ye(()=>p(s,Z,f,S),se),h.e.prev=t&&t.e,h.e.next=i&&i.e,t===null?E||(e.first=h):(t.next=h,t.e.next=h.e),i!==null&&(i.prev=h,i.e.prev=h.e),h}finally{}}function He(s,e,t){for(var i=s.next?s.next.e.nodes_start:t,c=e?e.e.nodes_start:t,m=s.e.nodes_start;m!==null&&m!==i;){var d=It(m);c.before(m),m=d}}function Q(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const Xe=[...` 	
\r\f \v\uFEFF`];function Vt(s,e,t){var i=s==null?"":""+s;if(e&&(i=i?i+" "+e:e),t){for(var c in t)if(t[c])i=i?i+" "+c:c;else if(i.length)for(var m=c.length,d=0;(d=i.indexOf(c,d))>=0;){var p=d+m;(d===0||Xe.includes(i[d-1]))&&(p===i.length||Xe.includes(i[p]))?i=(d===0?"":i.substring(0,d))+i.substring(p+1):d=p}}return i===""?null:i}function Fe(s,e,t,i,c,m){var d=s.__className;if(se||d!==t||d===void 0){var p=Vt(t,i,m);(!se||p!==s.getAttribute("class"))&&(p==null?s.removeAttribute("class"):s.className=p),s.__className=t}else if(m&&c!==m)for(var R in m){var S=!!m[R];(c==null||S!==!!c[R])&&s.classList.toggle(R,S)}return m}const Wt=!1,zt=!0,or=Object.freeze(Object.defineProperty({__proto__:null,prerender:zt,ssr:Wt},Symbol.toStringTag,{value:"Module"})),jt=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]}];function ft(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}}]}function Kt(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Training Ground",type:"military",cost:{clay:2,ore:1},effect:{military:2}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:4,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Vineyard",type:"commerce",effect:{coins:3}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Glassblower",type:"resource",effect:{resources:{glass:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function Jt(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:2},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:2},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:2},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:6}},{id:57,name:"Haven",type:"commerce",cost:{wood:1,ore:1,cloth:1},effect:{coins:5}},{id:58,name:"Lighthouse",type:"commerce",cost:{stone:1,glass:1},effect:{coins:4}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:7}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:8}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{stone:1,ore:1,cloth:1},effect:{coins:6}}]}function xe(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e)}function Qt(s){return jt.map(t=>({w:t,sort:Math.random()})).sort((t,i)=>t.sort-i.sort).map(({w:t})=>t).slice(0,s)}function Zt(s,e){return{name:s,coins:3,military:0,score:0,resources:{[e.baseResource]:1},hand:[],built:[],wonder:e,wonderStagesBuilt:0}}function Xt(){const s=["You","Bot A","Bot B"],e=Qt(s.length),t=s.map((c,m)=>Zt(c,e[m])),i=xe(ft());for(let c=0;c<t.length;c++)t[c].hand=i.splice(0,7);return{players:t,discard:[],age:1}}function es(s){let e;s.age===2?e=xe(Kt()):s.age===3?e=xe(Jt()):e=xe(ft());for(let t=0;t<s.players.length;t++)s.players[t].hand=e.splice(0,7)}const et=Gt(Xt());function ts(s){if(s.hand.length!==0)return s.hand[0]}function lt(s,e){if(e){if(e.resources)for(const[t,i]of Object.entries(e.resources)){const c=i??0;s.resources[t]=(s.resources[t]||0)+c}typeof e.coins=="number"&&(s.coins=(s.coins||0)+e.coins),typeof e.military=="number"&&(s.military=(s.military||0)+e.military),typeof e.points=="number"&&(s.score=(s.score||0)+e.points)}}function ss(s,e){e&&e.coins&&e.coins>0&&(s.coins=(s.coins||0)-e.coins)}function _e(s,e){if(!e)return!0;if(e.coins&&(s.coins||0)<e.coins)return!1;for(const[t,i]of Object.entries(e))if(t!=="coins"&&(s.resources[t]||0)<(i||0))return!1;return!0}function tt(s,e){if(!_e(s,e.cost)){console.warn(`${s.name} cannot afford ${e.name}`);return}ss(s,e.cost),lt(s,e.effect),s.built.push(e)}function rs(s,e,t){if(!_e(s,t)){console.warn(`${s.name} cannot afford this wonder stage`);return}lt(s,e)}function as(s){const e=s.players,t=e.length;for(let i=0;i<t;i++){const c=e[i],m=e[(i+1)%t],d=e[(i-1+t)%t];let p=0;(c.military||0)>(m.military||0)&&p++,(c.military||0)>(d.military||0)&&p++,p>0&&(c.score=(c.score||0)+p)}}const os=""+new URL("../assets/wood.BspqzxF5.png",import.meta.url).href,is=""+new URL("../assets/stone.BTxpkRdw.png",import.meta.url).href,ns=""+new URL("../assets/ore.DKWpy6wA.png",import.meta.url).href,cs=""+new URL("../assets/clay.DyAGJnLM.png",import.meta.url).href,fs=""+new URL("../assets/glass.Bx0vOgSM.png",import.meta.url).href,ls=""+new URL("../assets/cloth.Cu7kWHeD.png",import.meta.url).href,ds=""+new URL("../assets/papyrus.BvyHFjyl.png",import.meta.url).href,us=""+new URL("../assets/military.Nq6N7pQi.png",import.meta.url).href,vs=""+new URL("../assets/coin-3.Ce2uJLOT.png",import.meta.url).href,ms=""+new URL("../assets/victory-1.DISatqFw.png",import.meta.url).href,ps=""+new URL("../assets/victory-2.B1TKzoiN.png",import.meta.url).href,ys=""+new URL("../assets/victory-3.DRij6tKA.png",import.meta.url).href,gs=""+new URL("../assets/victory-4.Co9CLgK7.png",import.meta.url).href,hs=""+new URL("../assets/victory-5.CY7vXeO9.png",import.meta.url).href,_s=""+new URL("../assets/victory-6.Cm6mcinr.png",import.meta.url).href,ws=""+new URL("../assets/victory-7.DgzFcewG.png",import.meta.url).href,bs=""+new URL("../assets/victory-8.B4UC4GZI.png",import.meta.url).href,Rs=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Ls=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,xs=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,As=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,Cs=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Ss=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,$s=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,Us=""+new URL("../assets/age-1.q61pT6Go.png",import.meta.url).href,Es=""+new URL("../assets/age-2.B9m9ugY6.png",import.meta.url).href,Is=""+new URL("../assets/age-3.Dclq5Onv.png",import.meta.url).href;var Os=C('<img class="age-image svelte-1w57s6i" width="120" height="120"/>'),Ts=C('<img width="400" height="200" class="svelte-1w57s6i"/>'),ks=C('<span class="resource svelte-1w57s6i"> </span>'),Bs=C("<em>Free</em>"),Ds=C('<span class="resource svelte-1w57s6i"> </span>'),Ms=C("<em>Special</em>"),Ps=C('<div><div class="stage-index svelte-1w57s6i"></div> <div class="stage-cost svelte-1w57s6i">Cost: <!></div> <div class="stage-effect svelte-1w57s6i">Effect: <!> <!> <!> <!> <!></div></div>'),Ns=C('<div class="resource svelte-1w57s6i"><img class="svelte-1w57s6i"/> <span> </span></div>'),Gs=C("<em>None</em>"),Hs=C("<li> </li>"),Fs=C("<ul></ul>"),Ys=C('<div><div class="wonder svelte-1w57s6i"><!> <div class="wonder-name svelte-1w57s6i"> </div> <div class="wonder-progress svelte-1w57s6i"><div class="stages svelte-1w57s6i"></div></div></div> <h3> </h3> <p> </p> <p> </p> <p> </p> <div class="resources svelte-1w57s6i"></div> <div class="built-cards"><strong>Built:</strong> <!></div></div>'),qs=C('<span class="resource svelte-1w57s6i"> </span>'),Vs=C("<em>Free</em>"),Ws=C('<img class="svelte-1w57s6i"/>'),zs=C('<img class="svelte-1w57s6i"/>'),js=C('<img alt="military" class="svelte-1w57s6i"/>'),Ks=C('<img class="svelte-1w57s6i"/>'),Js=C('<div><strong> </strong> <div class="card-cost">Cost: <!></div> <div class="card-actions svelte-1w57s6i"><button class="svelte-1w57s6i"><strong>Build</strong></button> <button class="svelte-1w57s6i"><strong>Sell</strong></button> <button class="svelte-1w57s6i"><strong>Wonder</strong></button></div> <div class="card-effect svelte-1w57s6i"><!> <!> <!> <!></div></div>'),Qs=C('<h1>7 Wonders</h1> <!> <p class="message svelte-1w57s6i"> </p> <div class="game-container svelte-1w57s6i"><div class="player-list svelte-1w57s6i"></div> <div class="cards-container svelte-1w57s6i"></div></div>',1),Zs=C("<p>Loading game...</p>");function ir(s,e){Pt(e,!1);const[t,i]=Ht(),c=()=>Ft(et,"$game",t),m={1:Us,2:Es,3:Is},d={1:Rs,2:Ls,3:xs,4:As,5:Cs,6:Ss,7:$s},p={wood:os,stone:is,ore:ns,clay:cs,glass:fs,cloth:ls,papyrus:ds,military1:us,coin3:vs,victory1:ms,victory2:ps,victory3:ys,victory4:gs,victory5:hs,victory6:_s,victory7:ws,victory8:bs};let R=at("Game started — Age I");function S(f,h){et.update(n=>{const v=n.players[0];if(h==="build"){if(v.built.some(o=>o.name===f.name))return ce(R,`You already built "${f.name}", pick another card.`),n;if(!_e(v,f.cost))return ce(R,`You don't have enough resources to build "${f.name}". Pick another card.`),n;const l=v.hand.findIndex(o=>o.id===f.id);if(l<0)return n;v.hand.splice(l,1),tt(v,f)}else if(h==="sell"){const l=v.hand.findIndex(o=>o.id===f.id);if(l<0)return n;v.hand.splice(l,1),v.coins+=3}else if(h==="wonder")if(v.wonderStagesBuilt<v.wonder.stages.length){const l=v.wonder.stages[v.wonderStagesBuilt];if(!_e(v,l.cost))return ce(R,"You don't have enough resources to build this wonder stage!"),n;const o=v.hand.findIndex(a=>a.id===f.id);if(o<0)return n;v.hand.splice(o,1),v.wonderStagesBuilt++;const u=l.effect;rs(v,u,l.cost)}else return ce(R,"Your wonder is already complete!"),n;for(let l=1;l<n.players.length;l++){const o=n.players[l],u=o.hand.filter(I=>!o.built.some(k=>k.name===I.name)&&_e(o,I.cost));let a;if(u.length>0&&(a=ts({...o,hand:u})),a){const I=o.hand.findIndex(k=>k.id===a.id);I>=0&&(o.hand.splice(I,1),tt(o,a))}}const A=n.players.map(l=>l.hand),G=[A[A.length-1],...A.slice(0,A.length-1)];for(let l=0;l<n.players.length;l++)n.players[l].hand=G[l];return n.players.some(l=>l.hand.length>0)?!r(R).startsWith("You already built")&&!r(R).startsWith("You don't have enough resources")&&ce(R,"Turn resolved. Next pick."):(as(n),n.age<3?(n.age++,es(n),ce(R,`End of Age ${n.age-1} finished. Scores updated. Age ${n.age} begins!`)):ce(R,"Game over! Final scores shown above.")),{...n,players:n.players.map(l=>({...l,hand:[...l.hand],built:[...l.built]}))}})}gt();var E=de(),z=ne(E);{var V=f=>{var h=Qs(),n=g(ne(h),2);{var v=u=>{var a=Os();T(()=>{H(a,"src",m[c().age]),H(a,"alt","Age "+c().age)}),_(u,a)};N(n,u=>{m[c().age]&&u(v)})}var A=g(n,2),G=L(A,!0);w(A);var F=g(A,2),l=L(F);J(l,5,()=>c().players,K,(u,a,I)=>{var k=Ys();Fe(k,1,"player-summary svelte-1w57s6i",null,{},{current:I===0});var Y=L(k),B=L(Y);{var re=U=>{var y=Ts();T(()=>{H(y,"src",d[r(a).wonder.id]),H(y,"alt",r(a).wonder.name),H(y,"title",r(a).wonder.name)}),_(U,y)};N(B,U=>{r(a).wonder&&r(a).wonder.id&&d[r(a).wonder.id]&&U(re)})}var X=g(B,2),ee=L(X,!0);w(X);var j=g(X,2),oe=L(j);J(oe,5,()=>r(a).wonder.stages,K,(U,y,W)=>{var D=Ps(),q=L(D);q.textContent=`Stage ${W+1}`;var M=g(q,2),te=g(L(M));{var le=b=>{var O=de(),Ee=ne(O);J(Ee,1,()=>Object.entries(r(y).cost),K,(Ie,Oe)=>{var pe=ge(()=>he(r(Oe),2));let Te=()=>r(pe)[0],ke=()=>r(pe)[1];var ie=ks(),Be=L(ie);w(ie),T(()=>P(Be,`${ke()??""} ${Te()??""}`)),_(Ie,ie)}),_(b,O)},Ue=b=>{var O=Bs();_(b,O)};N(te,b=>{r(y).cost?b(le):b(Ue,!1)})}w(M);var Ve=g(M,2),We=g(L(Ve));{var dt=b=>{var O=Ne();T(()=>P(O,`+${r(y).effect.points??""} Points`)),_(b,O)};N(We,b=>{r(y).effect.points&&b(dt)})}var ze=g(We,2);{var ut=b=>{var O=Ne();T(()=>P(O,`+${r(y).effect.coins??""} Coins`)),_(b,O)};N(ze,b=>{r(y).effect.coins&&b(ut)})}var je=g(ze,2);{var vt=b=>{var O=Ne();T(()=>P(O,`+${r(y).effect.military??""} Military`)),_(b,O)};N(je,b=>{r(y).effect.military&&b(vt)})}var Ke=g(je,2);{var mt=b=>{var O=de(),Ee=ne(O);J(Ee,1,()=>Object.entries(r(y).effect.resources),K,(Ie,Oe)=>{var pe=ge(()=>he(r(Oe),2));let Te=()=>r(pe)[0],ke=()=>r(pe)[1];var ie=Ds(),Be=L(ie);w(ie),T(()=>P(Be,`${ke()??""} ${Te()??""}`)),_(Ie,ie)}),_(b,O)};N(Ke,b=>{r(y).effect.resources&&b(mt)})}var pt=g(Ke,2);{var yt=b=>{var O=Ms();_(b,O)};N(pt,b=>{!r(y).effect.points&&!r(y).effect.coins&&!r(y).effect.military&&!r(y).effect.resources&&b(yt)})}w(Ve),w(D),T(()=>Fe(D,1,`stage ${W<r(a).wonderStagesBuilt?"built":""}`,"svelte-1w57s6i")),_(U,D)}),w(oe),w(j),w(Y);var ae=g(Y,2),Se=L(ae);w(ae);var fe=g(ae,2),we=L(fe);w(fe);var ue=g(fe,2),be=L(ue);w(ue);var ve=g(ue,2),Re=L(ve);w(ve);var me=g(ve,2);J(me,5,()=>Object.entries(r(a).resources),K,(U,y)=>{var W=ge(()=>he(r(y),2));let D=()=>r(W)[0],q=()=>r(W)[1];var M=Ns(),te=L(M),le=g(te,2),Ue=L(le,!0);w(le),w(M),T(()=>{H(te,"src",p[D()]),H(te,"alt",D()),P(Ue,q())}),_(U,M)}),w(me);var Le=g(me,2),$e=g(L(Le),2);{var x=U=>{var y=Gs();_(U,y)},$=U=>{var y=Fs();J(y,5,()=>r(a).built,K,(W,D)=>{var q=Hs(),M=L(q,!0);w(q),T(()=>P(M,r(D).name)),_(W,q)}),w(y),_(U,y)};N($e,U=>{r(a).built.length===0?U(x):U($,!1)})}w(Le),w(k),T(()=>{P(ee,r(a).wonder?.name),P(Se,`${r(a).name??""} ${I===0?"(You)":""}`),P(we,`Coins: ${r(a).coins??""}`),P(be,`Military: ${r(a).military??""}`),P(Re,`Score: ${r(a).score??""}`)}),_(u,k)}),w(l);var o=g(l,2);J(o,5,()=>c().players[0].hand,K,(u,a)=>{var I=Js(),k=L(I),Y=L(k,!0);w(k);var B=g(k,2),re=g(L(B));{var X=x=>{var $=de(),U=ne($);J(U,1,()=>Object.entries(r(a).cost),K,(y,W)=>{var D=ge(()=>he(r(W),2));let q=()=>r(D)[0],M=()=>r(D)[1];var te=qs(),le=L(te);w(te),T(()=>P(le,`${M()??""} ${q()??""}`)),_(y,te)}),_(x,$)},ee=x=>{var $=Vs();_(x,$)};N(re,x=>{r(a).cost&&Object.keys(r(a).cost).length>0?x(X):x(ee,!1)})}w(B);var j=g(B,2),oe=L(j),ae=g(oe,2),Se=g(ae,2);w(j);var fe=g(j,2),we=L(fe);{var ue=x=>{var $=de(),U=ne($);J(U,1,()=>Object.entries(r(a).effect.resources),K,(y,W)=>{var D=ge(()=>he(r(W),2));let q=()=>r(D)[0];var M=Ws();T(()=>{H(M,"src",p[q()]),H(M,"alt",q())}),_(y,M)}),_(x,$)};N(we,x=>{r(a).effect.resources&&x(ue)})}var be=g(we,2);{var ve=x=>{var $=zs();T(()=>{H($,"src",p["coin"+r(a).effect.coins]),H($,"alt","coin"+r(a).effect.coins)}),_(x,$)};N(be,x=>{r(a).effect.coins&&x(ve)})}var Re=g(be,2);{var me=x=>{var $=de(),U=ne($);J(U,1,()=>Array(r(a).effect.military),K,(y,W)=>{var D=js();T(()=>H(D,"src",p.military1)),_(y,D)}),_(x,$)};N(Re,x=>{r(a).effect.military&&x(me)})}var Le=g(Re,2);{var $e=x=>{var $=Ks();T(()=>{H($,"src",p["victory"+r(a).effect.points]),H($,"alt","victory"+r(a).effect.points)}),_(x,$)};N(Le,x=>{r(a).effect.points&&x($e)})}w(fe),w(I),T(()=>{Fe(I,1,`card-buttons card-type-${r(a).type??""}`,"svelte-1w57s6i"),P(Y,r(a).name)}),Ge("click",oe,()=>S(r(a),"build")),Ge("click",ae,()=>S(r(a),"sell")),Ge("click",Se,()=>S(r(a),"wonder")),_(u,I)}),w(o),w(F),T(()=>P(G,r(R))),_(f,h)},Z=f=>{var h=Zs();_(f,h)};N(z,f=>{c()?f(V):f(Z,!1)})}_(s,E),Nt(),i()}export{ir as component,or as universal};
