import"../chunks/DsnmJJEf.js";import{i as he}from"../chunks/G8IXx4_o.js";import{A as Ae,h as oe,af as tt,C as Fe,x as st,w as rt,f as u,W as at,y as ot,H as it,z as Te,B as Be,K as fe,ag as nt,ak as ct,D as Ee,G as lt,F as ft,ao as Ye,ac as dt,Q as ke,aJ as De,aK as je,I as ze,J as ut,aL as _e,aM as Ce,aN as Qe,aO as we,aP as vt,ai as mt,aQ as pt,an as yt,aR as gt,Z as ht,aS as Ze,ad as _t,aT as wt,p as be,l as O,q as U,d as c,i as v,v as E,s as L,t as N,n as _,o as Re,a6 as te,m as X,aH as ve,aU as me,R as Me}from"../chunks/LRZBNtRS.js";import{w as bt,s as ie,c as Rt,e as qe}from"../chunks/nlGExX9J.js";import{p as de,i as V,s as Lt,a as St}from"../chunks/WwQO-R3r.js";import{s as B}from"../chunks/DEv96aKz.js";function J(a,t){return t}function At(a,t,e){for(var o=a.items,i=[],s=t.length,r=0;r<s;r++)pt(t[r].e,i,!0);var m=s>0&&i.length===0&&e!==null;if(m){var C=e.parentNode;yt(C),C.append(e),o.clear(),re(a,t[0].prev,t[s-1].next)}gt(i,()=>{for(var h=0;h<s;h++){var n=t[h];m||(o.delete(n.k),re(a,n.prev,n.next)),Qe(n.e,!m)}})}function K(a,t,e,o,i,s=null){var r=a,m={flags:t,items:new Map,first:null},C=(t&Ze)!==0;if(C){var h=a;r=oe?Ae(tt(h)):h.appendChild(Fe())}oe&&st();var n=null,l=!1,S=new Map,I=at(()=>{var T=e();return dt(T)?T:T==null?[]:Ye(T)}),f,w;function p(){Bt(w,f,m,S,r,i,t,o,e),s!==null&&(f.length===0?n?ze(n):n=Ee(()=>s(r)):n!==null&&ut(n,()=>{n=null}))}rt(()=>{w??=ht,f=u(I);var T=f.length;if(l&&T===0)return;l=T===0;let j=!1;if(oe){var H=ot(r)===it;H!==(T===0)&&(r=Te(),Ae(r),Be(!1),j=!0)}if(oe){for(var P=null,q,d=0;d<T;d++){if(fe.nodeType===nt&&fe.data===ct){r=fe,j=!0,Be(!1);break}var b=f[d],g=o(b,d);q=xe(fe,m,P,null,b,g,d,i,t,e),m.items.set(g,q),P=q}T>0&&Ae(Te())}if(oe)T===0&&s&&(n=Ee(()=>s(r)));else if(lt()){var k=new Set,Z=ft;for(d=0;d<T;d+=1){b=f[d],g=o(b,d);var Y=m.items.get(g)??S.get(g);Y?(t&(we|_e))!==0&&Je(Y,b,d,t):(q=xe(null,m,null,null,b,g,d,i,t,e,!0),S.set(g,q)),k.add(g)}for(const[$,G]of m.items)k.has($)||Z.skipped_effects.add(G.e);Z.add_callback(p)}else p();j&&Be(!0),u(I)}),oe&&(r=fe)}function Bt(a,t,e,o,i,s,r,m,C){var h=(r&wt)!==0,n=(r&(we|_e))!==0,l=t.length,S=e.items,I=e.first,f=I,w,p=null,T,j=[],H=[],P,q,d,b;if(h)for(b=0;b<l;b+=1)P=t[b],q=m(P,b),d=S.get(q),d!==void 0&&(d.a?.measure(),(T??=new Set).add(d));for(b=0;b<l;b+=1){if(P=t[b],q=m(P,b),d=S.get(q),d===void 0){var g=o.get(q);if(g!==void 0){o.delete(q),S.set(q,g);var k=p?p.next:f;re(e,p,g),re(e,g,k),Ue(g,k,i),p=g}else{var Z=f?f.e.nodes_start:i;p=xe(Z,e,p,p===null?e.first:p.next,P,q,b,s,r,C)}S.set(q,p),j=[],H=[],f=p.next;continue}if(n&&Je(d,P,b,r),(d.e.f&Ce)!==0&&(ze(d.e),h&&(d.a?.unfix(),(T??=new Set).delete(d))),d!==f){if(w!==void 0&&w.has(d)){if(j.length<H.length){var Y=H[0],$;p=Y.prev;var G=j[0],y=j[j.length-1];for($=0;$<j.length;$+=1)Ue(j[$],Y,i);for($=0;$<H.length;$+=1)w.delete(H[$]);re(e,G.prev,y.next),re(e,p,G),re(e,y,Y),f=Y,p=y,b-=1,j=[],H=[]}else w.delete(d),Ue(d,f,i),re(e,d.prev,d.next),re(e,d,p===null?e.first:p.next),re(e,p,d),p=d;continue}for(j=[],H=[];f!==null&&f.k!==q;)(f.e.f&Ce)===0&&(w??=new Set).add(f),H.push(f),f=f.next;if(f===null)continue;d=f}j.push(d),p=d,f=d.next}if(f!==null||w!==void 0){for(var R=w===void 0?[]:Ye(w);f!==null;)(f.e.f&Ce)===0&&R.push(f),f=f.next;var W=R.length;if(W>0){var x=(r&Ze)!==0&&l===0?i:null;if(h){for(b=0;b<W;b+=1)R[b].a?.measure();for(b=0;b<W;b+=1)R[b].a?.fix()}At(e,R,x)}}h&&_t(()=>{if(T!==void 0)for(d of T)d.a?.apply()}),a.first=e.first&&e.first.e,a.last=p&&p.e;for(var D of o.values())Qe(D.e);o.clear()}function Je(a,t,e,o){(o&we)!==0&&je(a.v,t),(o&_e)!==0?je(a.i,e):a.i=e}function xe(a,t,e,o,i,s,r,m,C,h,n){var l=(C&we)!==0,S=(C&vt)===0,I=l?S?ke(i,!1,!1):De(i):i,f=(C&_e)===0?r:De(r),w={i:f,v:I,k:s,a:null,e:null,prev:e,next:o};try{if(a===null){var p=document.createDocumentFragment();p.append(a=Fe())}return w.e=Ee(()=>m(a,I,f,h),oe),w.e.prev=e&&e.e,w.e.next=o&&o.e,e===null?n||(t.first=w):(e.next=w,e.e.next=w.e),o!==null&&(o.prev=w,o.e.prev=w.e),w}finally{}}function Ue(a,t,e){for(var o=a.next?a.next.e.nodes_start:e,i=t?t.e.nodes_start:e,s=a.e.nodes_start;s!==null&&s!==o;){var r=mt(s);i.before(s),s=r}}function re(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const Pe=[...` 	
\r\fÂ \v\uFEFF`];function Ct(a,t,e){var o=a==null?"":""+a;if(t&&(o=o?o+" "+t:t),e){for(var i in e)if(e[i])o=o?o+" "+i:i;else if(o.length)for(var s=i.length,r=0;(r=o.indexOf(i,r))>=0;){var m=r+s;(r===0||Pe.includes(o[r-1]))&&(m===o.length||Pe.includes(o[m]))?o=(r===0?"":o.substring(0,r))+o.substring(m+1):r=m}}return o===""?null:o}function ue(a,t,e,o,i,s){var r=a.__className;if(oe||r!==e||r===void 0){var m=Ct(e,o,s);(!oe||m!==a.getAttribute("class"))&&(m==null?a.removeAttribute("class"):a.className=m),a.__className=e}else if(s&&i!==s)for(var C in s){var h=!!s[C];(i==null||h!==!!i[C])&&a.classList.toggle(C,h)}return s}const qt=!1,Ut=!0,lr=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ut,ssr:qt},Symbol.toStringTag,{value:"Module"})),Et=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]},{id:8,name:"Uppsala Cathedral",baseResource:"clay",stages:[{cost:{stone:2},effect:{coins:3}},{cost:{papyrus:2},effect:{points:5}},{cost:{clay:2,ore:1},effect:{points:7}}]},{id:9,name:"Lindvalls Coffee",baseResource:"coffee",stages:[{cost:{clay:2},effect:{resources:{coffee:1}}},{cost:{glass:2},effect:{resources:{coffee:1}}},{cost:{stone:2},effect:{resources:{coffee:1}}}]}];function Oe(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Timber Yard",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pit",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Excavation",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Mercenary Camp",type:"military",temporary:!0,cost:{coins:1},effect:{military:1}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Mine",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}}]}function Ke(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},altcost:10,effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Free Company",type:"military",temporary:!0,cost:{coins:5},effect:{military:3}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},altcost:11,effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Roastery",type:"resource",cost:{clay:2},effect:{resources:{coffee:1}}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Spice Market",type:"resource",cost:{wood:1,cloth:1},effect:{resources:{spice:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function Xe(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:3},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:3},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:3},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Trade Center",type:"civilian",cost:{coffee:1,ore:2},effect:{points:4}},{id:57,name:"Supply Yard",type:"resource",cost:{stone:1,coins:5},effect:{resources:{wood:1,ore:1,clay:1}}},{id:58,name:"Scriptorium",type:"resource",cost:{stone:1,wood:1},effect:{resources:{papyrus:1}}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:5}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:5}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{coffee:1,spice:1,cloth:1},effect:{coins:5,points:8}}]}function ge(a){return a.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)}function kt(a){return Et.map(e=>({w:e,sort:Math.random()})).sort((e,o)=>e.sort-o.sort).map(({w:e})=>e).slice(0,a)}function xt(a,t){return{name:a,coins:3,military:0,score:0,resources:{[t.baseResource]:1},hand:[],built:[],wonder:t,wonderStagesBuilt:0}}function Ot(){const a=["You","Bot A","Bot B"],t=kt(a.length),e=a.map((i,s)=>xt(i,t[s])),o=ge(Oe());for(let i=0;i<e.length;i++)e[i].hand=o.splice(0,7);return{players:e,discard:[],age:1}}function It(a){let t;a.age===2?t=ge(Ke()):a.age===3?t=ge(Xe()):t=ge(Oe());for(let e=0;e<a.players.length;e++)a.players[e].hand=t.splice(0,7)}const $e=bt(Ot()),Tt=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,Dt=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,jt=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href,Ge={1:Tt,2:Dt,3:jt};function Mt(a){if(a.hand.length!==0)return a.hand.reduce((t,e)=>{const o=Ne(t);return Ne(e)>o?e:t})}function Ne(a){return a.effect.resources?Object.values(a.effect.resources).reduce((t,e)=>t+(e??0),0):0}function et(a,t){if(t){if(t.resources)for(const[e,o]of Object.entries(t.resources)){const i=o??0;a.resources[e]=(a.resources[e]||0)+i}typeof t.coins=="number"&&(a.coins=(a.coins||0)+t.coins),typeof t.military=="number"&&(a.military=(a.military||0)+t.military),typeof t.points=="number"&&(a.score=(a.score||0)+t.points)}}function Pt(a,t){t&&t.coins&&t.coins>0&&(a.coins=(a.coins||0)-t.coins)}function le(a,t,e){if(!t||a.built.some(o=>o.id===e))return!0;if(t.coins&&(a.coins||0)<t.coins)return!1;for(const[o,i]of Object.entries(t))if(o!=="coins"&&(a.resources[o]||0)<(i||0))return!1;return!0}function He(a,t){if(!le(a,t.cost,t.altcost)){console.warn(`${a.name} cannot afford ${t.name}`);return}Pt(a,t.cost),et(a,t.effect),a.built.push(t)}function Ve(a,t,e){if(!le(a,e)){console.warn(`${a.name} cannot afford this wonder stage`);return}et(a,t)}function $t(a){const t=a.players,e=t.length;let o=0;switch(a.age){case 1:o=1;break;case 2:o=3;break;case 3:o=5;break;default:o=0}for(let i=0;i<e;i++){const s=t[i],r=t[(i+1)%e],m=t[(i-1+e)%e];if(a.age===3){const h=Math.floor(s.coins/3);s.score+=h,s.coins=s.coins%3}(s.military||0)>(r.military||0)?s.score+=o:(s.military||0)<(r.military||0)&&(s.score-=1),(s.military||0)>(m.military||0)?s.score+=o:(s.military||0)<(m.military||0)&&(s.score-=1);const C=s.resources.coffee||0;s.score+=C,s.built=s.built.filter(h=>!h.temporary),s.resources={[s.wonder.baseResource]:1},s.military=s.built.reduce((h,n)=>h+(n.effect.military||0),0);for(const h of s.built)if(h.effect.resources)for(const[n,l]of Object.entries(h.effect.resources))s.resources[n]=(s.resources[n]||0)+(l||0);for(let h=0;h<s.wonderStagesBuilt;h++){const n=s.wonder.stages[h].effect;if(n.military&&(s.military+=n.military),n.points&&(s.score+=n.points),n.coins&&(s.coins+=n.coins),n.resources)for(const[l,S]of Object.entries(n.resources))s.resources[l]=(s.resources[l]||0)+S}}}function Gt(a,t,e){let o="",i=[];const s=structuredClone(a),r=s.players[0];if(e==="build"){if(r.built.some(l=>l.name===t.name))return o=`You already built "${t.name}", pick another card.`,{updatedGame:s,message:o,winners:i};if(!le(r,t.cost,t.altcost))return o=`You don't have enough resources to build "${t.name}". Pick another card.`,{updatedGame:s,message:o,winners:i};const n=r.hand.findIndex(l=>l.id===t.id);if(n<0)return{updatedGame:s,message:o,winners:i};r.hand.splice(n,1),He(r,t)}else if(e==="sell"){const n=r.hand.findIndex(l=>l.id===t.id);if(n<0)return{updatedGame:s,message:o,winners:i};r.hand.splice(n,1),r.coins+=3}else if(e==="wonder")if(r.wonderStagesBuilt<r.wonder.stages.length){const n=r.wonder.stages[r.wonderStagesBuilt];if(!le(r,n.cost))return o="You don't have enough resources to build this wonder stage!",{updatedGame:s,message:o,winners:i};const l=r.hand.findIndex(S=>S.id===t.id);if(l<0)return{updatedGame:s,message:o,winners:i};r.hand.splice(l,1),r.wonderStagesBuilt++,Ve(r,n.effect,n.cost)}else return o="Your wonder is already complete!",{updatedGame:s,message:o,winners:i};for(let n=1;n<s.players.length;n++){const l=s.players[n],S=l.hand.filter(w=>!l.built.some(p=>p.name===w.name)&&le(l,w.cost));let I,f="build";if(S.length>0)I=Mt({...l,hand:S}),f="build";else{if(l.wonderStagesBuilt<l.wonder.stages.length){const w=l.wonder.stages[l.wonderStagesBuilt];le(l,w.cost)&&(I=l.hand[0],f="wonder")}!I&&l.hand.length>0&&(I=l.hand[0],f="sell")}if(I){const w=l.hand.findIndex(p=>p.id===I.id);if(w>=0){if(l.hand.splice(w,1),console.log("picked",I.name,"to",f,"for bot",l.name),f==="build")He(l,I);else if(f==="sell")l.coins+=3;else if(f==="wonder"){const p=l.wonder.stages[l.wonderStagesBuilt];l.wonderStagesBuilt++,Ve(l,p.effect,p.cost)}}}}const m=s.players.map(n=>n.hand),C=[m[m.length-1],...m.slice(0,m.length-1)];for(let n=0;n<s.players.length;n++)s.players[n].hand=C[n],console.log(s.players[n].name,"s hand:",s.players[n].hand);if(s.players.some(n=>n.hand.length>0))!o.startsWith("You already built")&&!o.startsWith("You don't have enough resources")&&(o="Turn resolved. Next pick.");else if($t(s),s.age<3)s.age++,It(s),o=`End of Age ${s.age-1} finished. Scores updated. Age ${s.age} begins!`;else{const n=Math.max(...s.players.map(l=>l.score));i=s.players.filter(l=>l.score===n),o=`Game over! ${i.map(l=>l.wonder.name).join(", ")} won with ${n} points!`,console.log("Final scores:",s.players.map(l=>({name:l.name,score:l.score}))),console.log("Winners:",i)}return{updatedGame:{...s,players:s.players.map(n=>({...n,hand:[...n.hand],built:[...n.built]}))},message:o,winners:i}}const Nt=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Ht=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,Vt=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Wt=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,Ft=""+new URL("../assets/uppsala.DzCzligB.png",import.meta.url).href,Yt=""+new URL("../assets/lindvalls.JVtzja-w.png",import.meta.url).href,zt=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Qt=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Zt=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,ye={1:Nt,2:Ht,3:Vt,4:Wt,5:zt,6:Qt,7:Zt,8:Ft,9:Yt},Jt=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,Kt=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,Xt=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,es=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,ts=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,ss=""+new URL("../assets/coffee.BEH_fvhj.png",import.meta.url).href,rs=""+new URL("../assets/spice.CE-eP-kd.png",import.meta.url).href,as=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,os=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,is=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,ns=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,cs=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,ls=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,fs=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,ds=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,us=""+new URL("../assets/coin-6.CoRwwKTP.png",import.meta.url).href,vs=""+new URL("../assets/coin-9.DQSSAwKE.png",import.meta.url).href,ms=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,ps=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,ys=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,gs=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,hs=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,_s=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,ws=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,bs=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,Rs=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,A={coffee:ss,wood:Kt,stone:Xt,ore:es,clay:ts,glass:Jt,cloth:as,papyrus:os,spice:rs,military:is,coin:ns,coin1:cs,coin3:ls,coin4:fs,coin5:ds,coin6:us,coin9:vs,victory:ms,victory1:ps,victory2:ys,victory3:gs,victory4:hs,victory5:_s,victory6:ws,victory7:bs,victory8:Rs};var Ls=O('<img class="svelte-vdqv07"/>'),Ss=O('<img class="svelte-vdqv07"/>'),As=O('<img alt="military" class="svelte-vdqv07"/>'),Bs=O('<img class="svelte-vdqv07"/>'),Cs=O("<em>Special</em>"),qs=O('<img class="svelte-vdqv07"/>'),Us=O('<img class="svelte-vdqv07"/>'),Es=O("<em>Free</em>"),ks=O('<div class="stage-cost svelte-vdqv07"><!></div>'),xs=O('<div><div><div class="stage-index svelte-vdqv07"></div> <div><!> <!> <!> <!> <!></div></div> <!></div>'),Os=O('<div class="wonder-progress"><div class="stages svelte-vdqv07"></div></div>');function Is(a,t){be(t,!1);let e=de(t,"player",8);he();var o=Os(),i=U(o);K(i,5,()=>(v(e()),c(()=>e().wonder.stages)),J,(s,r,m)=>{var C=xs(),h=U(C),n=U(h);n.textContent=`Stage ${m+1}`;var l=E(n,2),S=U(l);{var I=g=>{var k=te(),Z=X(k);K(Z,1,()=>(u(r),c(()=>Object.entries(u(r).effect.resources))),J,(Y,$)=>{var G=ve(()=>me(u($),2));let y=()=>u(G)[0],R=()=>u(G)[1];var W=te(),x=X(W);K(x,1,()=>(R(),c(()=>Array(R()))),J,(D,F)=>{var M=Ls();N(()=>{B(M,"src",(v(A),y(),c(()=>A[y()]))),B(M,"alt",y())}),_(D,M)}),_(Y,W)}),_(g,k)};V(S,g=>{u(r),c(()=>u(r).effect.resources)&&g(I)})}var f=E(S,2);{var w=g=>{var k=Ss();N(()=>{B(k,"src",(v(A),u(r),c(()=>A["coin"+u(r).effect.coins]))),B(k,"alt",(u(r),c(()=>"coin"+u(r).effect.coins)))}),_(g,k)};V(f,g=>{u(r),c(()=>u(r).effect.coins)&&g(w)})}var p=E(f,2);{var T=g=>{var k=te(),Z=X(k);K(Z,1,()=>(u(r),c(()=>Array(u(r).effect.military))),J,(Y,$)=>{var G=As();N(()=>B(G,"src",(v(A),c(()=>A.military)))),_(Y,G)}),_(g,k)};V(p,g=>{u(r),c(()=>u(r).effect.military)&&g(T)})}var j=E(p,2);{var H=g=>{var k=Bs();N(()=>{B(k,"src",(v(A),u(r),c(()=>A["victory"+u(r).effect.points]))),B(k,"alt",(u(r),c(()=>"victory"+u(r).effect.points)))}),_(g,k)};V(j,g=>{u(r),c(()=>u(r).effect.points)&&g(H)})}var P=E(j,2);{var q=g=>{var k=Cs();_(g,k)};V(P,g=>{u(r),c(()=>!u(r).effect.points&&!u(r).effect.coins&&!u(r).effect.military&&!u(r).effect.resources)&&g(q)})}L(l),L(h);var d=E(h,2);{var b=g=>{var k=ks(),Z=U(k);{var Y=G=>{var y=te(),R=X(y);K(R,1,()=>(u(r),c(()=>Object.entries(u(r).cost))),J,(W,x)=>{var D=ve(()=>me(u(x),2));let F=()=>u(D)[0],M=()=>u(D)[1];var z=te(),ee=X(z);{var ae=se=>{var Q=qs();N(()=>{B(Q,"src",(v(A),M(),c(()=>A["coin"+M()]))),B(Q,"alt","coin"+M())}),_(se,Q)},ne=se=>{var Q=te(),ce=X(Q);K(ce,1,()=>(M(),c(()=>Array(M()))),J,(Le,Ie)=>{var pe=Us();N(()=>{B(pe,"src",(v(A),F(),c(()=>A[F()]))),B(pe,"alt",F())}),_(Le,pe)}),_(se,Q)};V(ee,se=>{F()==="coins"?se(ae):se(ne,!1)})}_(W,z)}),_(G,y)},$=G=>{var y=Es();_(G,y)};V(Z,G=>{u(r),c(()=>u(r).cost)?G(Y):G($,!1)})}L(k),_(g,k)};V(d,g=>{v(e()),c(()=>m>=e().wonderStagesBuilt)&&g(b)})}L(C),N(()=>{ue(C,1,`stage ${v(e()),c(()=>m<e().wonderStagesBuilt?"built":"")??""} ${v(e()),c(()=>m===e().wonderStagesBuilt?"next":"")??""}`,"svelte-vdqv07"),ue(h,1,`stage-info ${v(e()),c(()=>m<e().wonderStagesBuilt?"built":"")??""}`,"svelte-vdqv07"),ue(l,1,`stage-effect ${v(e()),c(()=>m<e().wonderStagesBuilt?"built":"")??""}`,"svelte-vdqv07")}),_(s,C)}),L(i),L(o),_(a,o),Re()}var Ts=O('<img class="svelte-cq7wjf"/>'),Ds=O('<div class="resource svelte-cq7wjf"><img class="svelte-cq7wjf"/> <span> </span></div>'),js=O("<em>None</em>"),Ms=O("<li> </li>"),Ps=O("<ul></ul>"),$s=O('<div><div class="wonder svelte-cq7wjf"><!> <div class="wonder-name svelte-cq7wjf"> </div> <div class="wonder-progress svelte-cq7wjf"><!></div></div> <div class="player-info svelte-cq7wjf"><div class="stats svelte-cq7wjf"><div class="resource svelte-cq7wjf"><img alt="coin" class="svelte-cq7wjf"/> <span> </span></div> <div class="resource svelte-cq7wjf"><img alt="military" class="svelte-cq7wjf"/> <span> </span></div> <div class="resource svelte-cq7wjf"><img alt="score" class="svelte-cq7wjf"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-cq7wjf"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>');function Gs(a,t){be(t,!1);let e=de(t,"player",8),o=de(t,"i",8),i=de(t,"winners",8);he();var s=$s();let r;var m=U(s),C=U(m);{var h=x=>{var D=Ts();N(()=>{B(D,"src",(v(ye),v(e()),c(()=>ye[e().wonder.id]))),B(D,"alt",(v(e()),c(()=>e().wonder.name))),B(D,"title",(v(e()),c(()=>e().wonder.name)))}),_(x,D)};V(C,x=>{v(e()),v(ye),c(()=>e().wonder&&e().wonder.id&&ye[e().wonder.id])&&x(h)})}var n=E(C,2),l=U(n,!0);L(n);var S=E(n,2),I=U(S);Is(I,{get player(){return e()}}),L(S),L(m);var f=E(m,2),w=U(f),p=U(w),T=U(p),j=E(T,2),H=U(j,!0);L(j),L(p);var P=E(p,2),q=U(P),d=E(q,2),b=U(d,!0);L(d),L(P);var g=E(P,2),k=U(g),Z=E(k,2),Y=U(Z,!0);L(Z),L(g),L(w);var $=E(w,4);K($,5,()=>(v(e()),c(()=>Object.entries(e().resources))),J,(x,D)=>{var F=ve(()=>me(u(D),2));let M=()=>u(F)[0],z=()=>u(F)[1];var ee=Ds(),ae=U(ee),ne=E(ae,2),se=U(ne,!0);L(ne),L(ee),N(()=>{B(ae,"src",(v(A),M(),c(()=>A[M()]))),B(ae,"alt",M()),ie(se,z())}),_(x,ee)}),L($);var G=E($,4),y=U(G);{var R=x=>{var D=js();_(x,D)},W=x=>{var D=Ps();K(D,5,()=>(v(e()),c(()=>e().built)),J,(F,M)=>{var z=Ms(),ee=U(z,!0);L(z),N(()=>ie(ee,(u(M),c(()=>u(M).name)))),_(F,z)}),L(D),_(x,D)};V(y,x=>{v(e()),c(()=>e().built.length===0)?x(R):x(W,!1)})}L(G),L(f),L(s),N(x=>{r=ue(s,1,"player-summary svelte-cq7wjf",null,r,x),ie(l,(v(e()),c(()=>e().wonder?.name))),B(T,"src",(v(A),c(()=>A.coin))),ie(H,(v(e()),c(()=>e().coins))),B(q,"src",(v(A),c(()=>A.military))),ie(b,(v(e()),c(()=>e().military))),B(k,"src",(v(A),c(()=>A.victory))),ie(Y,(v(e()),c(()=>e().score)))},[()=>({current:o()===0,winner:i().some(x=>x.name===e().name)})]),_(a,s),Re()}const Ns=[...Oe(),...Ke(),...Xe()];function We(a){return Ns.find(t=>t.id===a)?.name}var Hs=O('<img class="svelte-44bu75"/>'),Vs=O('<img class="svelte-44bu75"/>'),Ws=O('<img alt="military" class="svelte-44bu75"/>'),Fs=O('<img class="svelte-44bu75"/>'),Ys=O('<p class="card-temporary svelte-44bu75">Temporary, removed after end of age</p>'),zs=O('<img class="svelte-44bu75"/>'),Qs=O('<img class="svelte-44bu75"/>'),Zs=O("<em>Free</em>"),Js=O('<div class="card-altcost svelte-44bu75"><p class="svelte-44bu75"> </p></div>'),Ks=O('<div><div class="card-info svelte-44bu75"><h2> </h2> <div class="card-effect svelte-44bu75"><!> <!> <!> <!></div> <!></div> <div class="card-cost svelte-44bu75"><!></div> <!> <div class="card-actions svelte-44bu75"><button class="svelte-44bu75"><strong>Build</strong></button> <button class="svelte-44bu75"><strong>Sell</strong></button> <button class="svelte-44bu75"><strong>Wonder</strong></button></div></div>');function Xs(a,t){be(t,!1);let e=de(t,"card",8);const o=Rt();function i(y){o("pick",y)}he();var s=Ks(),r=U(s),m=U(r),C=U(m,!0);L(m);var h=E(m,2),n=U(h);{var l=y=>{var R=te(),W=X(R);K(W,1,()=>(v(e()),c(()=>Object.entries(e().effect.resources))),J,(x,D)=>{var F=ve(()=>me(u(D),2));let M=()=>u(F)[0],z=()=>u(F)[1];var ee=te(),ae=X(ee);K(ae,1,()=>(z(),c(()=>Array(z()))),J,(ne,se)=>{var Q=Hs();N(()=>{B(Q,"src",(v(A),M(),c(()=>A[M()]))),B(Q,"alt",M())}),_(ne,Q)}),_(x,ee)}),_(y,R)};V(n,y=>{v(e()),c(()=>e().effect.resources)&&y(l)})}var S=E(n,2);{var I=y=>{var R=Vs();N(()=>{B(R,"src",(v(A),v(e()),c(()=>A["coin"+e().effect.coins]))),B(R,"alt",(v(e()),c(()=>"coin"+e().effect.coins)))}),_(y,R)};V(S,y=>{v(e()),c(()=>e().effect.coins)&&y(I)})}var f=E(S,2);{var w=y=>{var R=te(),W=X(R);K(W,1,()=>(v(e()),c(()=>Array(e().effect.military))),J,(x,D)=>{var F=Ws();N(()=>B(F,"src",(v(A),c(()=>A.military)))),_(x,F)}),_(y,R)};V(f,y=>{v(e()),c(()=>e().effect.military)&&y(w)})}var p=E(f,2);{var T=y=>{var R=Fs();N(()=>{B(R,"src",(v(A),v(e()),c(()=>A["victory"+e().effect.points]))),B(R,"alt",(v(e()),c(()=>"victory"+e().effect.points)))}),_(y,R)};V(p,y=>{v(e()),c(()=>e().effect.points)&&y(T)})}L(h);var j=E(h,2);{var H=y=>{var R=Ys();_(y,R)};V(j,y=>{v(e()),c(()=>e().temporary)&&y(H)})}L(r);var P=E(r,2),q=U(P);{var d=y=>{var R=te(),W=X(R);K(W,1,()=>(v(e()),c(()=>Object.entries(e().cost))),J,(x,D)=>{var F=ve(()=>me(u(D),2));let M=()=>u(F)[0],z=()=>u(F)[1];var ee=te(),ae=X(ee);{var ne=Q=>{var ce=zs();N(()=>{B(ce,"src",(v(A),z(),c(()=>A["coin"+z()]))),B(ce,"alt","coin"+z())}),_(Q,ce)},se=Q=>{var ce=te(),Le=X(ce);K(Le,1,()=>(z(),c(()=>Array(z()))),J,(Ie,pe)=>{var Se=Qs();N(()=>{B(Se,"src",(v(A),M(),c(()=>A[M()]))),B(Se,"alt",M())}),_(Ie,Se)}),_(Q,ce)};V(ae,Q=>{M()==="coins"?Q(ne):Q(se,!1)})}_(x,ee)}),_(y,R)},b=y=>{var R=Zs();_(y,R)};V(q,y=>{v(e()),c(()=>e().cost&&Object.keys(e().cost).length>0)?y(d):y(b,!1)})}L(P);var g=E(P,2);{var k=y=>{var R=Js(),W=U(R),x=U(W,!0);L(W),L(R),N(D=>ie(x,D),[()=>(v(We),v(e()),c(()=>We(e().altcost)))]),_(y,R)};V(g,y=>{v(e()),c(()=>e().altcost)&&y(k)})}var Z=E(g,2),Y=U(Z),$=E(Y,2),G=E($,2);L(Z),L(s),N(()=>{ue(s,1,`card-buttons card-type-${v(e()),c(()=>e().type)??""}`,"svelte-44bu75"),ie(C,(v(e()),c(()=>e().name)))}),qe("click",Y,()=>i("build")),qe("click",$,()=>i("sell")),qe("click",G,()=>i("wonder")),_(a,s),Re()}var er=O('<img class="age-image svelte-100ipa2" width="120" height="120"/>'),tr=O('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-100ipa2"> </p> <div class="game-container svelte-100ipa2"><div class="player-list svelte-100ipa2"></div> <div class="cards-container svelte-100ipa2"></div></div>',1),sr=O("<p>Loading game...</p>");function fr(a,t){be(t,!1);const[e,o]=Lt(),i=()=>St($e,"$game",e);let s=ke("Game started - Age I"),r=ke([]);function m(S,I){$e.update(f=>{const{updatedGame:w,message:p,winners:T}=Gt(f,S,I);return Me(s,p),Me(r,T),w})}he();var C=te(),h=X(C);{var n=S=>{var I=tr(),f=E(X(I),2);{var w=q=>{var d=er();N(()=>{B(d,"src",Ge[i().age]),B(d,"alt","Age "+i().age)}),_(q,d)};V(f,q=>{Ge[i().age]&&q(w)})}var p=E(f,2),T=U(p,!0);L(p);var j=E(p,2),H=U(j);K(H,5,()=>i().players,J,(q,d,b)=>{Gs(q,{get player(){return u(d)},i:b,get winners(){return u(r)}})}),L(H);var P=E(H,2);K(P,5,()=>i().players[0].hand,J,(q,d)=>{Xs(q,{get card(){return u(d)},$$events:{pick:b=>m(u(d),b.detail)}})}),L(P),L(j),N(()=>ie(T,u(s))),_(S,I)},l=S=>{var I=sr();_(S,I)};V(h,S=>{i()?S(n):S(l,!1)})}_(a,C),Re(),o()}export{fr as component,lr as universal};
