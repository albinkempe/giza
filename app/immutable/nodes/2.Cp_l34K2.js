import"../chunks/DsnmJJEf.js";import{i as Ct}from"../chunks/pXw9F0qr.js";import{G as qe,o as oe,A as xt,J as ft,p as Bt,n as St,S as a,ax as Et,D as Ut,H as Ot,F as st,I as Fe,z as xe,af as It,aj as Tt,w as Ze,M as kt,K as Dt,an as vt,i as $t,R as ut,aJ as rt,aK as at,O as dt,P as Pt,aL as ke,aM as Ye,y as mt,aN as De,aO as Mt,ah as Nt,aP as Ht,am as Vt,aQ as Gt,ac as qt,aR as pt,ad as Ft,aS as Yt,$ as Wt,a8 as ce,a1 as ae,a3 as y,a4 as zt,a0 as x,a7 as h,a5 as b,a6 as g,a2 as D,aI as We,aH as Be,aT as Se,T as me}from"../chunks/DEaZTocB.js";import{w as Qt,a as q,e as ze}from"../chunks/wIxpBGLN.js";import{i as N,s as jt,a as Zt}from"../chunks/B6mUW0Rw.js";import{s as E}from"../chunks/C0WV71g0.js";function W(s,e){return e}function Jt(s,e,t){for(var i=s.items,c=[],p=e.length,v=0;v<p;v++)Ht(e[v].e,c,!0);var d=p>0&&c.length===0&&t!==null;if(d){var L=t.parentNode;Vt(L),L.append(t),i.clear(),Z(s,e[0].prev,e[p-1].next)}Gt(c,()=>{for(var U=0;U<p;U++){var T=e[U];d||(i.delete(T.k),Z(s,T.prev,T.next)),mt(T.e,!d)}})}function z(s,e,t,i,c,p=null){var v=s,d={flags:e,items:new Map,first:null},L=(e&pt)!==0;if(L){var U=s;v=oe?qe(xt(U)):U.appendChild(ft())}oe&&Bt();var T=null,Q=!1,F=new Map,J=Et(()=>{var m=t();return $t(m)?m:m==null?[]:vt(m)}),l,_;function n(){Xt(_,l,d,F,v,c,e,i,t),p!==null&&(l.length===0?T?dt(T):T=Ze(()=>p(v)):T!==null&&Pt(T,()=>{T=null}))}St(()=>{_??=qt,l=a(J);var m=l.length;if(Q&&m===0)return;Q=m===0;let C=!1;if(oe){var V=Ut(v)===Ot;V!==(m===0)&&(v=st(),qe(v),Fe(!1),C=!0)}if(oe){for(var G=null,f,r=0;r<m;r++){if(xe.nodeType===It&&xe.data===Tt){v=xe,C=!0,Fe(!1);break}var u=l[r],o=i(u,r);f=Je(xe,d,G,null,u,o,r,c,e,t),d.items.set(o,f),G=f}m>0&&qe(st())}if(oe)m===0&&p&&(T=Ze(()=>p(v)));else if(kt()){var O=new Set,B=Dt;for(r=0;r<m;r+=1){u=l[r],o=i(u,r);var I=d.items.get(o)??F.get(o);I?(e&(De|ke))!==0&&yt(I,u,r,e):(f=Je(null,d,null,null,u,o,r,c,e,t,!0),F.set(o,f)),O.add(o)}for(const[k,ie]of d.items)O.has(k)||B.skipped_effects.add(ie.e);B.add_callback(n)}else n();C&&Fe(!0),a(J)}),oe&&(v=xe)}function Xt(s,e,t,i,c,p,v,d,L){var U=(v&Yt)!==0,T=(v&(De|ke))!==0,Q=e.length,F=t.items,J=t.first,l=J,_,n=null,m,C=[],V=[],G,f,r,u;if(U)for(u=0;u<Q;u+=1)G=e[u],f=d(G,u),r=F.get(f),r!==void 0&&(r.a?.measure(),(m??=new Set).add(r));for(u=0;u<Q;u+=1){if(G=e[u],f=d(G,u),r=F.get(f),r===void 0){var o=i.get(f);if(o!==void 0){i.delete(f),F.set(f,o);var O=n?n.next:l;Z(t,n,o),Z(t,o,O),Qe(o,O,c),n=o}else{var B=l?l.e.nodes_start:c;n=Je(B,t,n,n===null?t.first:n.next,G,f,u,p,v,L)}F.set(f,n),C=[],V=[],l=n.next;continue}if(T&&yt(r,G,u,v),(r.e.f&Ye)!==0&&(dt(r.e),U&&(r.a?.unfix(),(m??=new Set).delete(r))),r!==l){if(_!==void 0&&_.has(r)){if(C.length<V.length){var I=V[0],k;n=I.prev;var ie=C[0],X=C[C.length-1];for(k=0;k<C.length;k+=1)Qe(C[k],I,c);for(k=0;k<V.length;k+=1)_.delete(V[k]);Z(t,ie.prev,X.next),Z(t,n,ie),Z(t,X,I),l=I,n=X,u-=1,C=[],V=[]}else _.delete(r),Qe(r,l,c),Z(t,r.prev,r.next),Z(t,r,n===null?t.first:n.next),Z(t,n,r),n=r;continue}for(C=[],V=[];l!==null&&l.k!==f;)(l.e.f&Ye)===0&&(_??=new Set).add(l),V.push(l),l=l.next;if(l===null)continue;r=l}C.push(r),n=r,l=r.next}if(l!==null||_!==void 0){for(var K=_===void 0?[]:vt(_);l!==null;)(l.e.f&Ye)===0&&K.push(l),l=l.next;var j=K.length;if(j>0){var le=(v&pt)!==0&&Q===0?c:null;if(U){for(u=0;u<j;u+=1)K[u].a?.measure();for(u=0;u<j;u+=1)K[u].a?.fix()}Jt(t,K,le)}}U&&Ft(()=>{if(m!==void 0)for(r of m)r.a?.apply()}),s.first=t.first&&t.first.e,s.last=n&&n.e;for(var pe of i.values())mt(pe.e);i.clear()}function yt(s,e,t,i){(i&De)!==0&&at(s.v,e),(i&ke)!==0?at(s.i,t):s.i=t}function Je(s,e,t,i,c,p,v,d,L,U,T){var Q=(L&De)!==0,F=(L&Mt)===0,J=Q?F?ut(c,!1,!1):rt(c):c,l=(L&ke)===0?v:rt(v),_={i:l,v:J,k:p,a:null,e:null,prev:t,next:i};try{if(s===null){var n=document.createDocumentFragment();n.append(s=ft())}return _.e=Ze(()=>d(s,J,l,U),oe),_.e.prev=t&&t.e,_.e.next=i&&i.e,t===null?T||(e.first=_):(t.next=_,t.e.next=_.e),i!==null&&(i.prev=_,i.e.prev=_.e),_}finally{}}function Qe(s,e,t){for(var i=s.next?s.next.e.nodes_start:t,c=e?e.e.nodes_start:t,p=s.e.nodes_start;p!==null&&p!==i;){var v=Nt(p);c.before(p),p=v}}function Z(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const ot=[...` 	
\r\f \v\uFEFF`];function Kt(s,e,t){var i=s==null?"":""+s;if(e&&(i=i?i+" "+e:e),t){for(var c in t)if(t[c])i=i?i+" "+c:c;else if(i.length)for(var p=c.length,v=0;(v=i.indexOf(c,v))>=0;){var d=v+p;(v===0||ot.includes(i[v-1]))&&(d===i.length||ot.includes(i[d]))?i=(v===0?"":i.substring(0,v))+i.substring(d+1):v=d}}return i===""?null:i}function je(s,e,t,i,c,p){var v=s.__className;if(oe||v!==t||v===void 0){var d=Kt(t,i,p);(!oe||d!==s.getAttribute("class"))&&(d==null?s.removeAttribute("class"):s.className=d),s.__className=t}else if(p&&c!==p)for(var L in p){var U=!!p[L];(c==null||U!==!!c[L])&&s.classList.toggle(L,U)}return p}const es=!1,ts=!0,hr=Object.freeze(Object.defineProperty({__proto__:null,prerender:ts,ssr:es},Symbol.toStringTag,{value:"Module"})),ss=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]}];function gt(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}}]}function rs(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Training Ground",type:"military",cost:{clay:2,ore:1},effect:{military:2}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Vineyard",type:"commerce",effect:{coins:3}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Glassblower",type:"resource",effect:{resources:{glass:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function as(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:2},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:2},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:2},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:6}},{id:57,name:"Haven",type:"commerce",cost:{wood:1,ore:1,cloth:1},effect:{coins:5}},{id:58,name:"Lighthouse",type:"commerce",cost:{stone:1,glass:1},effect:{coins:4}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:7}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:8}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{stone:1,ore:1,cloth:1},effect:{coins:6}}]}function Te(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e)}function os(s){return ss.map(t=>({w:t,sort:Math.random()})).sort((t,i)=>t.sort-i.sort).map(({w:t})=>t).slice(0,s)}function is(s,e){return{name:s,coins:3,military:0,score:0,resources:{[e.baseResource]:1},hand:[],built:[],wonder:e,wonderStagesBuilt:0}}function ns(){const s=["You","Bot A","Bot B"],e=os(s.length),t=s.map((c,p)=>is(c,e[p])),i=Te(gt());for(let c=0;c<t.length;c++)t[c].hand=i.splice(0,7);return{players:t,discard:[],age:1}}function cs(s){let e;s.age===2?e=Te(rs()):s.age===3?e=Te(as()):e=Te(gt());for(let t=0;t<s.players.length;t++)s.players[t].hand=e.splice(0,7)}const it=Qt(ns());function ls(s){if(s.hand.length!==0)return s.hand.reduce((e,t)=>{const i=nt(e);return nt(t)>i?t:e})}function nt(s){return s.effect.resources?Object.values(s.effect.resources).reduce((e,t)=>e+(t??0),0):0}function ht(s,e){if(e){if(e.resources)for(const[t,i]of Object.entries(e.resources)){const c=i??0;s.resources[t]=(s.resources[t]||0)+c}typeof e.coins=="number"&&(s.coins=(s.coins||0)+e.coins),typeof e.military=="number"&&(s.military=(s.military||0)+e.military),typeof e.points=="number"&&(s.score=(s.score||0)+e.points)}}function fs(s,e){e&&e.coins&&e.coins>0&&(s.coins=(s.coins||0)-e.coins)}function _e(s,e){if(!e)return!0;if(e.coins&&(s.coins||0)<e.coins)return!1;for(const[t,i]of Object.entries(e))if(t!=="coins"&&(s.resources[t]||0)<(i||0))return!1;return!0}function ct(s,e){if(!_e(s,e.cost)){console.warn(`${s.name} cannot afford ${e.name}`);return}fs(s,e.cost),ht(s,e.effect),s.built.push(e)}function lt(s,e,t){if(!_e(s,t)){console.warn(`${s.name} cannot afford this wonder stage`);return}ht(s,e)}function vs(s){const e=s.players,t=e.length;for(let i=0;i<t;i++){const c=e[i],p=e[(i+1)%t],v=e[(i-1+t)%t];let d=0;(c.military||0)>(p.military||0)&&d++,(c.military||0)>(v.military||0)&&d++,d>0&&(c.score=(c.score||0)+d)}}const us=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,ds=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,ms=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,ps=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,ys=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,gs=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,hs=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,_s=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,ws=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,bs=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,Rs=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,Ls=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,As=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,Cs=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,xs=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,Bs=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,Ss=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,Es=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,Us=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,Os=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,Is=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,Ts=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,ks=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Ds=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,$s=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Ps=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,Ms=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Ns=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Hs=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,Vs=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,Gs=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,qs=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href;var Fs=x('<img class="age-image svelte-1up3v05" width="120" height="120"/>'),Ys=x('<img class="svelte-1up3v05"/>'),Ws=x('<span class="resource svelte-1up3v05"> </span>'),zs=x("<em>Free</em>"),Qs=x('<span class="resource svelte-1up3v05"> </span>'),js=x("<em>Special</em>"),Zs=x('<div><div class="stage-index svelte-1up3v05"></div> <div class="stage-cost svelte-1up3v05">Cost: <!></div> <div class="stage-effect svelte-1up3v05">Effect: <!> <!> <!> <!> <!></div></div>'),Js=x('<div class="resource svelte-1up3v05"><img class="svelte-1up3v05"/> <span> </span></div>'),Xs=x("<em>None</em>"),Ks=x("<li> </li>"),er=x("<ul></ul>"),tr=x('<div><div class="wonder svelte-1up3v05"><!> <div class="wonder-name svelte-1up3v05"> </div> <div class="wonder-progress svelte-1up3v05"><div class="stages svelte-1up3v05"></div></div></div> <div class="player-info svelte-1up3v05"><div class="stats svelte-1up3v05"><div class="resource svelte-1up3v05"><img alt="coin" class="svelte-1up3v05"/> <span> </span></div> <div class="resource svelte-1up3v05"><img alt="military" class="svelte-1up3v05"/> <span> </span></div> <div class="resource svelte-1up3v05"><img alt="score" class="svelte-1up3v05"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-1up3v05"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>'),sr=x('<img class="svelte-1up3v05"/>'),rr=x('<img class="svelte-1up3v05"/>'),ar=x("<em>Free</em>"),or=x('<img class="svelte-1up3v05"/>'),ir=x('<img class="svelte-1up3v05"/>'),nr=x('<img alt="military" class="svelte-1up3v05"/>'),cr=x('<img class="svelte-1up3v05"/>'),lr=x('<div><h2> </h2> <h4>Cost</h4> <div class="card-cost svelte-1up3v05"><!></div> <h4>Production</h4> <div class="card-effect svelte-1up3v05"><!> <!> <!> <!></div> <div class="card-actions svelte-1up3v05"><button class="svelte-1up3v05"><strong>Build</strong></button> <button class="svelte-1up3v05"><strong>Sell</strong></button> <button class="svelte-1up3v05"><strong>Wonder</strong></button></div></div>'),fr=x('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-1up3v05"> </p> <div class="game-container svelte-1up3v05"><div class="player-list svelte-1up3v05"></div> <div class="cards-container svelte-1up3v05"></div></div>',1),vr=x("<p>Loading game...</p>");function _r(s,e){Wt(e,!1);const[t,i]=jt(),c=()=>Zt(it,"$game",t),p={1:Vs,2:Gs,3:qs},v={1:ks,2:Ds,3:$s,4:Ps,5:Ms,6:Ns,7:Hs},d={wood:us,stone:ds,ore:ms,clay:ps,glass:ys,cloth:gs,papyrus:hs,military:_s,coin:ws,coin1:bs,coin3:Rs,coin4:Ls,coin5:As,victory:Cs,victory1:xs,victory2:Bs,victory3:Ss,victory4:Es,victory5:Us,victory6:Os,victory7:Is,victory8:Ts};let L=ut("Game started — Age I");function U(l,_){it.update(n=>{const m=n.players[0];if(_==="build"){if(m.built.some(r=>r.name===l.name))return me(L,`You already built "${l.name}", pick another card.`),n;if(!_e(m,l.cost))return me(L,`You don't have enough resources to build "${l.name}". Pick another card.`),n;const f=m.hand.findIndex(r=>r.id===l.id);if(f<0)return n;m.hand.splice(f,1),ct(m,l)}else if(_==="sell"){const f=m.hand.findIndex(r=>r.id===l.id);if(f<0)return n;m.hand.splice(f,1),m.coins+=3}else if(_==="wonder")if(m.wonderStagesBuilt<m.wonder.stages.length){const f=m.wonder.stages[m.wonderStagesBuilt];if(!_e(m,f.cost))return me(L,"You don't have enough resources to build this wonder stage!"),n;const r=m.hand.findIndex(o=>o.id===l.id);if(r<0)return n;m.hand.splice(r,1),m.wonderStagesBuilt++;const u=f.effect;lt(m,u,f.cost)}else return me(L,"Your wonder is already complete!"),n;for(let f=1;f<n.players.length;f++){const r=n.players[f],u=r.hand.filter(B=>!r.built.some(I=>I.name===B.name)&&_e(r,B.cost));let o,O="build";if(u.length>0)o=ls({...r,hand:u}),O="build";else{if(r.wonderStagesBuilt<r.wonder.stages.length){const B=r.wonder.stages[r.wonderStagesBuilt];_e(r,B.cost)&&(o=r.hand[0],O="wonder")}!o&&r.hand.length>0&&(o=r.hand[0],O="sell")}if(o){const B=r.hand.findIndex(I=>I.id===o.id);if(B>=0){if(r.hand.splice(B,1),console.log("picked",o.name,"to",O,"for bot",r.name),O==="build")ct(r,o);else if(O==="sell")r.coins+=3;else if(O==="wonder"){const I=r.wonder.stages[r.wonderStagesBuilt];r.wonderStagesBuilt++;const k=I.effect;lt(r,k,I.cost)}}}}const C=n.players.map(f=>f.hand),V=[C[C.length-1],...C.slice(0,C.length-1)];for(let f=0;f<n.players.length;f++)n.players[f].hand=V[f],console.log(n.players[f].name,"s hand:",n.players[f].hand);return n.players.some(f=>f.hand.length>0)?!a(L).startsWith("You already built")&&!a(L).startsWith("You don't have enough resources")&&me(L,"Turn resolved. Next pick."):(vs(n),n.age<3?(n.age++,cs(n),me(L,`End of Age ${n.age-1} finished. Scores updated. Age ${n.age} begins!`)):me(L,"Game over!")),{...n,players:n.players.map(f=>({...f,hand:[...f.hand],built:[...f.built]}))}})}Ct();var T=ce(),Q=ae(T);{var F=l=>{var _=fr(),n=h(ae(_),2);{var m=u=>{var o=Fs();D(()=>{E(o,"src",p[c().age]),E(o,"alt","Age "+c().age)}),y(u,o)};N(n,u=>{p[c().age]&&u(m)})}var C=h(n,2),V=b(C,!0);g(C);var G=h(C,2),f=b(G);z(f,5,()=>c().players,W,(u,o,O)=>{var B=tr();je(B,1,"player-summary svelte-1up3v05",null,{},{current:O===0});var I=b(B),k=b(I);{var ie=P=>{var w=Ys();D(()=>{E(w,"src",v[a(o).wonder.id]),E(w,"alt",a(o).wonder.name),E(w,"title",a(o).wonder.name)}),y(P,w)};N(k,P=>{a(o).wonder&&a(o).wonder.id&&v[a(o).wonder.id]&&P(ie)})}var X=h(k,2),K=b(X,!0);g(X);var j=h(X,2),le=b(j);z(le,5,()=>a(o).wonder.stages,W,(P,w,re)=>{var Y=Zs(),H=b(Y);H.textContent=`Stage ${re+1}`;var M=h(H,2),ue=h(b(M));{var ge=R=>{var $=ce(),Pe=ae($);z(Pe,1,()=>Object.entries(a(w).cost),W,(Me,Ne)=>{var Ce=Be(()=>Se(a(Ne),2));let He=()=>a(Ce)[0],Ve=()=>a(Ce)[1];var de=Ws(),Ge=b(de);g(de),D(()=>q(Ge,`${Ve()??""} ${He()??""}`)),y(Me,de)}),y(R,$)},Ie=R=>{var $=zs();y(R,$)};N(ue,R=>{a(w).cost?R(ge):R(Ie,!1)})}g(M);var he=h(M,2),Xe=h(b(he));{var _t=R=>{var $=We();D(()=>q($,`+${a(w).effect.points??""} Points`)),y(R,$)};N(Xe,R=>{a(w).effect.points&&R(_t)})}var Ke=h(Xe,2);{var wt=R=>{var $=We();D(()=>q($,`+${a(w).effect.coins??""} Coins`)),y(R,$)};N(Ke,R=>{a(w).effect.coins&&R(wt)})}var et=h(Ke,2);{var bt=R=>{var $=We();D(()=>q($,`+${a(w).effect.military??""} Military`)),y(R,$)};N(et,R=>{a(w).effect.military&&R(bt)})}var tt=h(et,2);{var Rt=R=>{var $=ce(),Pe=ae($);z(Pe,1,()=>Object.entries(a(w).effect.resources),W,(Me,Ne)=>{var Ce=Be(()=>Se(a(Ne),2));let He=()=>a(Ce)[0],Ve=()=>a(Ce)[1];var de=Qs(),Ge=b(de);g(de),D(()=>q(Ge,`${Ve()??""} ${He()??""}`)),y(Me,de)}),y(R,$)};N(tt,R=>{a(w).effect.resources&&R(Rt)})}var Lt=h(tt,2);{var At=R=>{var $=js();y(R,$)};N(Lt,R=>{!a(w).effect.points&&!a(w).effect.coins&&!a(w).effect.military&&!a(w).effect.resources&&R(At)})}g(he),g(Y),D(()=>je(Y,1,`stage ${re<a(o).wonderStagesBuilt?"built":""}`,"svelte-1up3v05")),y(P,Y)}),g(le),g(j),g(I);var pe=h(I,2),ye=b(pe),we=b(ye),be=b(we),Ee=h(be,2),$e=b(Ee,!0);g(Ee),g(we);var Re=h(we,2),Le=b(Re),Ae=h(Le,2),Ue=b(Ae,!0);g(Ae),g(Re);var Oe=h(Re,2),A=b(Oe),S=h(A,2),fe=b(S,!0);g(S),g(Oe),g(ye);var ee=h(ye,4);z(ee,5,()=>Object.entries(a(o).resources),W,(P,w)=>{var re=Be(()=>Se(a(w),2));let Y=()=>a(re)[0],H=()=>a(re)[1];var M=Js(),ue=b(M),ge=h(ue,2),Ie=b(ge,!0);g(ge),g(M),D(()=>{E(ue,"src",d[Y()]),E(ue,"alt",Y()),q(Ie,H())}),y(P,M)}),g(ee);var ve=h(ee,4),te=b(ve);{var ne=P=>{var w=Xs();y(P,w)},se=P=>{var w=er();z(w,5,()=>a(o).built,W,(re,Y)=>{var H=Ks(),M=b(H,!0);g(H),D(()=>q(M,a(Y).name)),y(re,H)}),g(w),y(P,w)};N(te,P=>{a(o).built.length===0?P(ne):P(se,!1)})}g(ve),g(pe),g(B),D(()=>{q(K,a(o).wonder?.name),E(be,"src",d.coin),q($e,a(o).coins),E(Le,"src",d.military),q(Ue,a(o).military),E(A,"src",d.victory),q(fe,a(o).score)}),y(u,B)}),g(f);var r=h(f,2);z(r,5,()=>c().players[0].hand,W,(u,o)=>{var O=lr(),B=b(O),I=b(B,!0);g(B);var k=h(B,4),ie=b(k);{var X=A=>{var S=ce(),fe=ae(S);z(fe,1,()=>Object.entries(a(o).cost),W,(ee,ve)=>{var te=Be(()=>Se(a(ve),2));let ne=()=>a(te)[0],se=()=>a(te)[1];var P=ce(),w=ae(P);{var re=H=>{var M=sr();D(()=>{E(M,"src",d["coin"+se()]),E(M,"alt","coin"+se())}),y(H,M)},Y=H=>{var M=ce(),ue=ae(M);z(ue,1,()=>Array(se()),W,(ge,Ie)=>{var he=rr();D(()=>{E(he,"src",d[ne()]),E(he,"alt",ne())}),y(ge,he)}),y(H,M)};N(w,H=>{ne()==="coins"?H(re):H(Y,!1)})}y(ee,P)}),y(A,S)},K=A=>{var S=ar();y(A,S)};N(ie,A=>{a(o).cost&&Object.keys(a(o).cost).length>0?A(X):A(K,!1)})}g(k);var j=h(k,4),le=b(j);{var pe=A=>{var S=ce(),fe=ae(S);z(fe,1,()=>Object.entries(a(o).effect.resources),W,(ee,ve)=>{var te=Be(()=>Se(a(ve),2));let ne=()=>a(te)[0];var se=or();D(()=>{E(se,"src",d[ne()]),E(se,"alt",ne())}),y(ee,se)}),y(A,S)};N(le,A=>{a(o).effect.resources&&A(pe)})}var ye=h(le,2);{var we=A=>{var S=ir();D(()=>{E(S,"src",d["coin"+a(o).effect.coins]),E(S,"alt","coin"+a(o).effect.coins)}),y(A,S)};N(ye,A=>{a(o).effect.coins&&A(we)})}var be=h(ye,2);{var Ee=A=>{var S=ce(),fe=ae(S);z(fe,1,()=>Array(a(o).effect.military),W,(ee,ve)=>{var te=nr();D(()=>E(te,"src",d.military)),y(ee,te)}),y(A,S)};N(be,A=>{a(o).effect.military&&A(Ee)})}var $e=h(be,2);{var Re=A=>{var S=cr();D(()=>{E(S,"src",d["victory"+a(o).effect.points]),E(S,"alt","victory"+a(o).effect.points)}),y(A,S)};N($e,A=>{a(o).effect.points&&A(Re)})}g(j);var Le=h(j,2),Ae=b(Le),Ue=h(Ae,2),Oe=h(Ue,2);g(Le),g(O),D(()=>{je(O,1,`card-buttons card-type-${a(o).type??""}`,"svelte-1up3v05"),q(I,a(o).name)}),ze("click",Ae,()=>U(a(o),"build")),ze("click",Ue,()=>U(a(o),"sell")),ze("click",Oe,()=>U(a(o),"wonder")),y(u,O)}),g(r),g(G),D(()=>q(V,a(L))),y(l,_)},J=l=>{var _=vr();y(l,_)};N(Q,l=>{c()?l(F):l(J,!1)})}y(s,T),zt(),i()}export{_r as component,hr as universal};
