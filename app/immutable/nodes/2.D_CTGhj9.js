import"../chunks/DsnmJJEf.js";import{i as Es}from"../chunks/pXw9F0qr.js";import{G as Qe,o as ce,A as Ss,J as ys,p as Os,n as ks,S as a,ax as Is,D as Ts,H as $s,F as cs,I as Je,z as Be,af as Ds,aj as Ms,w as ts,M as Ps,K as Ns,an as gs,i as Hs,R as rs,aJ as ls,aK as fs,O as hs,P as Vs,aL as Pe,aM as Ze,y as _s,aN as Ne,aO as qs,ah as Fs,aP as Gs,am as Ys,aQ as Ws,ac as js,aR as ws,ad as zs,aS as Qs,$ as Js,a8 as ne,a1 as K,a3 as p,a4 as Zs,a0 as S,a7 as R,a5 as C,a6 as g,a2 as $,aI as Xe,aH as Ue,aT as Ee,T as fe}from"../chunks/DEaZTocB.js";import{w as Xs,a as W,e as Ke}from"../chunks/wIxpBGLN.js";import{i as N,s as Ks,a as et}from"../chunks/B6mUW0Rw.js";import{s as I}from"../chunks/C0WV71g0.js";function J(t,e){return e}function st(t,e,s){for(var i=t.items,l=[],n=e.length,d=0;d<n;d++)Gs(e[d].e,l,!0);var m=n>0&&l.length===0&&s!==null;if(m){var A=s.parentNode;Ys(A),A.append(s),i.clear(),ee(t,e[0].prev,e[n-1].next)}Ws(l,()=>{for(var L=0;L<n;L++){var h=e[L];m||(i.delete(h.k),ee(t,h.prev,h.next)),_s(h.e,!m)}})}function Z(t,e,s,i,l,n=null){var d=t,m={flags:e,items:new Map,first:null},A=(e&ws)!==0;if(A){var L=t;d=ce?Qe(Ss(L)):L.appendChild(ys())}ce&&Os();var h=null,H=!1,q=new Map,se=Is(()=>{var f=s();return Hs(f)?f:f==null?[]:gs(f)}),y,v;function _(){tt(v,y,m,q,d,l,e,i,s),n!==null&&(y.length===0?h?hs(h):h=ts(()=>n(d)):h!==null&&Vs(h,()=>{h=null}))}ks(()=>{v??=js,y=a(se);var f=y.length;if(H&&f===0)return;H=f===0;let w=!1;if(ce){var D=Ts(d)===$s;D!==(f===0)&&(d=cs(),Qe(d),Je(!1),w=!0)}if(ce){for(var j=null,T,r=0;r<f;r++){if(Be.nodeType===Ds&&Be.data===Ms){d=Be,w=!0,Je(!1);break}var o=y[r],x=i(o,r);T=as(Be,m,j,null,o,x,r,l,e,s),m.items.set(x,T),j=T}f>0&&Qe(cs())}if(ce)f===0&&n&&(h=ts(()=>n(d)));else if(Ps()){var c=new Set,M=Ns;for(r=0;r<f;r+=1){o=y[r],x=i(o,r);var E=m.items.get(x)??q.get(x);E?(e&(Ne|Pe))!==0&&bs(E,o,r,e):(T=as(null,m,null,null,o,x,r,l,e,s,!0),q.set(x,T)),c.add(x)}for(const[k,z]of m.items)c.has(k)||M.skipped_effects.add(z.e);M.add_callback(_)}else _();w&&Je(!0),a(se)}),ce&&(d=Be)}function tt(t,e,s,i,l,n,d,m,A){var L=(d&Qs)!==0,h=(d&(Ne|Pe))!==0,H=e.length,q=s.items,se=s.first,y=se,v,_=null,f,w=[],D=[],j,T,r,o;if(L)for(o=0;o<H;o+=1)j=e[o],T=m(j,o),r=q.get(T),r!==void 0&&(r.a?.measure(),(f??=new Set).add(r));for(o=0;o<H;o+=1){if(j=e[o],T=m(j,o),r=q.get(T),r===void 0){var x=i.get(T);if(x!==void 0){i.delete(T),q.set(T,x);var c=_?_.next:y;ee(s,_,x),ee(s,x,c),es(x,c,l),_=x}else{var M=y?y.e.nodes_start:l;_=as(M,s,_,_===null?s.first:_.next,j,T,o,n,d,A)}q.set(T,_),w=[],D=[],y=_.next;continue}if(h&&bs(r,j,o,d),(r.e.f&Ze)!==0&&(hs(r.e),L&&(r.a?.unfix(),(f??=new Set).delete(r))),r!==y){if(v!==void 0&&v.has(r)){if(w.length<D.length){var E=D[0],k;_=E.prev;var z=w[0],le=w[w.length-1];for(k=0;k<w.length;k+=1)es(w[k],E,l);for(k=0;k<D.length;k+=1)v.delete(D[k]);ee(s,z.prev,le.next),ee(s,_,z),ee(s,le,E),y=E,_=le,o-=1,w=[],D=[]}else v.delete(r),es(r,y,l),ee(s,r.prev,r.next),ee(s,r,_===null?s.first:_.next),ee(s,_,r),_=r;continue}for(w=[],D=[];y!==null&&y.k!==T;)(y.e.f&Ze)===0&&(v??=new Set).add(y),D.push(y),y=y.next;if(y===null)continue;r=y}w.push(r),_=r,y=r.next}if(y!==null||v!==void 0){for(var X=v===void 0?[]:gs(v);y!==null;)(y.e.f&Ze)===0&&X.push(y),y=y.next;var te=X.length;if(te>0){var ge=(d&ws)!==0&&H===0?l:null;if(L){for(o=0;o<te;o+=1)X[o].a?.measure();for(o=0;o<te;o+=1)X[o].a?.fix()}st(s,X,ge)}}L&&zs(()=>{if(f!==void 0)for(r of f)r.a?.apply()}),t.first=s.first&&s.first.e,t.last=_&&_.e;for(var ue of i.values())_s(ue.e);i.clear()}function bs(t,e,s,i){(i&Ne)!==0&&fs(t.v,e),(i&Pe)!==0?fs(t.i,s):t.i=s}function as(t,e,s,i,l,n,d,m,A,L,h){var H=(A&Ne)!==0,q=(A&qs)===0,se=H?q?rs(l,!1,!1):ls(l):l,y=(A&Pe)===0?d:ls(d),v={i:y,v:se,k:n,a:null,e:null,prev:s,next:i};try{if(t===null){var _=document.createDocumentFragment();_.append(t=ys())}return v.e=ts(()=>m(t,se,y,L),ce),v.e.prev=s&&s.e,v.e.next=i&&i.e,s===null?h||(e.first=v):(s.next=v,s.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function es(t,e,s){for(var i=t.next?t.next.e.nodes_start:s,l=e?e.e.nodes_start:s,n=t.e.nodes_start;n!==null&&n!==i;){var d=Fs(n);l.before(n),n=d}}function ee(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}const ds=[...` 	
\r\f \v\uFEFF`];function rt(t,e,s){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),s){for(var l in s)if(s[l])i=i?i+" "+l:l;else if(i.length)for(var n=l.length,d=0;(d=i.indexOf(l,d))>=0;){var m=d+n;(d===0||ds.includes(i[d-1]))&&(m===i.length||ds.includes(i[m]))?i=(d===0?"":i.substring(0,d))+i.substring(m+1):d=m}}return i===""?null:i}function ss(t,e,s,i,l,n){var d=t.__className;if(ce||d!==s||d===void 0){var m=rt(s,i,n);(!ce||m!==t.getAttribute("class"))&&(m==null?t.removeAttribute("class"):t.className=m),t.__className=s}else if(n&&l!==n)for(var A in n){var L=!!n[A];(l==null||L!==!!l[A])&&t.classList.toggle(A,L)}return n}const at=!1,ot=!0,Ur=Object.freeze(Object.defineProperty({__proto__:null,prerender:ot,ssr:at},Symbol.toStringTag,{value:"Module"})),it=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]},{id:8,name:"Uppsala Cathedral",baseResource:"clay",stages:[{cost:{stone:2},effect:{coins:3}},{cost:{papyrus:2},effect:{points:5}},{cost:{clay:2,ore:1},effect:{points:7}}]},{id:9,name:"Lindvalls Coffee",baseResource:"coffee",stages:[{cost:{clay:2},effect:{resources:{coffee:1}}},{cost:{glass:2},effect:{resources:{coffee:1}}},{cost:{stone:2},effect:{resources:{coffee:1}}}]}];function os(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Timber Yard",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pit",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Excavation",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Mercenary Camp",type:"military",temporary:!0,cost:{coins:1},effect:{military:1}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Mine",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}}]}function Rs(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},altcost:10,effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Free Company",type:"military",temporary:!0,cost:{coins:5},effect:{military:3}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},altcost:11,effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Roastery",type:"resource",cost:{clay:2},effect:{resources:{coffee:1}}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Spice Market",type:"resource",cost:{wood:1,cloth:1},effect:{resources:{spice:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function Ls(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:3},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:3},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:3},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:5}},{id:57,name:"Supply Yard",type:"resource",cost:{stone:1,coins:5},effect:{resources:{wood:1,ore:1,clay:1}}},{id:58,name:"Lighthouse",type:"commerce",cost:{stone:1,glass:1},effect:{coins:4}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:5}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:5}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{coffee:1,spice:1,cloth:1},effect:{coins:5,points:8}}]}function Me(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,s)=>e.sort-s.sort).map(({value:e})=>e)}function nt(t){return it.map(s=>({w:s,sort:Math.random()})).sort((s,i)=>s.sort-i.sort).map(({w:s})=>s).slice(0,t)}function ct(t,e){return{name:t,coins:3,military:0,score:0,resources:{[e.baseResource]:1},hand:[],built:[],wonder:e,wonderStagesBuilt:0}}function lt(){const t=["You","Bot A","Bot B"],e=nt(t.length),s=t.map((l,n)=>ct(l,e[n])),i=Me(os());for(let l=0;l<s.length;l++)s[l].hand=i.splice(0,7);return{players:s,discard:[],age:1}}function ft(t){let e;t.age===2?e=Me(Rs()):t.age===3?e=Me(Ls()):e=Me(os());for(let s=0;s<t.players.length;s++)t.players[s].hand=e.splice(0,7)}const ms=Xs(lt());function dt(t){if(t.hand.length!==0)return t.hand.reduce((e,s)=>{const i=vs(e);return vs(s)>i?s:e})}function vs(t){return t.effect.resources?Object.values(t.effect.resources).reduce((e,s)=>e+(s??0),0):0}function Cs(t,e){if(e){if(e.resources)for(const[s,i]of Object.entries(e.resources)){const l=i??0;t.resources[s]=(t.resources[s]||0)+l}typeof e.coins=="number"&&(t.coins=(t.coins||0)+e.coins),typeof e.military=="number"&&(t.military=(t.military||0)+e.military),typeof e.points=="number"&&(t.score=(t.score||0)+e.points)}}function mt(t,e){e&&e.coins&&e.coins>0&&(t.coins=(t.coins||0)-e.coins)}function ye(t,e,s){if(!e||t.built.some(i=>i.id===s))return!0;if(e.coins&&(t.coins||0)<e.coins)return!1;for(const[i,l]of Object.entries(e))if(i!=="coins"&&(t.resources[i]||0)<(l||0))return!1;return!0}function us(t,e){if(!ye(t,e.cost,e.altcost)){console.warn(`${t.name} cannot afford ${e.name}`);return}mt(t,e.cost),Cs(t,e.effect),t.built.push(e)}function ps(t,e,s){if(!ye(t,s)){console.warn(`${t.name} cannot afford this wonder stage`);return}Cs(t,e)}function vt(t){const e=t.players,s=e.length;let i=0;switch(t.age){case 1:i=1;break;case 2:i=3;break;case 3:i=5;break;default:i=0}for(let l=0;l<s;l++){const n=e[l],d=e[(l+1)%s],m=e[(l-1+s)%s];(n.military||0)>(d.military||0)?n.score+=i:(n.military||0)<(d.military||0)&&(n.score-=1),(n.military||0)>(m.military||0)?n.score+=i:(n.military||0)<(m.military||0)&&(n.score-=1);const A=n.resources.coffee||0;n.score+=A,n.built=n.built.filter(L=>!L.temporary),n.resources={[n.wonder.baseResource]:1},n.military=n.built.reduce((L,h)=>L+(h.effect.military||0),0);for(const L of n.built)if(L.effect.resources)for(const[h,H]of Object.entries(L.effect.resources))n.resources[h]=(n.resources[h]||0)+(H||0);for(let L=0;L<n.wonderStagesBuilt;L++){const h=n.wonder.stages[L].effect;if(h.military&&(n.military+=h.military),h.points&&(n.score+=h.points),h.coins&&(n.coins+=h.coins),h.resources)for(const[H,q]of Object.entries(h.resources))n.resources[H]=(n.resources[H]||0)+q}}}const ut=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,pt=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,yt=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,gt=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,ht=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,_t=""+new URL("../assets/coffee.BEH_fvhj.png",import.meta.url).href,wt=""+new URL("../assets/spice.CE-eP-kd.png",import.meta.url).href,bt=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,Rt=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,Lt=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,Ct=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,xt=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,At=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,Bt=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,Ut=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,Et=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,St=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,Ot=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,kt=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,It=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,Tt=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,$t=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,Dt=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,Mt=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,Pt=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Nt=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,Ht=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Vt=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,qt=""+new URL("../assets/uppsala.DzCzligB.png",import.meta.url).href,Ft=""+new URL("../assets/lindvalls.JVtzja-w.png",import.meta.url).href,Gt=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Yt=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Wt=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,jt=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,zt=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,Qt=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href,Jt=[...os(),...Rs(),...Ls()];function Zt(t){return Jt.find(e=>e.id===t)?.name}var Xt=S('<img class="age-image svelte-dm8431" width="120" height="120"/>'),Kt=S('<img class="svelte-dm8431"/>'),er=S('<span class="resource svelte-dm8431"> </span>'),sr=S("<em>Free</em>"),tr=S('<span class="resource svelte-dm8431"> </span>'),rr=S("<em>Special</em>"),ar=S('<div><div class="stage-index svelte-dm8431"></div> <div class="stage-cost svelte-dm8431">Cost: <!></div> <div class="stage-effect svelte-dm8431">Effect: <!> <!> <!> <!> <!></div></div>'),or=S('<div class="resource svelte-dm8431"><img class="svelte-dm8431"/> <span> </span></div>'),ir=S("<em>None</em>"),nr=S("<li> </li>"),cr=S("<ul></ul>"),lr=S('<div><div class="wonder svelte-dm8431"><!> <div class="wonder-name svelte-dm8431"> </div> <div class="wonder-progress svelte-dm8431"><div class="stages svelte-dm8431"></div></div></div> <div class="player-info svelte-dm8431"><div class="stats svelte-dm8431"><div class="resource svelte-dm8431"><img alt="coin" class="svelte-dm8431"/> <span> </span></div> <div class="resource svelte-dm8431"><img alt="military" class="svelte-dm8431"/> <span> </span></div> <div class="resource svelte-dm8431"><img alt="score" class="svelte-dm8431"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-dm8431"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>'),fr=S('<p class="card-temporary svelte-dm8431">Temporary, removed after end of age</p>'),dr=S('<img class="svelte-dm8431"/>'),mr=S('<img class="svelte-dm8431"/>'),vr=S("<em>Free</em>"),ur=S('<p class="svelte-dm8431"> </p>'),pr=S('<img class="svelte-dm8431"/>'),yr=S('<img class="svelte-dm8431"/>'),gr=S('<img alt="military" class="svelte-dm8431"/>'),hr=S('<img class="svelte-dm8431"/>'),_r=S('<div><h2> </h2> <!> <h4>Cost</h4> <div class="card-cost svelte-dm8431"><!></div> <div class="card-altcost svelte-dm8431"><!></div> <h4>Production</h4> <div class="card-effect svelte-dm8431"><!> <!> <!> <!></div> <div class="card-actions svelte-dm8431"><button class="svelte-dm8431"><strong>Build</strong></button> <button class="svelte-dm8431"><strong>Sell</strong></button> <button class="svelte-dm8431"><strong>Wonder</strong></button></div></div>'),wr=S('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-dm8431"> </p> <div class="game-container svelte-dm8431"><div class="player-list svelte-dm8431"></div> <div class="cards-container svelte-dm8431"></div></div>',1),br=S("<p>Loading game...</p>");function Er(t,e){Js(e,!1);const[s,i]=Ks(),l=()=>et(ms,"$game",s),n={1:jt,2:zt,3:Qt},d={1:Pt,2:Nt,3:Ht,4:Vt,5:Gt,6:Yt,7:Wt,8:qt,9:Ft},m={coffee:_t,wood:pt,stone:yt,ore:gt,clay:ht,glass:ut,cloth:bt,papyrus:Rt,military:Lt,coin:Ct,coin1:xt,coin3:At,coin4:Bt,coin5:Ut,spice:wt,victory:Et,victory1:St,victory2:Ot,victory3:kt,victory4:It,victory5:Tt,victory6:$t,victory7:Dt,victory8:Mt};let A=rs("Game started — Age I"),L=rs([]);function h(v,_){ms.update(f=>{const w=f.players[0];if(_==="build"){if(w.built.some(o=>o.name===v.name))return fe(A,`You already built "${v.name}", pick another card.`),f;if(!ye(w,v.cost,v.altcost))return fe(A,`You don't have enough resources to build "${v.name}". Pick another card.`),f;const r=w.hand.findIndex(o=>o.id===v.id);if(r<0)return f;w.hand.splice(r,1),us(w,v)}else if(_==="sell"){const r=w.hand.findIndex(o=>o.id===v.id);if(r<0)return f;w.hand.splice(r,1),w.coins+=3}else if(_==="wonder")if(w.wonderStagesBuilt<w.wonder.stages.length){const r=w.wonder.stages[w.wonderStagesBuilt];if(!ye(w,r.cost))return fe(A,"You don't have enough resources to build this wonder stage!"),f;const o=w.hand.findIndex(c=>c.id===v.id);if(o<0)return f;w.hand.splice(o,1),w.wonderStagesBuilt++;const x=r.effect;ps(w,x,r.cost)}else return fe(A,"Your wonder is already complete!"),f;for(let r=1;r<f.players.length;r++){const o=f.players[r],x=o.hand.filter(E=>!o.built.some(k=>k.name===E.name)&&ye(o,E.cost));let c,M="build";if(x.length>0)c=dt({...o,hand:x}),M="build";else{if(o.wonderStagesBuilt<o.wonder.stages.length){const E=o.wonder.stages[o.wonderStagesBuilt];ye(o,E.cost)&&(c=o.hand[0],M="wonder")}!c&&o.hand.length>0&&(c=o.hand[0],M="sell")}if(c){const E=o.hand.findIndex(k=>k.id===c.id);if(E>=0){if(o.hand.splice(E,1),console.log("picked",c.name,"to",M,"for bot",o.name),M==="build")us(o,c);else if(M==="sell")o.coins+=3;else if(M==="wonder"){const k=o.wonder.stages[o.wonderStagesBuilt];o.wonderStagesBuilt++;const z=k.effect;ps(o,z,k.cost)}}}}const D=f.players.map(r=>r.hand),j=[D[D.length-1],...D.slice(0,D.length-1)];for(let r=0;r<f.players.length;r++)f.players[r].hand=j[r],console.log(f.players[r].name,"s hand:",f.players[r].hand);if(f.players.some(r=>r.hand.length>0))!a(A).startsWith("You already built")&&!a(A).startsWith("You don't have enough resources")&&fe(A,"Turn resolved. Next pick.");else if(vt(f),f.age<3)f.age++,ft(f),fe(A,`End of Age ${f.age-1} finished. Scores updated. Age ${f.age} begins!`);else{const r=Math.max(...f.players.map(o=>o.score));fe(L,f.players.filter(o=>o.score===r)),fe(A,`Game over! ${a(L).map(o=>o.wonder.name).join(", ")} won with ${r} points!`),console.log("Final scores:",f.players.map(o=>({name:o.name,score:o.score}))),console.log("Winners:",a(L))}return{...f,players:f.players.map(r=>({...r,hand:[...r.hand],built:[...r.built]}))}})}Es();var H=ne(),q=K(H);{var se=v=>{var _=wr(),f=R(K(_),2);{var w=x=>{var c=Xt();$(()=>{I(c,"src",n[l().age]),I(c,"alt","Age "+l().age)}),p(x,c)};N(f,x=>{n[l().age]&&x(w)})}var D=R(f,2),j=C(D,!0);g(D);var T=R(D,2),r=C(T);Z(r,5,()=>l().players,J,(x,c,M)=>{var E=lr();let k;var z=C(E),le=C(z);{var X=O=>{var u=Kt();$(()=>{I(u,"src",d[a(c).wonder.id]),I(u,"alt",a(c).wonder.name),I(u,"title",a(c).wonder.name)}),p(O,u)};N(le,O=>{a(c).wonder&&a(c).wonder.id&&d[a(c).wonder.id]&&O(X)})}var te=R(le,2),ge=C(te,!0);g(te);var ue=R(te,2),pe=C(ue);Z(pe,5,()=>a(c).wonder.stages,J,(O,u,F)=>{var V=ar(),G=C(V);G.textContent=`Stage ${F+1}`;var Q=R(G,2),oe=R(C(Q));{var me=U=>{var P=ne(),Fe=K(P);Z(Fe,1,()=>Object.entries(a(u).cost),J,(Ge,Ye)=>{var Ae=Ue(()=>Ee(a(Ye),2));let We=()=>a(Ae)[0],je=()=>a(Ae)[1];var ve=er(),ze=C(ve);g(ve),$(()=>W(ze,`${je()??""} ${We()??""}`)),p(Ge,ve)}),p(U,P)},Y=U=>{var P=sr();p(U,P)};N(oe,U=>{a(u).cost?U(me):U(Y,!1)})}g(Q);var ie=R(Q,2),De=R(C(ie));{var Ve=U=>{var P=Xe();$(()=>W(P,`+${a(u).effect.points??""} Points`)),p(U,P)};N(De,U=>{a(u).effect.points&&U(Ve)})}var qe=R(De,2);{var xe=U=>{var P=Xe();$(()=>W(P,`+${a(u).effect.coins??""} Coins`)),p(U,P)};N(qe,U=>{a(u).effect.coins&&U(xe)})}var is=R(qe,2);{var xs=U=>{var P=Xe();$(()=>W(P,`+${a(u).effect.military??""} Military`)),p(U,P)};N(is,U=>{a(u).effect.military&&U(xs)})}var ns=R(is,2);{var As=U=>{var P=ne(),Fe=K(P);Z(Fe,1,()=>Object.entries(a(u).effect.resources),J,(Ge,Ye)=>{var Ae=Ue(()=>Ee(a(Ye),2));let We=()=>a(Ae)[0],je=()=>a(Ae)[1];var ve=tr(),ze=C(ve);g(ve),$(()=>W(ze,`${je()??""} ${We()??""}`)),p(Ge,ve)}),p(U,P)};N(ns,U=>{a(u).effect.resources&&U(As)})}var Bs=R(ns,2);{var Us=U=>{var P=rr();p(U,P)};N(Bs,U=>{!a(u).effect.points&&!a(u).effect.coins&&!a(u).effect.military&&!a(u).effect.resources&&U(Us)})}g(ie),g(V),$(()=>ss(V,1,`stage ${F<a(c).wonderStagesBuilt?"built":""}`,"svelte-dm8431")),p(O,V)}),g(pe),g(ue),g(z);var Se=R(z,2),he=C(Se),de=C(he),_e=C(de),Oe=R(_e,2),ke=C(Oe,!0);g(Oe),g(de);var we=R(de,2),be=C(we),Ie=R(be,2),He=C(Ie,!0);g(Ie),g(we);var Te=R(we,2),Re=C(Te),Le=R(Re,2),$e=C(Le,!0);g(Le),g(Te),g(he);var Ce=R(he,4);Z(Ce,5,()=>Object.entries(a(c).resources),J,(O,u)=>{var F=Ue(()=>Ee(a(u),2));let V=()=>a(F)[0],G=()=>a(F)[1];var Q=or(),oe=C(Q),me=R(oe,2),Y=C(me,!0);g(me),g(Q),$(()=>{I(oe,"src",m[V()]),I(oe,"alt",V()),W(Y,G())}),p(O,Q)}),g(Ce);var b=R(Ce,4),B=C(b);{var re=O=>{var u=ir();p(O,u)},ae=O=>{var u=cr();Z(u,5,()=>a(c).built,J,(F,V)=>{var G=nr(),Q=C(G,!0);g(G),$(()=>W(Q,a(V).name)),p(F,G)}),g(u),p(O,u)};N(B,O=>{a(c).built.length===0?O(re):O(ae,!1)})}g(b),g(Se),g(E),$(O=>{k=ss(E,1,"player-summary svelte-dm8431",null,k,O),W(ge,a(c).wonder?.name),I(_e,"src",m.coin),W(ke,a(c).coins),I(be,"src",m.military),W(He,a(c).military),I(Re,"src",m.victory),W($e,a(c).score)},[()=>({current:M===0,winner:a(L).some(O=>O.name===a(c).name)})]),p(x,E)}),g(r);var o=R(r,2);Z(o,5,()=>l().players[0].hand,J,(x,c)=>{var M=_r(),E=C(M),k=C(E,!0);g(E);var z=R(E,2);{var le=b=>{var B=fr();p(b,B)};N(z,b=>{a(c).temporary&&b(le)})}var X=R(z,4),te=C(X);{var ge=b=>{var B=ne(),re=K(B);Z(re,1,()=>Object.entries(a(c).cost),J,(ae,O)=>{var u=Ue(()=>Ee(a(O),2));let F=()=>a(u)[0],V=()=>a(u)[1];var G=ne(),Q=K(G);{var oe=Y=>{var ie=dr();$(()=>{I(ie,"src",m["coin"+V()]),I(ie,"alt","coin"+V())}),p(Y,ie)},me=Y=>{var ie=ne(),De=K(ie);Z(De,1,()=>Array(V()),J,(Ve,qe)=>{var xe=mr();$(()=>{I(xe,"src",m[F()]),I(xe,"alt",F())}),p(Ve,xe)}),p(Y,ie)};N(Q,Y=>{F()==="coins"?Y(oe):Y(me,!1)})}p(ae,G)}),p(b,B)},ue=b=>{var B=vr();p(b,B)};N(te,b=>{a(c).cost&&Object.keys(a(c).cost).length>0?b(ge):b(ue,!1)})}g(X);var pe=R(X,2),Se=C(pe);{var he=b=>{var B=ur(),re=C(B,!0);g(B),$(ae=>W(re,ae),[()=>Zt(a(c).altcost)]),p(b,B)};N(Se,b=>{a(c).altcost&&b(he)})}g(pe);var de=R(pe,4),_e=C(de);{var Oe=b=>{var B=ne(),re=K(B);Z(re,1,()=>Object.entries(a(c).effect.resources),J,(ae,O)=>{var u=Ue(()=>Ee(a(O),2));let F=()=>a(u)[0],V=()=>a(u)[1];var G=ne(),Q=K(G);Z(Q,1,()=>Array(V()),J,(oe,me)=>{var Y=pr();$(()=>{I(Y,"src",m[F()]),I(Y,"alt",F())}),p(oe,Y)}),p(ae,G)}),p(b,B)};N(_e,b=>{a(c).effect.resources&&b(Oe)})}var ke=R(_e,2);{var we=b=>{var B=yr();$(()=>{I(B,"src",m["coin"+a(c).effect.coins]),I(B,"alt","coin"+a(c).effect.coins)}),p(b,B)};N(ke,b=>{a(c).effect.coins&&b(we)})}var be=R(ke,2);{var Ie=b=>{var B=ne(),re=K(B);Z(re,1,()=>Array(a(c).effect.military),J,(ae,O)=>{var u=gr();$(()=>I(u,"src",m.military)),p(ae,u)}),p(b,B)};N(be,b=>{a(c).effect.military&&b(Ie)})}var He=R(be,2);{var Te=b=>{var B=hr();$(()=>{I(B,"src",m["victory"+a(c).effect.points]),I(B,"alt","victory"+a(c).effect.points)}),p(b,B)};N(He,b=>{a(c).effect.points&&b(Te)})}g(de);var Re=R(de,2),Le=C(Re),$e=R(Le,2),Ce=R($e,2);g(Re),g(M),$(()=>{ss(M,1,`card-buttons card-type-${a(c).type??""}`,"svelte-dm8431"),W(k,a(c).name)}),Ke("click",Le,()=>h(a(c),"build")),Ke("click",$e,()=>h(a(c),"sell")),Ke("click",Ce,()=>h(a(c),"wonder")),p(x,M)}),g(o),g(T),$(()=>W(j,a(A))),p(v,_)},y=v=>{var _=br();p(v,_)};N(q,v=>{l()?v(se):v(y,!1)})}p(t,H),Zs(),i()}export{Er as component,Ur as universal};
