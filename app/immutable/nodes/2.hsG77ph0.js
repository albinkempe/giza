import"../chunks/DsnmJJEf.js";import{i as he}from"../chunks/G8IXx4_o.js";import{A as Le,h as ie,af as et,C as Fe,x as tt,w as rt,f as m,W as st,y as at,H as ot,z as Ie,B as Ce,K as de,ag as it,ak as nt,D as Ue,G as ct,F as lt,ao as Ye,ac as ft,Q as qe,aJ as De,aK as Te,I as ze,J as dt,aL as _e,aM as Ae,aN as je,aO as we,aP as ut,ai as mt,aQ as vt,an as pt,aR as yt,Z as gt,aS as Qe,ad as ht,aT as _t,p as be,l as I,q as O,d as c,i as v,v as q,s as L,t as N,n as h,o as Re,a6 as te,m as K,aH as me,aU as ve,R as Me}from"../chunks/LRZBNtRS.js";import{w as wt,s as ne,c as bt,e as Se}from"../chunks/nlGExX9J.js";import{p as ue,i as H,s as Rt,a as kt}from"../chunks/WwQO-R3r.js";import{s as A}from"../chunks/DEv96aKz.js";function Z(a,t){return t}function Lt(a,t,e){for(var o=a.items,i=[],r=t.length,s=0;s<r;s++)vt(t[s].e,i,!0);var p=r>0&&i.length===0&&e!==null;if(p){var S=e.parentNode;pt(S),S.append(e),o.clear(),ae(a,t[0].prev,t[r-1].next)}yt(i,()=>{for(var b=0;b<r;b++){var n=t[b];p||(o.delete(n.k),ae(a,n.prev,n.next)),je(n.e,!p)}})}function J(a,t,e,o,i,r=null){var s=a,p={flags:t,items:new Map,first:null},S=(t&Qe)!==0;if(S){var b=a;s=ie?Le(et(b)):b.appendChild(Fe())}ie&&tt();var n=null,l=!1,k=new Map,E=st(()=>{var D=e();return ft(D)?D:D==null?[]:Ye(D)}),u,_;function y(){Ct(_,u,p,k,s,i,t,o,e),r!==null&&(u.length===0?n?ze(n):n=Ue(()=>r(s)):n!==null&&dt(n,()=>{n=null}))}rt(()=>{_??=gt,u=m(E);var D=u.length;if(l&&D===0)return;l=D===0;let M=!1;if(ie){var G=at(s)===ot;G!==(D===0)&&(s=Ie(),Le(s),Ce(!1),M=!0)}if(ie){for(var $=null,B,d=0;d<D;d++){if(de.nodeType===it&&de.data===nt){s=de,M=!0,Ce(!1);break}var f=u[d],w=o(f,d);B=Ee(de,p,$,null,f,w,d,i,t,e),p.items.set(w,B),$=B}D>0&&Le(Ie())}if(ie)D===0&&r&&(n=Ue(()=>r(s)));else if(ct()){var z=new Set,j=lt;for(d=0;d<D;d+=1){f=u[d],w=o(f,d);var Y=p.items.get(w)??k.get(w);Y?(t&(we|_e))!==0&&Ze(Y,f,d,t):(B=Ee(null,p,null,null,f,w,d,i,t,e,!0),k.set(w,B)),z.add(w)}for(const[x,V]of p.items)z.has(x)||j.skipped_effects.add(V.e);j.add_callback(y)}else y();M&&Ce(!0),m(E)}),ie&&(s=de)}function Ct(a,t,e,o,i,r,s,p,S){var b=(s&_t)!==0,n=(s&(we|_e))!==0,l=t.length,k=e.items,E=e.first,u=E,_,y=null,D,M=[],G=[],$,B,d,f;if(b)for(f=0;f<l;f+=1)$=t[f],B=p($,f),d=k.get(B),d!==void 0&&(d.a?.measure(),(D??=new Set).add(d));for(f=0;f<l;f+=1){if($=t[f],B=p($,f),d=k.get(B),d===void 0){var w=o.get(B);if(w!==void 0){o.delete(B),k.set(B,w);var z=y?y.next:u;ae(e,y,w),ae(e,w,z),Be(w,z,i),y=w}else{var j=u?u.e.nodes_start:i;y=Ee(j,e,y,y===null?e.first:y.next,$,B,f,r,s,S)}k.set(B,y),M=[],G=[],u=y.next;continue}if(n&&Ze(d,$,f,s),(d.e.f&Ae)!==0&&(ze(d.e),b&&(d.a?.unfix(),(D??=new Set).delete(d))),d!==u){if(_!==void 0&&_.has(d)){if(M.length<G.length){var Y=G[0],x;y=Y.prev;var V=M[0],g=M[M.length-1];for(x=0;x<M.length;x+=1)Be(M[x],Y,i);for(x=0;x<G.length;x+=1)_.delete(G[x]);ae(e,V.prev,g.next),ae(e,y,V),ae(e,g,Y),u=Y,y=g,f-=1,M=[],G=[]}else _.delete(d),Be(d,u,i),ae(e,d.prev,d.next),ae(e,d,y===null?e.first:y.next),ae(e,y,d),y=d;continue}for(M=[],G=[];u!==null&&u.k!==B;)(u.e.f&Ae)===0&&(_??=new Set).add(u),G.push(u),u=u.next;if(u===null)continue;d=u}M.push(d),y=d,u=d.next}if(u!==null||_!==void 0){for(var R=_===void 0?[]:Ye(_);u!==null;)(u.e.f&Ae)===0&&R.push(u),u=u.next;var W=R.length;if(W>0){var U=(s&Qe)!==0&&l===0?i:null;if(b){for(f=0;f<W;f+=1)R[f].a?.measure();for(f=0;f<W;f+=1)R[f].a?.fix()}Lt(e,R,U)}}b&&ht(()=>{if(D!==void 0)for(d of D)d.a?.apply()}),a.first=e.first&&e.first.e,a.last=y&&y.e;for(var T of o.values())je(T.e);o.clear()}function Ze(a,t,e,o){(o&we)!==0&&Te(a.v,t),(o&_e)!==0?Te(a.i,e):a.i=e}function Ee(a,t,e,o,i,r,s,p,S,b,n){var l=(S&we)!==0,k=(S&ut)===0,E=l?k?qe(i,!1,!1):De(i):i,u=(S&_e)===0?s:De(s),_={i:u,v:E,k:r,a:null,e:null,prev:e,next:o};try{if(a===null){var y=document.createDocumentFragment();y.append(a=Fe())}return _.e=Ue(()=>p(a,E,u,b),ie),_.e.prev=e&&e.e,_.e.next=o&&o.e,e===null?n||(t.first=_):(e.next=_,e.e.next=_.e),o!==null&&(o.prev=_,o.e.prev=_.e),_}finally{}}function Be(a,t,e){for(var o=a.next?a.next.e.nodes_start:e,i=t?t.e.nodes_start:e,r=a.e.nodes_start;r!==null&&r!==o;){var s=mt(r);i.before(r),r=s}}function ae(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const Pe=[...` 	
\r\fÂ \v\uFEFF`];function At(a,t,e){var o=a==null?"":""+a;if(t&&(o=o?o+" "+t:t),e){for(var i in e)if(e[i])o=o?o+" "+i:i;else if(o.length)for(var r=i.length,s=0;(s=o.indexOf(i,s))>=0;){var p=s+r;(s===0||Pe.includes(o[s-1]))&&(p===o.length||Pe.includes(o[p]))?o=(s===0?"":o.substring(0,s))+o.substring(p+1):s=p}}return o===""?null:o}function ge(a,t,e,o,i,r){var s=a.__className;if(ie||s!==e||s===void 0){var p=At(e,o,r);(!ie||p!==a.getAttribute("class"))&&(p==null?a.removeAttribute("class"):a.className=p),a.__className=e}else if(r&&i!==r)for(var S in r){var b=!!r[S];(i==null||b!==!!i[S])&&a.classList.toggle(S,b)}return r}const St=!1,Bt=!0,ls=Object.freeze(Object.defineProperty({__proto__:null,prerender:Bt,ssr:St},Symbol.toStringTag,{value:"Module"})),Ut=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]},{id:8,name:"Uppsala Cathedral",baseResource:"clay",stages:[{cost:{stone:2},effect:{coins:3}},{cost:{papyrus:2},effect:{points:5}},{cost:{clay:2,ore:1},effect:{points:7}}]},{id:9,name:"Lindvalls Coffee",baseResource:"coffee",stages:[{cost:{clay:2},effect:{resources:{coffee:1}}},{cost:{glass:2},effect:{resources:{coffee:1}}},{cost:{stone:2},effect:{resources:{coffee:1}}}]}];function xe(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Timber Yard",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pit",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Excavation",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Mercenary Camp",type:"military",temporary:!0,cost:{coins:1},effect:{military:1}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Mine",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}}]}function Je(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},altcost:10,effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Free Company",type:"military",temporary:!0,cost:{coins:5},effect:{military:3}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},altcost:11,effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Roastery",type:"resource",cost:{clay:2},effect:{resources:{coffee:1}}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Spice Market",type:"resource",cost:{wood:1,cloth:1},effect:{resources:{spice:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function Ke(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:3},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:3},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:3},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:5}},{id:57,name:"Supply Yard",type:"resource",cost:{stone:1,coins:5},effect:{resources:{wood:1,ore:1,clay:1}}},{id:58,name:"Scriptorium",type:"resource",cost:{stone:1,wood:1},effect:{resources:{papyrus:1}}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:5}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:5}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{coffee:1,spice:1,cloth:1},effect:{coins:5,points:8}}]}function ye(a){return a.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)}function qt(a){return Ut.map(e=>({w:e,sort:Math.random()})).sort((e,o)=>e.sort-o.sort).map(({w:e})=>e).slice(0,a)}function Et(a,t){return{name:a,coins:3,military:0,score:0,resources:{[t.baseResource]:1},hand:[],built:[],wonder:t,wonderStagesBuilt:0}}function xt(){const a=["You","Bot A","Bot B"],t=qt(a.length),e=a.map((i,r)=>Et(i,t[r])),o=ye(xe());for(let i=0;i<e.length;i++)e[i].hand=o.splice(0,7);return{players:e,discard:[],age:1}}function Ot(a){let t;a.age===2?t=ye(Je()):a.age===3?t=ye(Ke()):t=ye(xe());for(let e=0;e<a.players.length;e++)a.players[e].hand=t.splice(0,7)}const $e=wt(xt()),It=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,Dt=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,Tt=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href,Ge={1:It,2:Dt,3:Tt};function Mt(a){if(a.hand.length!==0)return a.hand.reduce((t,e)=>{const o=Ne(t);return Ne(e)>o?e:t})}function Ne(a){return a.effect.resources?Object.values(a.effect.resources).reduce((t,e)=>t+(e??0),0):0}function Xe(a,t){if(t){if(t.resources)for(const[e,o]of Object.entries(t.resources)){const i=o??0;a.resources[e]=(a.resources[e]||0)+i}typeof t.coins=="number"&&(a.coins=(a.coins||0)+t.coins),typeof t.military=="number"&&(a.military=(a.military||0)+t.military),typeof t.points=="number"&&(a.score=(a.score||0)+t.points)}}function Pt(a,t){t&&t.coins&&t.coins>0&&(a.coins=(a.coins||0)-t.coins)}function le(a,t,e){if(!t||a.built.some(o=>o.id===e))return!0;if(t.coins&&(a.coins||0)<t.coins)return!1;for(const[o,i]of Object.entries(t))if(o!=="coins"&&(a.resources[o]||0)<(i||0))return!1;return!0}function He(a,t){if(!le(a,t.cost,t.altcost)){console.warn(`${a.name} cannot afford ${t.name}`);return}Pt(a,t.cost),Xe(a,t.effect),a.built.push(t)}function Ve(a,t,e){if(!le(a,e)){console.warn(`${a.name} cannot afford this wonder stage`);return}Xe(a,t)}function $t(a){const t=a.players,e=t.length;let o=0;switch(a.age){case 1:o=1;break;case 2:o=3;break;case 3:o=5;break;default:o=0}for(let i=0;i<e;i++){const r=t[i],s=t[(i+1)%e],p=t[(i-1+e)%e];(r.military||0)>(s.military||0)?r.score+=o:(r.military||0)<(s.military||0)&&(r.score-=1),(r.military||0)>(p.military||0)?r.score+=o:(r.military||0)<(p.military||0)&&(r.score-=1);const S=r.resources.coffee||0;r.score+=S,r.built=r.built.filter(b=>!b.temporary),r.resources={[r.wonder.baseResource]:1},r.military=r.built.reduce((b,n)=>b+(n.effect.military||0),0);for(const b of r.built)if(b.effect.resources)for(const[n,l]of Object.entries(b.effect.resources))r.resources[n]=(r.resources[n]||0)+(l||0);for(let b=0;b<r.wonderStagesBuilt;b++){const n=r.wonder.stages[b].effect;if(n.military&&(r.military+=n.military),n.points&&(r.score+=n.points),n.coins&&(r.coins+=n.coins),n.resources)for(const[l,k]of Object.entries(n.resources))r.resources[l]=(r.resources[l]||0)+k}}}function Gt(a,t,e){let o="",i=[];const r=structuredClone(a),s=r.players[0];if(e==="build"){if(s.built.some(l=>l.name===t.name))return o=`You already built "${t.name}", pick another card.`,{updatedGame:r,message:o,winners:i};if(!le(s,t.cost,t.altcost))return o=`You don't have enough resources to build "${t.name}". Pick another card.`,{updatedGame:r,message:o,winners:i};const n=s.hand.findIndex(l=>l.id===t.id);if(n<0)return{updatedGame:r,message:o,winners:i};s.hand.splice(n,1),He(s,t)}else if(e==="sell"){const n=s.hand.findIndex(l=>l.id===t.id);if(n<0)return{updatedGame:r,message:o,winners:i};s.hand.splice(n,1),s.coins+=3}else if(e==="wonder")if(s.wonderStagesBuilt<s.wonder.stages.length){const n=s.wonder.stages[s.wonderStagesBuilt];if(!le(s,n.cost))return o="You don't have enough resources to build this wonder stage!",{updatedGame:r,message:o,winners:i};const l=s.hand.findIndex(k=>k.id===t.id);if(l<0)return{updatedGame:r,message:o,winners:i};s.hand.splice(l,1),s.wonderStagesBuilt++,Ve(s,n.effect,n.cost)}else return o="Your wonder is already complete!",{updatedGame:r,message:o,winners:i};for(let n=1;n<r.players.length;n++){const l=r.players[n],k=l.hand.filter(_=>!l.built.some(y=>y.name===_.name)&&le(l,_.cost));let E,u="build";if(k.length>0)E=Mt({...l,hand:k}),u="build";else{if(l.wonderStagesBuilt<l.wonder.stages.length){const _=l.wonder.stages[l.wonderStagesBuilt];le(l,_.cost)&&(E=l.hand[0],u="wonder")}!E&&l.hand.length>0&&(E=l.hand[0],u="sell")}if(E){const _=l.hand.findIndex(y=>y.id===E.id);if(_>=0){if(l.hand.splice(_,1),console.log("picked",E.name,"to",u,"for bot",l.name),u==="build")He(l,E);else if(u==="sell")l.coins+=3;else if(u==="wonder"){const y=l.wonder.stages[l.wonderStagesBuilt];l.wonderStagesBuilt++,Ve(l,y.effect,y.cost)}}}}const p=r.players.map(n=>n.hand),S=[p[p.length-1],...p.slice(0,p.length-1)];for(let n=0;n<r.players.length;n++)r.players[n].hand=S[n],console.log(r.players[n].name,"s hand:",r.players[n].hand);if(r.players.some(n=>n.hand.length>0))!o.startsWith("You already built")&&!o.startsWith("You don't have enough resources")&&(o="Turn resolved. Next pick.");else if($t(r),r.age<3)r.age++,Ot(r),o=`End of Age ${r.age-1} finished. Scores updated. Age ${r.age} begins!`;else{const n=Math.max(...r.players.map(l=>l.score));i=r.players.filter(l=>l.score===n),o=`Game over! ${i.map(l=>l.wonder.name).join(", ")} won with ${n} points!`,console.log("Final scores:",r.players.map(l=>({name:l.name,score:l.score}))),console.log("Winners:",i)}return{updatedGame:{...r,players:r.players.map(n=>({...n,hand:[...n.hand],built:[...n.built]}))},message:o,winners:i}}const Nt=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Ht=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,Vt=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Wt=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,Ft=""+new URL("../assets/uppsala.DzCzligB.png",import.meta.url).href,Yt=""+new URL("../assets/lindvalls.JVtzja-w.png",import.meta.url).href,zt=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,jt=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Qt=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,pe={1:Nt,2:Ht,3:Vt,4:Wt,5:zt,6:jt,7:Qt,8:Ft,9:Yt},Zt=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,Jt=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,Kt=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,Xt=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,er=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,tr=""+new URL("../assets/coffee.BEH_fvhj.png",import.meta.url).href,rr=""+new URL("../assets/spice.CE-eP-kd.png",import.meta.url).href,sr=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,ar=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,or=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,ir=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,nr=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,cr=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,lr=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,fr=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,dr=""+new URL("../assets/coin-6.CoRwwKTP.png",import.meta.url).href,ur=""+new URL("../assets/coin-9.DQSSAwKE.png",import.meta.url).href,mr=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,vr=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,pr=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,yr=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,gr=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,hr=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,_r=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,wr=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,br=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,C={coffee:tr,wood:Jt,stone:Kt,ore:Xt,clay:er,glass:Zt,cloth:sr,papyrus:ar,spice:rr,military:or,coin:ir,coin1:nr,coin3:cr,coin4:lr,coin5:fr,coin6:dr,coin9:ur,victory:mr,victory1:vr,victory2:pr,victory3:yr,victory4:gr,victory5:hr,victory6:_r,victory7:wr,victory8:br};var Rr=I('<img class="svelte-1qp0wqp"/>'),kr=I('<img class="svelte-1qp0wqp"/>'),Lr=I("<em>Free</em>"),Cr=I('<div class="stage-cost svelte-1qp0wqp"><!></div>'),Ar=I('<img class="svelte-1qp0wqp"/>'),Sr=I('<img class="svelte-1qp0wqp"/>'),Br=I('<img alt="military" class="svelte-1qp0wqp"/>'),Ur=I('<img class="svelte-1qp0wqp"/>'),qr=I("<em>Special</em>"),Er=I('<div><div class="stage-index svelte-1qp0wqp"></div> <!> <div><!> <!> <!> <!> <!></div></div>'),xr=I('<div class="wonder-progress svelte-1qp0wqp"><div class="stages svelte-1qp0wqp"></div></div>');function Or(a,t){be(t,!1);let e=ue(t,"player",8);he();var o=xr(),i=O(o);J(i,5,()=>(v(e()),c(()=>e().wonder.stages)),Z,(r,s,p)=>{var S=Er(),b=O(S);b.textContent=`Stage ${p+1}`;var n=q(b,2);{var l=f=>{var w=Cr(),z=O(w);{var j=x=>{var V=te(),g=K(V);J(g,1,()=>(m(s),c(()=>Object.entries(m(s).cost))),Z,(R,W)=>{var U=me(()=>ve(m(W),2));let T=()=>m(U)[0],P=()=>m(U)[1];var F=te(),Q=K(F);{var X=ee=>{var se=Rr();N(()=>{A(se,"src",(v(C),P(),c(()=>C["coin"+P()]))),A(se,"alt","coin"+P())}),h(ee,se)},oe=ee=>{var se=te(),re=K(se);J(re,1,()=>(P(),c(()=>Array(P()))),Z,(ce,Oe)=>{var fe=kr();N(()=>{A(fe,"src",(v(C),T(),c(()=>C[T()]))),A(fe,"alt",T())}),h(ce,fe)}),h(ee,se)};H(Q,ee=>{T()==="coins"?ee(X):ee(oe,!1)})}h(R,F)}),h(x,V)},Y=x=>{var V=Lr();h(x,V)};H(z,x=>{m(s),c(()=>m(s).cost)?x(j):x(Y,!1)})}L(w),h(f,w)};H(n,f=>{v(e()),c(()=>p>=e().wonderStagesBuilt)&&f(l)})}var k=q(n,2),E=O(k);{var u=f=>{var w=te(),z=K(w);J(z,1,()=>(m(s),c(()=>Object.entries(m(s).effect.resources))),Z,(j,Y)=>{var x=me(()=>ve(m(Y),2));let V=()=>m(x)[0],g=()=>m(x)[1];var R=te(),W=K(R);J(W,1,()=>(g(),c(()=>Array(g()))),Z,(U,T)=>{var P=Ar();N(()=>{A(P,"src",(v(C),V(),c(()=>C[V()]))),A(P,"alt",V())}),h(U,P)}),h(j,R)}),h(f,w)};H(E,f=>{m(s),c(()=>m(s).effect.resources)&&f(u)})}var _=q(E,2);{var y=f=>{var w=Sr();N(()=>{A(w,"src",(v(C),m(s),c(()=>C["coin"+m(s).effect.coins]))),A(w,"alt",(m(s),c(()=>"coin"+m(s).effect.coins)))}),h(f,w)};H(_,f=>{m(s),c(()=>m(s).effect.coins)&&f(y)})}var D=q(_,2);{var M=f=>{var w=te(),z=K(w);J(z,1,()=>(m(s),c(()=>Array(m(s).effect.military))),Z,(j,Y)=>{var x=Br();N(()=>A(x,"src",(v(C),c(()=>C.military)))),h(j,x)}),h(f,w)};H(D,f=>{m(s),c(()=>m(s).effect.military)&&f(M)})}var G=q(D,2);{var $=f=>{var w=Ur();N(()=>{A(w,"src",(v(C),m(s),c(()=>C["victory"+m(s).effect.points]))),A(w,"alt",(m(s),c(()=>"victory"+m(s).effect.points)))}),h(f,w)};H(G,f=>{m(s),c(()=>m(s).effect.points)&&f($)})}var B=q(G,2);{var d=f=>{var w=qr();h(f,w)};H(B,f=>{m(s),c(()=>!m(s).effect.points&&!m(s).effect.coins&&!m(s).effect.military&&!m(s).effect.resources)&&f(d)})}L(k),L(S),N(()=>{ge(S,1,`stage ${v(e()),c(()=>p<e().wonderStagesBuilt?"built":"")??""}`,"svelte-1qp0wqp"),ge(k,1,`stage-effect ${v(e()),c(()=>p<e().wonderStagesBuilt?"built":"")??""}`,"svelte-1qp0wqp")}),h(r,S)}),L(i),L(o),h(a,o),Re()}var Ir=I('<img class="svelte-mc7k3p"/>'),Dr=I('<div class="resource svelte-mc7k3p"><img class="svelte-mc7k3p"/> <span> </span></div>'),Tr=I("<em>None</em>"),Mr=I("<li> </li>"),Pr=I("<ul></ul>"),$r=I('<div><div class="wonder svelte-mc7k3p"><!> <div class="wonder-name svelte-mc7k3p"> </div> <div class="wonder-progress svelte-mc7k3p"><!></div></div> <div class="player-info svelte-mc7k3p"><div class="stats svelte-mc7k3p"><div class="resource svelte-mc7k3p"><img alt="coin" class="svelte-mc7k3p"/> <span> </span></div> <div class="resource svelte-mc7k3p"><img alt="military" class="svelte-mc7k3p"/> <span> </span></div> <div class="resource svelte-mc7k3p"><img alt="score" class="svelte-mc7k3p"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-mc7k3p"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>');function Gr(a,t){be(t,!1);let e=ue(t,"player",8),o=ue(t,"i",8),i=ue(t,"winners",8);he();var r=$r();let s;var p=O(r),S=O(p);{var b=U=>{var T=Ir();N(()=>{A(T,"src",(v(pe),v(e()),c(()=>pe[e().wonder.id]))),A(T,"alt",(v(e()),c(()=>e().wonder.name))),A(T,"title",(v(e()),c(()=>e().wonder.name)))}),h(U,T)};H(S,U=>{v(e()),v(pe),c(()=>e().wonder&&e().wonder.id&&pe[e().wonder.id])&&U(b)})}var n=q(S,2),l=O(n,!0);L(n);var k=q(n,2),E=O(k);Or(E,{get player(){return e()}}),L(k),L(p);var u=q(p,2),_=O(u),y=O(_),D=O(y),M=q(D,2),G=O(M,!0);L(M),L(y);var $=q(y,2),B=O($),d=q(B,2),f=O(d,!0);L(d),L($);var w=q($,2),z=O(w),j=q(z,2),Y=O(j,!0);L(j),L(w),L(_);var x=q(_,4);J(x,5,()=>(v(e()),c(()=>Object.entries(e().resources))),Z,(U,T)=>{var P=me(()=>ve(m(T),2));let F=()=>m(P)[0],Q=()=>m(P)[1];var X=Dr(),oe=O(X),ee=q(oe,2),se=O(ee,!0);L(ee),L(X),N(()=>{A(oe,"src",(v(C),F(),c(()=>C[F()]))),A(oe,"alt",F()),ne(se,Q())}),h(U,X)}),L(x);var V=q(x,4),g=O(V);{var R=U=>{var T=Tr();h(U,T)},W=U=>{var T=Pr();J(T,5,()=>(v(e()),c(()=>e().built)),Z,(P,F)=>{var Q=Mr(),X=O(Q,!0);L(Q),N(()=>ne(X,(m(F),c(()=>m(F).name)))),h(P,Q)}),L(T),h(U,T)};H(g,U=>{v(e()),c(()=>e().built.length===0)?U(R):U(W,!1)})}L(V),L(u),L(r),N(U=>{s=ge(r,1,"player-summary svelte-mc7k3p",null,s,U),ne(l,(v(e()),c(()=>e().wonder?.name))),A(D,"src",(v(C),c(()=>C.coin))),ne(G,(v(e()),c(()=>e().coins))),A(B,"src",(v(C),c(()=>C.military))),ne(f,(v(e()),c(()=>e().military))),A(z,"src",(v(C),c(()=>C.victory))),ne(Y,(v(e()),c(()=>e().score)))},[()=>({current:o()===0,winner:i().some(U=>U.name===e().name)})]),h(a,r),Re()}const Nr=[...xe(),...Je(),...Ke()];function We(a){return Nr.find(t=>t.id===a)?.name}var Hr=I('<img class="svelte-lkhb3g"/>'),Vr=I('<img class="svelte-lkhb3g"/>'),Wr=I('<img alt="military" class="svelte-lkhb3g"/>'),Fr=I('<img class="svelte-lkhb3g"/>'),Yr=I('<p class="card-temporary svelte-lkhb3g">Temporary, removed after end of age</p>'),zr=I('<img class="svelte-lkhb3g"/>'),jr=I('<img class="svelte-lkhb3g"/>'),Qr=I("<em>Free</em>"),Zr=I('<div class="card-altcost svelte-lkhb3g"><p class="svelte-lkhb3g"> </p></div>'),Jr=I('<div><div class="card-info svelte-lkhb3g"><h2> </h2> <div class="card-effect svelte-lkhb3g"><!> <!> <!> <!></div> <!></div> <div class="card-cost svelte-lkhb3g"><!></div> <!> <div class="card-actions svelte-lkhb3g"><button class="svelte-lkhb3g"><strong>Build</strong></button> <button class="svelte-lkhb3g"><strong>Sell</strong></button> <button class="svelte-lkhb3g"><strong>Wonder</strong></button></div></div>');function Kr(a,t){be(t,!1);let e=ue(t,"card",8);const o=bt();function i(g){o("pick",g)}he();var r=Jr(),s=O(r),p=O(s),S=O(p,!0);L(p);var b=q(p,2),n=O(b);{var l=g=>{var R=te(),W=K(R);J(W,1,()=>(v(e()),c(()=>Object.entries(e().effect.resources))),Z,(U,T)=>{var P=me(()=>ve(m(T),2));let F=()=>m(P)[0],Q=()=>m(P)[1];var X=te(),oe=K(X);J(oe,1,()=>(Q(),c(()=>Array(Q()))),Z,(ee,se)=>{var re=Hr();N(()=>{A(re,"src",(v(C),F(),c(()=>C[F()]))),A(re,"alt",F())}),h(ee,re)}),h(U,X)}),h(g,R)};H(n,g=>{v(e()),c(()=>e().effect.resources)&&g(l)})}var k=q(n,2);{var E=g=>{var R=Vr();N(()=>{A(R,"src",(v(C),v(e()),c(()=>C["coin"+e().effect.coins]))),A(R,"alt",(v(e()),c(()=>"coin"+e().effect.coins)))}),h(g,R)};H(k,g=>{v(e()),c(()=>e().effect.coins)&&g(E)})}var u=q(k,2);{var _=g=>{var R=te(),W=K(R);J(W,1,()=>(v(e()),c(()=>Array(e().effect.military))),Z,(U,T)=>{var P=Wr();N(()=>A(P,"src",(v(C),c(()=>C.military)))),h(U,P)}),h(g,R)};H(u,g=>{v(e()),c(()=>e().effect.military)&&g(_)})}var y=q(u,2);{var D=g=>{var R=Fr();N(()=>{A(R,"src",(v(C),v(e()),c(()=>C["victory"+e().effect.points]))),A(R,"alt",(v(e()),c(()=>"victory"+e().effect.points)))}),h(g,R)};H(y,g=>{v(e()),c(()=>e().effect.points)&&g(D)})}L(b);var M=q(b,2);{var G=g=>{var R=Yr();h(g,R)};H(M,g=>{v(e()),c(()=>e().temporary)&&g(G)})}L(s);var $=q(s,2),B=O($);{var d=g=>{var R=te(),W=K(R);J(W,1,()=>(v(e()),c(()=>Object.entries(e().cost))),Z,(U,T)=>{var P=me(()=>ve(m(T),2));let F=()=>m(P)[0],Q=()=>m(P)[1];var X=te(),oe=K(X);{var ee=re=>{var ce=zr();N(()=>{A(ce,"src",(v(C),Q(),c(()=>C["coin"+Q()]))),A(ce,"alt","coin"+Q())}),h(re,ce)},se=re=>{var ce=te(),Oe=K(ce);J(Oe,1,()=>(Q(),c(()=>Array(Q()))),Z,(fe,rs)=>{var ke=jr();N(()=>{A(ke,"src",(v(C),F(),c(()=>C[F()]))),A(ke,"alt",F())}),h(fe,ke)}),h(re,ce)};H(oe,re=>{F()==="coins"?re(ee):re(se,!1)})}h(U,X)}),h(g,R)},f=g=>{var R=Qr();h(g,R)};H(B,g=>{v(e()),c(()=>e().cost&&Object.keys(e().cost).length>0)?g(d):g(f,!1)})}L($);var w=q($,2);{var z=g=>{var R=Zr(),W=O(R),U=O(W,!0);L(W),L(R),N(T=>ne(U,T),[()=>(v(We),v(e()),c(()=>We(e().altcost)))]),h(g,R)};H(w,g=>{v(e()),c(()=>e().altcost)&&g(z)})}var j=q(w,2),Y=O(j),x=q(Y,2),V=q(x,2);L(j),L(r),N(()=>{ge(r,1,`card-buttons card-type-${v(e()),c(()=>e().type)??""}`,"svelte-lkhb3g"),ne(S,(v(e()),c(()=>e().name)))}),Se("click",Y,()=>i("build")),Se("click",x,()=>i("sell")),Se("click",V,()=>i("wonder")),h(a,r),Re()}var Xr=I('<img class="age-image svelte-100ipa2" width="120" height="120"/>'),es=I('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-100ipa2"> </p> <div class="game-container svelte-100ipa2"><div class="player-list svelte-100ipa2"></div> <div class="cards-container svelte-100ipa2"></div></div>',1),ts=I("<p>Loading game...</p>");function fs(a,t){be(t,!1);const[e,o]=Rt(),i=()=>kt($e,"$game",e);let r=qe("Game started - Age I"),s=qe([]);function p(k,E){$e.update(u=>{const{updatedGame:_,message:y,winners:D}=Gt(u,k,E);return Me(r,y),Me(s,D),_})}he();var S=te(),b=K(S);{var n=k=>{var E=es(),u=q(K(E),2);{var _=B=>{var d=Xr();N(()=>{A(d,"src",Ge[i().age]),A(d,"alt","Age "+i().age)}),h(B,d)};H(u,B=>{Ge[i().age]&&B(_)})}var y=q(u,2),D=O(y,!0);L(y);var M=q(y,2),G=O(M);J(G,5,()=>i().players,Z,(B,d,f)=>{Gr(B,{get player(){return m(d)},i:f,get winners(){return m(s)}})}),L(G);var $=q(G,2);J($,5,()=>i().players[0].hand,Z,(B,d)=>{Kr(B,{get card(){return m(d)},$$events:{pick:f=>p(m(d),f.detail)}})}),L($),L(M),N(()=>ne(D,m(r))),h(k,E)},l=k=>{var E=ts();h(k,E)};H(b,k=>{i()?k(n):k(l,!1)})}h(a,S),Re(),o()}export{fs as component,ls as universal};
