import"../chunks/DsnmJJEf.js";import{i as Et}from"../chunks/pXw9F0qr.js";import{G as Qe,o as ce,A as St,J as yt,p as kt,n as It,S as a,ax as Ot,D as Tt,H as $t,F as ct,I as Je,z as Ue,af as Dt,aj as Mt,w as st,M as Pt,K as Nt,an as gt,i as Ht,R as rt,aJ as lt,aK as ft,O as ht,P as Vt,aL as Pe,aM as Ze,y as _t,aN as Ne,aO as qt,ah as Ft,aP as Gt,am as Wt,aQ as Yt,ac as zt,aR as wt,ad as jt,aS as Qt,$ as Jt,a8 as ne,a1 as K,a3 as p,a4 as Zt,a0 as S,a7 as b,a5 as R,a6 as g,a2 as $,aI as Xe,aH as Be,aT as Ee,T as fe}from"../chunks/DEaZTocB.js";import{w as Xt,a as G,e as Ke}from"../chunks/wIxpBGLN.js";import{i as N,s as Kt,a as es}from"../chunks/B6mUW0Rw.js";import{s as O}from"../chunks/C0WV71g0.js";function J(s,e){return e}function ts(s,e,t){for(var i=s.items,c=[],l=e.length,d=0;d<l;d++)Gt(e[d].e,c,!0);var m=l>0&&c.length===0&&t!==null;if(m){var x=t.parentNode;Wt(x),x.append(t),i.clear(),ee(s,e[0].prev,e[l-1].next)}Yt(c,()=>{for(var L=0;L<l;L++){var B=e[L];m||(i.delete(B.k),ee(s,B.prev,B.next)),_t(B.e,!m)}})}function Z(s,e,t,i,c,l=null){var d=s,m={flags:e,items:new Map,first:null},x=(e&wt)!==0;if(x){var L=s;d=ce?Qe(St(L)):L.appendChild(yt())}ce&&kt();var B=null,W=!1,Q=new Map,te=Ot(()=>{var f=t();return Ht(f)?f:f==null?[]:gt(f)}),y,v;function h(){ss(v,y,m,Q,d,c,e,i,t),l!==null&&(y.length===0?B?ht(B):B=st(()=>l(d)):B!==null&&Vt(B,()=>{B=null}))}It(()=>{v??=zt,y=a(te);var f=y.length;if(W&&f===0)return;W=f===0;let _=!1;if(ce){var D=Tt(d)===$t;D!==(f===0)&&(d=ct(),Qe(d),Je(!1),_=!0)}if(ce){for(var Y=null,T,r=0;r<f;r++){if(Ue.nodeType===Dt&&Ue.data===Mt){d=Ue,_=!0,Je(!1);break}var o=y[r],C=i(o,r);T=at(Ue,m,Y,null,o,C,r,c,e,t),m.items.set(C,T),Y=T}f>0&&Qe(ct())}if(ce)f===0&&l&&(B=st(()=>l(d)));else if(Pt()){var n=new Set,M=Nt;for(r=0;r<f;r+=1){o=y[r],C=i(o,r);var E=m.items.get(C)??Q.get(C);E?(e&(Ne|Pe))!==0&&bt(E,o,r,e):(T=at(null,m,null,null,o,C,r,c,e,t,!0),Q.set(C,T)),n.add(C)}for(const[I,z]of m.items)n.has(I)||M.skipped_effects.add(z.e);M.add_callback(h)}else h();_&&Je(!0),a(te)}),ce&&(d=Ue)}function ss(s,e,t,i,c,l,d,m,x){var L=(d&Qt)!==0,B=(d&(Ne|Pe))!==0,W=e.length,Q=t.items,te=t.first,y=te,v,h=null,f,_=[],D=[],Y,T,r,o;if(L)for(o=0;o<W;o+=1)Y=e[o],T=m(Y,o),r=Q.get(T),r!==void 0&&(r.a?.measure(),(f??=new Set).add(r));for(o=0;o<W;o+=1){if(Y=e[o],T=m(Y,o),r=Q.get(T),r===void 0){var C=i.get(T);if(C!==void 0){i.delete(T),Q.set(T,C);var n=h?h.next:y;ee(t,h,C),ee(t,C,n),et(C,n,c),h=C}else{var M=y?y.e.nodes_start:c;h=at(M,t,h,h===null?t.first:h.next,Y,T,o,l,d,x)}Q.set(T,h),_=[],D=[],y=h.next;continue}if(B&&bt(r,Y,o,d),(r.e.f&Ze)!==0&&(ht(r.e),L&&(r.a?.unfix(),(f??=new Set).delete(r))),r!==y){if(v!==void 0&&v.has(r)){if(_.length<D.length){var E=D[0],I;h=E.prev;var z=_[0],le=_[_.length-1];for(I=0;I<_.length;I+=1)et(_[I],E,c);for(I=0;I<D.length;I+=1)v.delete(D[I]);ee(t,z.prev,le.next),ee(t,h,z),ee(t,le,E),y=E,h=le,o-=1,_=[],D=[]}else v.delete(r),et(r,y,c),ee(t,r.prev,r.next),ee(t,r,h===null?t.first:h.next),ee(t,h,r),h=r;continue}for(_=[],D=[];y!==null&&y.k!==T;)(y.e.f&Ze)===0&&(v??=new Set).add(y),D.push(y),y=y.next;if(y===null)continue;r=y}_.push(r),h=r,y=r.next}if(y!==null||v!==void 0){for(var X=v===void 0?[]:gt(v);y!==null;)(y.e.f&Ze)===0&&X.push(y),y=y.next;var se=X.length;if(se>0){var ge=(d&wt)!==0&&W===0?c:null;if(L){for(o=0;o<se;o+=1)X[o].a?.measure();for(o=0;o<se;o+=1)X[o].a?.fix()}ts(t,X,ge)}}L&&jt(()=>{if(f!==void 0)for(r of f)r.a?.apply()}),s.first=t.first&&t.first.e,s.last=h&&h.e;for(var ue of i.values())_t(ue.e);i.clear()}function bt(s,e,t,i){(i&Ne)!==0&&ft(s.v,e),(i&Pe)!==0?ft(s.i,t):s.i=t}function at(s,e,t,i,c,l,d,m,x,L,B){var W=(x&Ne)!==0,Q=(x&qt)===0,te=W?Q?rt(c,!1,!1):lt(c):c,y=(x&Pe)===0?d:lt(d),v={i:y,v:te,k:l,a:null,e:null,prev:t,next:i};try{if(s===null){var h=document.createDocumentFragment();h.append(s=yt())}return v.e=st(()=>m(s,te,y,L),ce),v.e.prev=t&&t.e,v.e.next=i&&i.e,t===null?B||(e.first=v):(t.next=v,t.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function et(s,e,t){for(var i=s.next?s.next.e.nodes_start:t,c=e?e.e.nodes_start:t,l=s.e.nodes_start;l!==null&&l!==i;){var d=Ft(l);c.before(l),l=d}}function ee(s,e,t){e===null?s.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const dt=[...` 	
\r\f \v\uFEFF`];function rs(s,e,t){var i=s==null?"":""+s;if(e&&(i=i?i+" "+e:e),t){for(var c in t)if(t[c])i=i?i+" "+c:c;else if(i.length)for(var l=c.length,d=0;(d=i.indexOf(c,d))>=0;){var m=d+l;(d===0||dt.includes(i[d-1]))&&(m===i.length||dt.includes(i[m]))?i=(d===0?"":i.substring(0,d))+i.substring(m+1):d=m}}return i===""?null:i}function tt(s,e,t,i,c,l){var d=s.__className;if(ce||d!==t||d===void 0){var m=rs(t,i,l);(!ce||m!==s.getAttribute("class"))&&(m==null?s.removeAttribute("class"):s.className=m),s.__className=t}else if(l&&c!==l)for(var x in l){var L=!!l[x];(c==null||L!==!!c[x])&&s.classList.toggle(x,L)}return l}const as=!1,os=!0,Br=Object.freeze(Object.defineProperty({__proto__:null,prerender:os,ssr:as},Symbol.toStringTag,{value:"Module"})),is=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]},{id:8,name:"Uppsala Cathedral",baseResource:"clay",stages:[{cost:{stone:2},effect:{coins:3}},{cost:{papyrus:2},effect:{points:5}},{cost:{clay:2,ore:1},effect:{points:7}}]},{id:9,name:"Lindvalls Coffee",baseResource:"coffee",stages:[{cost:{clay:2},effect:{resources:{coffee:1}}},{cost:{glass:2},effect:{resources:{coffee:1}}},{cost:{stone:2},effect:{resources:{coffee:1}}}]}];function ot(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Timber Yard",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pit",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Excavation",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Mercenary Camp",type:"military",temporary:!0,cost:{coins:1},effect:{military:1}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Mine",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}}]}function Rt(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},altcost:10,effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Free Company",type:"military",temporary:!0,cost:{coins:5},effect:{military:3}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},altcost:11,effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Roastery",type:"resource",cost:{clay:2},effect:{resources:{coffee:1}}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Spice Market",type:"resource",effect:{resources:{spice:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function Lt(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:3},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:3},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:3},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:5}},{id:57,name:"Haven",type:"commerce",cost:{wood:1,ore:1,cloth:1},effect:{coins:5}},{id:58,name:"Lighthouse",type:"commerce",cost:{stone:1,glass:1},effect:{coins:4}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:5}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:5}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{stone:1,ore:1,cloth:1},effect:{coins:5}}]}function Me(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({value:e})=>e)}function ns(s){return is.map(t=>({w:t,sort:Math.random()})).sort((t,i)=>t.sort-i.sort).map(({w:t})=>t).slice(0,s)}function cs(s,e){return{name:s,coins:3,military:0,score:0,resources:{[e.baseResource]:1},hand:[],built:[],wonder:e,wonderStagesBuilt:0}}function ls(){const s=["You","Bot A","Bot B"],e=ns(s.length),t=s.map((c,l)=>cs(c,e[l])),i=Me(ot());for(let c=0;c<t.length;c++)t[c].hand=i.splice(0,7);return{players:t,discard:[],age:1}}function fs(s){let e;s.age===2?e=Me(Rt()):s.age===3?e=Me(Lt()):e=Me(ot());for(let t=0;t<s.players.length;t++)s.players[t].hand=e.splice(0,7)}const mt=Xt(ls());function ds(s){if(s.hand.length!==0)return s.hand.reduce((e,t)=>{const i=vt(e);return vt(t)>i?t:e})}function vt(s){return s.effect.resources?Object.values(s.effect.resources).reduce((e,t)=>e+(t??0),0):0}function Ct(s,e){if(e){if(e.resources)for(const[t,i]of Object.entries(e.resources)){const c=i??0;s.resources[t]=(s.resources[t]||0)+c}typeof e.coins=="number"&&(s.coins=(s.coins||0)+e.coins),typeof e.military=="number"&&(s.military=(s.military||0)+e.military),typeof e.points=="number"&&(s.score=(s.score||0)+e.points)}}function ms(s,e){e&&e.coins&&e.coins>0&&(s.coins=(s.coins||0)-e.coins)}function ye(s,e,t){if(!e||s.built.some(i=>i.id===t))return!0;if(e.coins&&(s.coins||0)<e.coins)return!1;for(const[i,c]of Object.entries(e))if(i!=="coins"&&(s.resources[i]||0)<(c||0))return!1;return!0}function ut(s,e){if(!ye(s,e.cost,e.altcost)){console.warn(`${s.name} cannot afford ${e.name}`);return}ms(s,e.cost),Ct(s,e.effect),s.built.push(e)}function pt(s,e,t){if(!ye(s,t)){console.warn(`${s.name} cannot afford this wonder stage`);return}Ct(s,e)}function vs(s){const e=s.players,t=e.length;let i=0;switch(s.age){case 1:i=1;break;case 2:i=3;break;case 3:i=5;break;default:i=0}for(let c=0;c<t;c++){const l=e[c],d=e[(c+1)%t],m=e[(c-1+t)%t];(l.military||0)>(d.military||0)?l.score+=i:(l.military||0)<(d.military||0)&&(l.score-=1),(l.military||0)>(m.military||0)?l.score+=i:(l.military||0)<(m.military||0)&&(l.score-=1);const x=l.resources.coffee||0;l.score+=x,l.built=l.built.filter(L=>!L.temporary),l.military=l.built.reduce((L,B)=>L+(B.effect.military||0),0),l.resources={};for(const L of l.built)if(L.effect.resources)for(const[B,W]of Object.entries(L.effect.resources))l.resources[B]=(l.resources[B]||0)+(W||0)}}const us=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,ps=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,ys=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,gs=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,hs=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,_s=""+new URL("../assets/coffee.BEH_fvhj.png",import.meta.url).href,ws=""+new URL("../assets/spice.CE-eP-kd.png",import.meta.url).href,bs=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,Rs=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,Ls=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,Cs=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,xs=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,As=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,Us=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,Bs=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,Es=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,Ss=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,ks=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,Is=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,Os=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,Ts=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,$s=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,Ds=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,Ms=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,Ps=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Ns=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,Hs=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Vs=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,qs=""+new URL("../assets/uppsala.DzCzligB.png",import.meta.url).href,Fs=""+new URL("../assets/lindvalls.JVtzja-w.png",import.meta.url).href,Gs=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Ws=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Ys=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,zs=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,js=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,Qs=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href,Js=[...ot(),...Rt(),...Lt()];function Zs(s){return Js.find(e=>e.id===s)?.name}var Xs=S('<img class="age-image svelte-dm8431" width="120" height="120"/>'),Ks=S('<img class="svelte-dm8431"/>'),er=S('<span class="resource svelte-dm8431"> </span>'),tr=S("<em>Free</em>"),sr=S('<span class="resource svelte-dm8431"> </span>'),rr=S("<em>Special</em>"),ar=S('<div><div class="stage-index svelte-dm8431"></div> <div class="stage-cost svelte-dm8431">Cost: <!></div> <div class="stage-effect svelte-dm8431">Effect: <!> <!> <!> <!> <!></div></div>'),or=S('<div class="resource svelte-dm8431"><img class="svelte-dm8431"/> <span> </span></div>'),ir=S("<em>None</em>"),nr=S("<li> </li>"),cr=S("<ul></ul>"),lr=S('<div><div class="wonder svelte-dm8431"><!> <div class="wonder-name svelte-dm8431"> </div> <div class="wonder-progress svelte-dm8431"><div class="stages svelte-dm8431"></div></div></div> <div class="player-info svelte-dm8431"><div class="stats svelte-dm8431"><div class="resource svelte-dm8431"><img alt="coin" class="svelte-dm8431"/> <span> </span></div> <div class="resource svelte-dm8431"><img alt="military" class="svelte-dm8431"/> <span> </span></div> <div class="resource svelte-dm8431"><img alt="score" class="svelte-dm8431"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-dm8431"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>'),fr=S('<p class="card-temporary svelte-dm8431">Temporary, removed after end of age</p>'),dr=S('<img class="svelte-dm8431"/>'),mr=S('<img class="svelte-dm8431"/>'),vr=S("<em>Free</em>"),ur=S('<p class="svelte-dm8431"> </p>'),pr=S('<img class="svelte-dm8431"/>'),yr=S('<img class="svelte-dm8431"/>'),gr=S('<img alt="military" class="svelte-dm8431"/>'),hr=S('<img class="svelte-dm8431"/>'),_r=S('<div><h2> </h2> <!> <h4>Cost</h4> <div class="card-cost svelte-dm8431"><!></div> <div class="card-altcost svelte-dm8431"><!></div> <h4>Production</h4> <div class="card-effect svelte-dm8431"><!> <!> <!> <!></div> <div class="card-actions svelte-dm8431"><button class="svelte-dm8431"><strong>Build</strong></button> <button class="svelte-dm8431"><strong>Sell</strong></button> <button class="svelte-dm8431"><strong>Wonder</strong></button></div></div>'),wr=S('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-dm8431"> </p> <div class="game-container svelte-dm8431"><div class="player-list svelte-dm8431"></div> <div class="cards-container svelte-dm8431"></div></div>',1),br=S("<p>Loading game...</p>");function Er(s,e){Jt(e,!1);const[t,i]=Kt(),c=()=>es(mt,"$game",t),l={1:zs,2:js,3:Qs},d={1:Ps,2:Ns,3:Hs,4:Vs,5:Gs,6:Ws,7:Ys,8:qs,9:Fs},m={coffee:_s,wood:ps,stone:ys,ore:gs,clay:hs,glass:us,cloth:bs,papyrus:Rs,military:Ls,coin:Cs,coin1:xs,coin3:As,coin4:Us,coin5:Bs,spice:ws,victory:Es,victory1:Ss,victory2:ks,victory3:Is,victory4:Os,victory5:Ts,victory6:$s,victory7:Ds,victory8:Ms};let x=rt("Game started — Age I"),L=rt([]);function B(v,h){mt.update(f=>{const _=f.players[0];if(h==="build"){if(_.built.some(o=>o.name===v.name))return fe(x,`You already built "${v.name}", pick another card.`),f;if(!ye(_,v.cost,v.altcost))return fe(x,`You don't have enough resources to build "${v.name}". Pick another card.`),f;const r=_.hand.findIndex(o=>o.id===v.id);if(r<0)return f;_.hand.splice(r,1),ut(_,v)}else if(h==="sell"){const r=_.hand.findIndex(o=>o.id===v.id);if(r<0)return f;_.hand.splice(r,1),_.coins+=3}else if(h==="wonder")if(_.wonderStagesBuilt<_.wonder.stages.length){const r=_.wonder.stages[_.wonderStagesBuilt];if(!ye(_,r.cost))return fe(x,"You don't have enough resources to build this wonder stage!"),f;const o=_.hand.findIndex(n=>n.id===v.id);if(o<0)return f;_.hand.splice(o,1),_.wonderStagesBuilt++;const C=r.effect;pt(_,C,r.cost)}else return fe(x,"Your wonder is already complete!"),f;for(let r=1;r<f.players.length;r++){const o=f.players[r],C=o.hand.filter(E=>!o.built.some(I=>I.name===E.name)&&ye(o,E.cost));let n,M="build";if(C.length>0)n=ds({...o,hand:C}),M="build";else{if(o.wonderStagesBuilt<o.wonder.stages.length){const E=o.wonder.stages[o.wonderStagesBuilt];ye(o,E.cost)&&(n=o.hand[0],M="wonder")}!n&&o.hand.length>0&&(n=o.hand[0],M="sell")}if(n){const E=o.hand.findIndex(I=>I.id===n.id);if(E>=0){if(o.hand.splice(E,1),console.log("picked",n.name,"to",M,"for bot",o.name),M==="build")ut(o,n);else if(M==="sell")o.coins+=3;else if(M==="wonder"){const I=o.wonder.stages[o.wonderStagesBuilt];o.wonderStagesBuilt++;const z=I.effect;pt(o,z,I.cost)}}}}const D=f.players.map(r=>r.hand),Y=[D[D.length-1],...D.slice(0,D.length-1)];for(let r=0;r<f.players.length;r++)f.players[r].hand=Y[r],console.log(f.players[r].name,"s hand:",f.players[r].hand);if(f.players.some(r=>r.hand.length>0))!a(x).startsWith("You already built")&&!a(x).startsWith("You don't have enough resources")&&fe(x,"Turn resolved. Next pick.");else if(vs(f),f.age<3)f.age++,fs(f),fe(x,`End of Age ${f.age-1} finished. Scores updated. Age ${f.age} begins!`);else{const r=Math.max(...f.players.map(o=>o.score));fe(L,f.players.filter(o=>o.score===r)),fe(x,`Game over! ${a(L).map(o=>o.wonder.name).join(", ")} won with ${r} points!`),console.log("Final scores:",f.players.map(o=>({name:o.name,score:o.score}))),console.log("Winners:",a(L))}return{...f,players:f.players.map(r=>({...r,hand:[...r.hand],built:[...r.built]}))}})}Et();var W=ne(),Q=K(W);{var te=v=>{var h=wr(),f=b(K(h),2);{var _=C=>{var n=Xs();$(()=>{O(n,"src",l[c().age]),O(n,"alt","Age "+c().age)}),p(C,n)};N(f,C=>{l[c().age]&&C(_)})}var D=b(f,2),Y=R(D,!0);g(D);var T=b(D,2),r=R(T);Z(r,5,()=>c().players,J,(C,n,M)=>{var E=lr();let I;var z=R(E),le=R(z);{var X=k=>{var u=Ks();$(()=>{O(u,"src",d[a(n).wonder.id]),O(u,"alt",a(n).wonder.name),O(u,"title",a(n).wonder.name)}),p(k,u)};N(le,k=>{a(n).wonder&&a(n).wonder.id&&d[a(n).wonder.id]&&k(X)})}var se=b(le,2),ge=R(se,!0);g(se);var ue=b(se,2),pe=R(ue);Z(pe,5,()=>a(n).wonder.stages,J,(k,u,V)=>{var H=ar(),q=R(H);q.textContent=`Stage ${V+1}`;var j=b(q,2),oe=b(R(j));{var me=U=>{var P=ne(),Fe=K(P);Z(Fe,1,()=>Object.entries(a(u).cost),J,(Ge,We)=>{var Ae=Be(()=>Ee(a(We),2));let Ye=()=>a(Ae)[0],ze=()=>a(Ae)[1];var ve=er(),je=R(ve);g(ve),$(()=>G(je,`${ze()??""} ${Ye()??""}`)),p(Ge,ve)}),p(U,P)},F=U=>{var P=tr();p(U,P)};N(oe,U=>{a(u).cost?U(me):U(F,!1)})}g(j);var ie=b(j,2),De=b(R(ie));{var Ve=U=>{var P=Xe();$(()=>G(P,`+${a(u).effect.points??""} Points`)),p(U,P)};N(De,U=>{a(u).effect.points&&U(Ve)})}var qe=b(De,2);{var xe=U=>{var P=Xe();$(()=>G(P,`+${a(u).effect.coins??""} Coins`)),p(U,P)};N(qe,U=>{a(u).effect.coins&&U(xe)})}var it=b(qe,2);{var xt=U=>{var P=Xe();$(()=>G(P,`+${a(u).effect.military??""} Military`)),p(U,P)};N(it,U=>{a(u).effect.military&&U(xt)})}var nt=b(it,2);{var At=U=>{var P=ne(),Fe=K(P);Z(Fe,1,()=>Object.entries(a(u).effect.resources),J,(Ge,We)=>{var Ae=Be(()=>Ee(a(We),2));let Ye=()=>a(Ae)[0],ze=()=>a(Ae)[1];var ve=sr(),je=R(ve);g(ve),$(()=>G(je,`${ze()??""} ${Ye()??""}`)),p(Ge,ve)}),p(U,P)};N(nt,U=>{a(u).effect.resources&&U(At)})}var Ut=b(nt,2);{var Bt=U=>{var P=rr();p(U,P)};N(Ut,U=>{!a(u).effect.points&&!a(u).effect.coins&&!a(u).effect.military&&!a(u).effect.resources&&U(Bt)})}g(ie),g(H),$(()=>tt(H,1,`stage ${V<a(n).wonderStagesBuilt?"built":""}`,"svelte-dm8431")),p(k,H)}),g(pe),g(ue),g(z);var Se=b(z,2),he=R(Se),de=R(he),_e=R(de),ke=b(_e,2),Ie=R(ke,!0);g(ke),g(de);var we=b(de,2),be=R(we),Oe=b(be,2),He=R(Oe,!0);g(Oe),g(we);var Te=b(we,2),Re=R(Te),Le=b(Re,2),$e=R(Le,!0);g(Le),g(Te),g(he);var Ce=b(he,4);Z(Ce,5,()=>Object.entries(a(n).resources),J,(k,u)=>{var V=Be(()=>Ee(a(u),2));let H=()=>a(V)[0],q=()=>a(V)[1];var j=or(),oe=R(j),me=b(oe,2),F=R(me,!0);g(me),g(j),$(()=>{O(oe,"src",m[H()]),O(oe,"alt",H()),G(F,q())}),p(k,j)}),g(Ce);var w=b(Ce,4),A=R(w);{var re=k=>{var u=ir();p(k,u)},ae=k=>{var u=cr();Z(u,5,()=>a(n).built,J,(V,H)=>{var q=nr(),j=R(q,!0);g(q),$(()=>G(j,a(H).name)),p(V,q)}),g(u),p(k,u)};N(A,k=>{a(n).built.length===0?k(re):k(ae,!1)})}g(w),g(Se),g(E),$(k=>{I=tt(E,1,"player-summary svelte-dm8431",null,I,k),G(ge,a(n).wonder?.name),O(_e,"src",m.coin),G(Ie,a(n).coins),O(be,"src",m.military),G(He,a(n).military),O(Re,"src",m.victory),G($e,a(n).score)},[()=>({current:M===0,winner:a(L).some(k=>k.name===a(n).name)})]),p(C,E)}),g(r);var o=b(r,2);Z(o,5,()=>c().players[0].hand,J,(C,n)=>{var M=_r(),E=R(M),I=R(E,!0);g(E);var z=b(E,2);{var le=w=>{var A=fr();p(w,A)};N(z,w=>{a(n).temporary&&w(le)})}var X=b(z,4),se=R(X);{var ge=w=>{var A=ne(),re=K(A);Z(re,1,()=>Object.entries(a(n).cost),J,(ae,k)=>{var u=Be(()=>Ee(a(k),2));let V=()=>a(u)[0],H=()=>a(u)[1];var q=ne(),j=K(q);{var oe=F=>{var ie=dr();$(()=>{O(ie,"src",m["coin"+H()]),O(ie,"alt","coin"+H())}),p(F,ie)},me=F=>{var ie=ne(),De=K(ie);Z(De,1,()=>Array(H()),J,(Ve,qe)=>{var xe=mr();$(()=>{O(xe,"src",m[V()]),O(xe,"alt",V())}),p(Ve,xe)}),p(F,ie)};N(j,F=>{V()==="coins"?F(oe):F(me,!1)})}p(ae,q)}),p(w,A)},ue=w=>{var A=vr();p(w,A)};N(se,w=>{a(n).cost&&Object.keys(a(n).cost).length>0?w(ge):w(ue,!1)})}g(X);var pe=b(X,2),Se=R(pe);{var he=w=>{var A=ur(),re=R(A,!0);g(A),$(ae=>G(re,ae),[()=>Zs(a(n).altcost)]),p(w,A)};N(Se,w=>{a(n).altcost&&w(he)})}g(pe);var de=b(pe,4),_e=R(de);{var ke=w=>{var A=ne(),re=K(A);Z(re,1,()=>Object.entries(a(n).effect.resources),J,(ae,k)=>{var u=Be(()=>Ee(a(k),2));let V=()=>a(u)[0],H=()=>a(u)[1];var q=ne(),j=K(q);Z(j,1,()=>Array(H()),J,(oe,me)=>{var F=pr();$(()=>{O(F,"src",m[V()]),O(F,"alt",V())}),p(oe,F)}),p(ae,q)}),p(w,A)};N(_e,w=>{a(n).effect.resources&&w(ke)})}var Ie=b(_e,2);{var we=w=>{var A=yr();$(()=>{O(A,"src",m["coin"+a(n).effect.coins]),O(A,"alt","coin"+a(n).effect.coins)}),p(w,A)};N(Ie,w=>{a(n).effect.coins&&w(we)})}var be=b(Ie,2);{var Oe=w=>{var A=ne(),re=K(A);Z(re,1,()=>Array(a(n).effect.military),J,(ae,k)=>{var u=gr();$(()=>O(u,"src",m.military)),p(ae,u)}),p(w,A)};N(be,w=>{a(n).effect.military&&w(Oe)})}var He=b(be,2);{var Te=w=>{var A=hr();$(()=>{O(A,"src",m["victory"+a(n).effect.points]),O(A,"alt","victory"+a(n).effect.points)}),p(w,A)};N(He,w=>{a(n).effect.points&&w(Te)})}g(de);var Re=b(de,2),Le=R(Re),$e=b(Le,2),Ce=b($e,2);g(Re),g(M),$(()=>{tt(M,1,`card-buttons card-type-${a(n).type??""}`,"svelte-dm8431"),G(I,a(n).name)}),Ke("click",Le,()=>B(a(n),"build")),Ke("click",$e,()=>B(a(n),"sell")),Ke("click",Ce,()=>B(a(n),"wonder")),p(C,M)}),g(o),g(T),$(()=>G(Y,a(x))),p(v,h)},y=v=>{var h=br();p(v,h)};N(Q,v=>{c()?v(te):v(y,!1)})}p(s,W),Zt(),i()}export{Er as component,Br as universal};
