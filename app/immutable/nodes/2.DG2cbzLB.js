import"../chunks/DsnmJJEf.js";import{i as Cs}from"../chunks/pXw9F0qr.js";import{G as Fe,o as re,A as As,J as ms,p as Us,n as Bs,S as r,ax as Es,D as Ss,H as Is,F as os,I as We,z as Ce,af as Os,aj as Ts,w as Ze,M as $s,K as Ds,an as us,i as Ms,R as Xe,aJ as is,aK as ns,O as ps,P as Ps,aL as Oe,aM as Ye,y as ys,aN as Te,aO as Ns,ah as Hs,aP as Vs,am as Gs,aQ as Fs,ac as Ws,aR as gs,ad as Ys,aS as zs,$ as js,a8 as ae,a1 as X,a3 as g,a4 as Qs,a0 as U,a7 as w,a5 as x,a6 as h,a2 as M,aI as ze,aH as Ae,aT as Ue,T as fe}from"../chunks/DEaZTocB.js";import{w as Js,a as F,e as je}from"../chunks/wIxpBGLN.js";import{i as N,s as Zs,a as Xs}from"../chunks/B6mUW0Rw.js";import{s as S}from"../chunks/C0WV71g0.js";function Y(t,e){return e}function Ks(t,e,s){for(var i=t.items,c=[],l=e.length,d=0;d<l;d++)Vs(e[d].e,c,!0);var v=l>0&&c.length===0&&s!==null;if(v){var k=s.parentNode;Gs(k),k.append(s),i.clear(),K(t,e[0].prev,e[l-1].next)}Fs(c,()=>{for(var B=0;B<l;B++){var I=e[B];v||(i.delete(I.k),K(t,I.prev,I.next)),ys(I.e,!v)}})}function z(t,e,s,i,c,l=null){var d=t,v={flags:e,items:new Map,first:null},k=(e&gs)!==0;if(k){var B=t;d=re?Fe(As(B)):B.appendChild(ms())}re&&Us();var I=null,j=!1,W=new Map,ee=Es(()=>{var f=s();return Ms(f)?f:f==null?[]:us(f)}),u,m;function p(){et(m,u,v,W,d,c,e,i,s),l!==null&&(u.length===0?I?ps(I):I=Ze(()=>l(d)):I!==null&&Ps(I,()=>{I=null}))}Bs(()=>{m??=Ws,u=r(ee);var f=u.length;if(j&&f===0)return;j=f===0;let y=!1;if(re){var $=Ss(d)===Is;$!==(f===0)&&(d=os(),Fe(d),We(!1),y=!0)}if(re){for(var G=null,O,a=0;a<f;a++){if(Ce.nodeType===Os&&Ce.data===Ts){d=Ce,y=!0,We(!1);break}var o=u[a],b=i(o,a);O=Ke(Ce,v,G,null,o,b,a,c,e,s),v.items.set(b,O),G=O}f>0&&Fe(os())}if(re)f===0&&l&&(I=Ze(()=>l(d)));else if($s()){var n=new Set,D=Ds;for(a=0;a<f;a+=1){o=u[a],b=i(o,a);var L=v.items.get(b)??W.get(b);L?(e&(Te|Oe))!==0&&hs(L,o,a,e):(O=Ke(null,v,null,null,o,b,a,c,e,s,!0),W.set(b,O)),n.add(b)}for(const[C,V]of v.items)n.has(C)||D.skipped_effects.add(V.e);D.add_callback(p)}else p();y&&We(!0),r(ee)}),re&&(d=Ce)}function et(t,e,s,i,c,l,d,v,k){var B=(d&zs)!==0,I=(d&(Te|Oe))!==0,j=e.length,W=s.items,ee=s.first,u=ee,m,p=null,f,y=[],$=[],G,O,a,o;if(B)for(o=0;o<j;o+=1)G=e[o],O=v(G,o),a=W.get(O),a!==void 0&&(a.a?.measure(),(f??=new Set).add(a));for(o=0;o<j;o+=1){if(G=e[o],O=v(G,o),a=W.get(O),a===void 0){var b=i.get(O);if(b!==void 0){i.delete(O),W.set(O,b);var n=p?p.next:u;K(s,p,b),K(s,b,n),Qe(b,n,c),p=b}else{var D=u?u.e.nodes_start:c;p=Ke(D,s,p,p===null?s.first:p.next,G,O,o,l,d,k)}W.set(O,p),y=[],$=[],u=p.next;continue}if(I&&hs(a,G,o,d),(a.e.f&Ye)!==0&&(ps(a.e),B&&(a.a?.unfix(),(f??=new Set).delete(a))),a!==u){if(m!==void 0&&m.has(a)){if(y.length<$.length){var L=$[0],C;p=L.prev;var V=y[0],oe=y[y.length-1];for(C=0;C<y.length;C+=1)Qe(y[C],L,c);for(C=0;C<$.length;C+=1)m.delete($[C]);K(s,V.prev,oe.next),K(s,p,V),K(s,oe,L),u=L,p=oe,o-=1,y=[],$=[]}else m.delete(a),Qe(a,u,c),K(s,a.prev,a.next),K(s,a,p===null?s.first:p.next),K(s,p,a),p=a;continue}for(y=[],$=[];u!==null&&u.k!==O;)(u.e.f&Ye)===0&&(m??=new Set).add(u),$.push(u),u=u.next;if(u===null)continue;a=u}y.push(a),p=a,u=a.next}if(u!==null||m!==void 0){for(var se=m===void 0?[]:us(m);u!==null;)(u.e.f&Ye)===0&&se.push(u),u=u.next;var te=se.length;if(te>0){var le=(d&gs)!==0&&j===0?c:null;if(B){for(o=0;o<te;o+=1)se[o].a?.measure();for(o=0;o<te;o+=1)se[o].a?.fix()}Ks(s,se,le)}}B&&Ys(()=>{if(f!==void 0)for(a of f)a.a?.apply()}),t.first=s.first&&s.first.e,t.last=p&&p.e;for(var de of i.values())ys(de.e);i.clear()}function hs(t,e,s,i){(i&Te)!==0&&ns(t.v,e),(i&Oe)!==0?ns(t.i,s):t.i=s}function Ke(t,e,s,i,c,l,d,v,k,B,I){var j=(k&Te)!==0,W=(k&Ns)===0,ee=j?W?Xe(c,!1,!1):is(c):c,u=(k&Oe)===0?d:is(d),m={i:u,v:ee,k:l,a:null,e:null,prev:s,next:i};try{if(t===null){var p=document.createDocumentFragment();p.append(t=ms())}return m.e=Ze(()=>v(t,ee,u,B),re),m.e.prev=s&&s.e,m.e.next=i&&i.e,s===null?I||(e.first=m):(s.next=m,s.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function Qe(t,e,s){for(var i=t.next?t.next.e.nodes_start:s,c=e?e.e.nodes_start:s,l=t.e.nodes_start;l!==null&&l!==i;){var d=Hs(l);c.before(l),l=d}}function K(t,e,s){e===null?t.first=s:(e.next=s,e.e.next=s&&s.e),s!==null&&(s.prev=e,s.e.prev=e&&e.e)}const cs=[...` 	
\r\fÂ \v\uFEFF`];function st(t,e,s){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),s){for(var c in s)if(s[c])i=i?i+" "+c:c;else if(i.length)for(var l=c.length,d=0;(d=i.indexOf(c,d))>=0;){var v=d+l;(d===0||cs.includes(i[d-1]))&&(v===i.length||cs.includes(i[v]))?i=(d===0?"":i.substring(0,d))+i.substring(v+1):d=v}}return i===""?null:i}function Je(t,e,s,i,c,l){var d=t.__className;if(re||d!==s||d===void 0){var v=st(s,i,l);(!re||v!==t.getAttribute("class"))&&(v==null?t.removeAttribute("class"):t.className=v),t.__className=s}else if(l&&c!==l)for(var k in l){var B=!!l[k];(c==null||B!==!!c[k])&&t.classList.toggle(k,B)}return l}const tt=!1,at=!0,ka=Object.freeze(Object.defineProperty({__proto__:null,prerender:at,ssr:tt},Symbol.toStringTag,{value:"Module"})),rt=[{id:1,name:"The Great Pyramid of Giza",baseResource:"stone",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:2,cloth:1},effect:{points:5}},{cost:{stone:4},effect:{points:7}}]},{id:2,name:"Hanging Gardens of Babylon",baseResource:"wood",stages:[{cost:{clay:2},effect:{points:3}},{cost:{ore:2,cloth:1},effect:{coins:6}},{cost:{wood:4},effect:{points:7}}]},{id:3,name:"Statue of Zeus at Olympia",baseResource:"clay",stages:[{cost:{stone:2},effect:{points:3}},{cost:{wood:2},effect:{military:1}},{cost:{clay:3},effect:{points:7}}]},{id:4,name:"Temple of Artemis at Ephesus",baseResource:"papyrus",stages:[{cost:{clay:2},effect:{points:3}},{cost:{wood:2},effect:{coins:9}},{cost:{ore:2,glass:1},effect:{points:7}}]},{id:5,name:"Mausoleum at Halicarnassus",baseResource:"cloth",stages:[{cost:{ore:2},effect:{points:3}},{cost:{glass:1,papyrus:1},effect:{coins:9}},{cost:{stone:3},effect:{points:7}}]},{id:6,name:"Colossus of Rhodes",baseResource:"ore",stages:[{cost:{wood:2},effect:{points:3}},{cost:{clay:3},effect:{military:2}},{cost:{ore:4},effect:{points:7}}]},{id:7,name:"Lighthouse of Alexandria",baseResource:"glass",stages:[{cost:{stone:2},effect:{resources:{glass:1}}},{cost:{ore:2},effect:{points:5}},{cost:{papyrus:1,cloth:1},effect:{points:7}}]},{id:8,name:"Uppsala Cathedral",baseResource:"clay",stages:[{cost:{stone:2},effect:{coins:3}},{cost:{papyrus:2},effect:{points:5}},{cost:{clay:2,ore:1},effect:{points:7}}]},{id:9,name:"Lindvalls Coffee",baseResource:"coffee",stages:[{cost:{clay:2},effect:{resources:{coffee:1}}},{cost:{glass:2},effect:{resources:{coffee:1}}},{cost:{stone:2},effect:{resources:{coffee:1}}}]}];function _s(){return[{id:1,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:2,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:3,name:"Barracks",type:"military",effect:{military:1}},{id:4,name:"Theater",type:"civilian",effect:{points:3}},{id:5,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:6,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:7,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:8,name:"Timber Yard",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:9,name:"Stone Pit",type:"resource",effect:{resources:{stone:1}}},{id:10,name:"Guard Tower",type:"military",effect:{military:1}},{id:11,name:"Altar",type:"civilian",effect:{points:3}},{id:12,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:13,name:"Clay Pit",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:14,name:"Ore Vein",type:"resource",effect:{resources:{ore:1}}},{id:15,name:"Lumber Yard",type:"resource",effect:{resources:{wood:1}}},{id:16,name:"Excavation",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:17,name:"Stockade",type:"military",effect:{military:1}},{id:18,name:"Baths",type:"civilian",effect:{points:3}},{id:19,name:"Marketplace",type:"commerce",effect:{coins:3}},{id:20,name:"Clay Pool",type:"resource",effect:{resources:{clay:1}}},{id:21,name:"Mine",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}}]}function ot(){return[{id:22,name:"Sawmill",type:"resource",cost:{coins:1},effect:{resources:{wood:2}}},{id:23,name:"Quarry",type:"resource",cost:{coins:1},effect:{resources:{stone:2}}},{id:24,name:"Brickyard",type:"resource",cost:{coins:1},effect:{resources:{clay:2}}},{id:25,name:"Foundry",type:"resource",cost:{coins:1},effect:{resources:{ore:2}}},{id:26,name:"Glassworks",type:"resource",effect:{resources:{glass:1}}},{id:27,name:"Press",type:"resource",effect:{resources:{papyrus:1}}},{id:28,name:"Loom",type:"resource",effect:{resources:{cloth:1}}},{id:29,name:"Stables",type:"military",cost:{wood:1,clay:1,ore:1},effect:{military:2}},{id:30,name:"Archery Range",type:"military",cost:{wood:2,ore:1},effect:{military:2}},{id:31,name:"Walls",type:"military",cost:{stone:3},effect:{military:2}},{id:32,name:"Training Ground",type:"military",cost:{clay:2,ore:1},effect:{military:2}},{id:33,name:"Temple",type:"civilian",cost:{wood:1,clay:1,glass:1},effect:{points:4}},{id:34,name:"Statue",type:"civilian",cost:{ore:2,wood:1},effect:{points:4}},{id:35,name:"Aqueduct",type:"civilian",cost:{stone:3},effect:{points:5}},{id:36,name:"Courthouse",type:"civilian",cost:{clay:2,cloth:1},effect:{points:4}},{id:37,name:"Forum",type:"commerce",cost:{clay:2},effect:{coins:3,resources:{glass:1,papyrus:1}}},{id:38,name:"Caravansery",type:"commerce",cost:{wood:2},effect:{coins:3,resources:{wood:1,stone:1,clay:1,ore:1}}},{id:39,name:"Vineyard",type:"commerce",effect:{coins:3}},{id:40,name:"Bazar",type:"commerce",effect:{coins:3}},{id:41,name:"Glassblower",type:"resource",effect:{resources:{glass:1}}},{id:42,name:"Library",type:"civilian",cost:{stone:2,glass:1},effect:{points:4}}]}function it(){return[{id:43,name:"Arsenal",type:"resource",cost:{coins:3},effect:{resources:{wood:2,ore:1}}},{id:44,name:"Palace Gardens",type:"resource",cost:{coins:3},effect:{resources:{stone:2,clay:1}}},{id:45,name:"Pantheon",type:"resource",cost:{coins:3},effect:{resources:{glass:1,papyrus:1,cloth:1}}},{id:46,name:"Fortifications",type:"military",cost:{stone:2,ore:2},effect:{military:3}},{id:47,name:"Siege Workshop",type:"military",cost:{wood:2,clay:1,ore:1},effect:{military:3}},{id:48,name:"Circus",type:"military",cost:{stone:3,ore:1},effect:{military:3}},{id:49,name:"Arsenal",type:"military",cost:{wood:2,ore:2,cloth:1},effect:{military:3}},{id:50,name:"Palace",type:"civilian",cost:{wood:1,stone:1,clay:1,ore:1,glass:1,papyrus:1,cloth:1},effect:{points:8}},{id:51,name:"Town Hall",type:"civilian",cost:{stone:2,ore:1,glass:1},effect:{points:6}},{id:52,name:"Pantheon",type:"civilian",cost:{clay:2,papyrus:1,glass:1},effect:{points:7}},{id:53,name:"Gardens",type:"civilian",cost:{clay:2,wood:1},effect:{points:5}},{id:54,name:"Senate",type:"civilian",cost:{stone:2,wood:1,cloth:1},effect:{points:6}},{id:55,name:"Obelisk",type:"civilian",cost:{stone:2,ore:1},effect:{points:5}},{id:56,name:"Chamber of Commerce",type:"commerce",cost:{clay:2,papyrus:1},effect:{coins:5}},{id:57,name:"Haven",type:"commerce",cost:{wood:1,ore:1,cloth:1},effect:{coins:5}},{id:58,name:"Lighthouse",type:"commerce",cost:{stone:1,glass:1},effect:{coins:4}},{id:59,name:"Arena",type:"commerce",cost:{stone:1,ore:1,papyrus:1},effect:{coins:5}},{id:60,name:"Stock Exchange",type:"commerce",cost:{ore:2,cloth:1},effect:{coins:5}},{id:61,name:"Harbor",type:"commerce",cost:{wood:1,glass:1},effect:{coins:5}},{id:62,name:"Customs House",type:"commerce",cost:{clay:1,papyrus:1},effect:{coins:4}},{id:63,name:"Grand Bazaar",type:"commerce",cost:{stone:1,ore:1,cloth:1},effect:{coins:5}}]}function Ie(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,s)=>e.sort-s.sort).map(({value:e})=>e)}function nt(t){return rt.map(s=>({w:s,sort:Math.random()})).sort((s,i)=>s.sort-i.sort).map(({w:s})=>s).slice(0,t)}function ct(t,e){return{name:t,coins:3,military:0,score:0,resources:{[e.baseResource]:1},hand:[],built:[],wonder:e,wonderStagesBuilt:0}}function ft(){const t=["You","Bot A","Bot B"],e=nt(t.length),s=t.map((c,l)=>ct(c,e[l])),i=Ie(_s());for(let c=0;c<s.length;c++)s[c].hand=i.splice(0,7);return{players:s,discard:[],age:1}}function lt(t){let e;t.age===2?e=Ie(ot()):t.age===3?e=Ie(it()):e=Ie(_s());for(let s=0;s<t.players.length;s++)t.players[s].hand=e.splice(0,7)}const fs=Js(ft());function dt(t){if(t.hand.length!==0)return t.hand.reduce((e,s)=>{const i=ls(e);return ls(s)>i?s:e})}function ls(t){return t.effect.resources?Object.values(t.effect.resources).reduce((e,s)=>e+(s??0),0):0}function ws(t,e){if(e){if(e.resources)for(const[s,i]of Object.entries(e.resources)){const c=i??0;t.resources[s]=(t.resources[s]||0)+c}typeof e.coins=="number"&&(t.coins=(t.coins||0)+e.coins),typeof e.military=="number"&&(t.military=(t.military||0)+e.military),typeof e.points=="number"&&(t.score=(t.score||0)+e.points)}}function vt(t,e){e&&e.coins&&e.coins>0&&(t.coins=(t.coins||0)-e.coins)}function we(t,e){if(!e)return!0;if(e.coins&&(t.coins||0)<e.coins)return!1;for(const[s,i]of Object.entries(e))if(s!=="coins"&&(t.resources[s]||0)<(i||0))return!1;return!0}function ds(t,e){if(!we(t,e.cost)){console.warn(`${t.name} cannot afford ${e.name}`);return}vt(t,e.cost),ws(t,e.effect),t.built.push(e)}function vs(t,e,s){if(!we(t,s)){console.warn(`${t.name} cannot afford this wonder stage`);return}ws(t,e)}function mt(t){const e=t.players,s=e.length;let i=0;switch(t.age){case 1:i=1;break;case 2:i=3;break;case 3:i=5;break;default:i=0}for(let c=0;c<s;c++){const l=e[c],d=e[(c+1)%s],v=e[(c-1+s)%s];(l.military||0)>(d.military||0)?l.score+=i:(l.military||0)<(d.military||0)&&(l.score-=1),(l.military||0)>(v.military||0)?l.score+=i:(l.military||0)<(v.military||0)&&(l.score-=1);const k=l.resources.coffee||0;l.score+=k}}const ut=""+new URL("../assets/glass.cViTZEFt.png",import.meta.url).href,pt=""+new URL("../assets/wood.8mMbf7v2.png",import.meta.url).href,yt=""+new URL("../assets/stone.qIaZXg4X.png",import.meta.url).href,gt=""+new URL("../assets/ore.BEo6Hnme.png",import.meta.url).href,ht=""+new URL("../assets/clay.BkSNrCQv.png",import.meta.url).href,_t=""+new URL("../assets/coffee.BEH_fvhj.png",import.meta.url).href,wt=""+new URL("../assets/cloth.7hEfWQrA.png",import.meta.url).href,bt=""+new URL("../assets/papyrus.Cenvg5J3.png",import.meta.url).href,xt=""+new URL("../assets/military.CoMoyiE9.png",import.meta.url).href,kt=""+new URL("../assets/coin.BVeLvs8D.png",import.meta.url).href,Rt=""+new URL("../assets/coin-1.BRQ9sOaY.png",import.meta.url).href,qt=""+new URL("../assets/coin-3.c5OVTl5g.png",import.meta.url).href,Lt=""+new URL("../assets/coin-4.Av_mxviy.png",import.meta.url).href,Ct=""+new URL("../assets/coin-5.CVzNlNdL.png",import.meta.url).href,At=""+new URL("../assets/victory.DD4OmmV1.png",import.meta.url).href,Ut=""+new URL("../assets/victory-1.D-XnFPMq.png",import.meta.url).href,Bt=""+new URL("../assets/victory-2.CVwBGVWc.png",import.meta.url).href,Et=""+new URL("../assets/victory-3.CaoIER7o.png",import.meta.url).href,St=""+new URL("../assets/victory-4.RDeBRlgz.png",import.meta.url).href,It=""+new URL("../assets/victory-5.BBTjO1_4.png",import.meta.url).href,Ot=""+new URL("../assets/victory-6.BZUvnQvq.png",import.meta.url).href,Tt=""+new URL("../assets/victory-7.DCafhQbl.png",import.meta.url).href,$t=""+new URL("../assets/victory-8.B25pGN3O.png",import.meta.url).href,Dt=""+new URL("../assets/giza.VVBVPHkf.png",import.meta.url).href,Mt=""+new URL("../assets/babylon.DFluoLyw.png",import.meta.url).href,Pt=""+new URL("../assets/olympia.MIgPe3D6.png",import.meta.url).href,Nt=""+new URL("../assets/ephesos.BD1F0EdB.png",import.meta.url).href,Ht=""+new URL("../assets/uppsala.DzCzligB.png",import.meta.url).href,Vt=""+new URL("../assets/lindvalls.JVtzja-w.png",import.meta.url).href,Gt=""+new URL("../assets/halikarnassos.FZljeaQc.png",import.meta.url).href,Ft=""+new URL("../assets/rhodos.DxVdnyVU.png",import.meta.url).href,Wt=""+new URL("../assets/alexandria.DiH0FkG7.png",import.meta.url).href,Yt=""+new URL("../assets/age-1.BJE8dBrp.png",import.meta.url).href,zt=""+new URL("../assets/age-2.BWAIcDqr.png",import.meta.url).href,jt=""+new URL("../assets/age-3.C94qqtx1.png",import.meta.url).href;var Qt=U('<img class="age-image svelte-fx47kq" width="120" height="120"/>'),Jt=U('<img class="svelte-fx47kq"/>'),Zt=U('<span class="resource svelte-fx47kq"> </span>'),Xt=U("<em>Free</em>"),Kt=U('<span class="resource svelte-fx47kq"> </span>'),ea=U("<em>Special</em>"),sa=U('<div><div class="stage-index svelte-fx47kq"></div> <div class="stage-cost svelte-fx47kq">Cost: <!></div> <div class="stage-effect svelte-fx47kq">Effect: <!> <!> <!> <!> <!></div></div>'),ta=U('<div class="resource svelte-fx47kq"><img class="svelte-fx47kq"/> <span> </span></div>'),aa=U("<em>None</em>"),ra=U("<li> </li>"),oa=U("<ul></ul>"),ia=U('<div><div class="wonder svelte-fx47kq"><!> <div class="wonder-name svelte-fx47kq"> </div> <div class="wonder-progress svelte-fx47kq"><div class="stages svelte-fx47kq"></div></div></div> <div class="player-info svelte-fx47kq"><div class="stats svelte-fx47kq"><div class="resource svelte-fx47kq"><img alt="coin" class="svelte-fx47kq"/> <span> </span></div> <div class="resource svelte-fx47kq"><img alt="military" class="svelte-fx47kq"/> <span> </span></div> <div class="resource svelte-fx47kq"><img alt="score" class="svelte-fx47kq"/> <span> </span></div></div> <h3>Resources</h3> <div class="resources svelte-fx47kq"></div> <h3>Buildings</h3> <div class="built-cards"><!></div></div></div>'),na=U('<img class="svelte-fx47kq"/>'),ca=U('<img class="svelte-fx47kq"/>'),fa=U("<em>Free</em>"),la=U('<img class="svelte-fx47kq"/>'),da=U('<img class="svelte-fx47kq"/>'),va=U('<img alt="military" class="svelte-fx47kq"/>'),ma=U('<img class="svelte-fx47kq"/>'),ua=U('<div><h2> </h2> <h4>Cost</h4> <div class="card-cost svelte-fx47kq"><!></div> <h4>Production</h4> <div class="card-effect svelte-fx47kq"><!> <!> <!> <!></div> <div class="card-actions svelte-fx47kq"><button class="svelte-fx47kq"><strong>Build</strong></button> <button class="svelte-fx47kq"><strong>Sell</strong></button> <button class="svelte-fx47kq"><strong>Wonder</strong></button></div></div>'),pa=U('<h1>Definitely Not 7 Wonders</h1> <!> <p class="message svelte-fx47kq"> </p> <div class="game-container svelte-fx47kq"><div class="player-list svelte-fx47kq"></div> <div class="cards-container svelte-fx47kq"></div></div>',1),ya=U("<p>Loading game...</p>");function Ra(t,e){js(e,!1);const[s,i]=Zs(),c=()=>Xs(fs,"$game",s),l={1:Yt,2:zt,3:jt},d={1:Dt,2:Mt,3:Pt,4:Nt,5:Gt,6:Ft,7:Wt,8:Ht,9:Vt},v={coffee:_t,wood:pt,stone:yt,ore:gt,clay:ht,glass:ut,cloth:wt,papyrus:bt,military:xt,coin:kt,coin1:Rt,coin3:qt,coin4:Lt,coin5:Ct,victory:At,victory1:Ut,victory2:Bt,victory3:Et,victory4:St,victory5:It,victory6:Ot,victory7:Tt,victory8:$t};let k=Xe("Game started â Age I"),B=Xe([]);function I(m,p){fs.update(f=>{const y=f.players[0];if(p==="build"){if(y.built.some(o=>o.name===m.name))return fe(k,`You already built "${m.name}", pick another card.`),f;if(!we(y,m.cost))return fe(k,`You don't have enough resources to build "${m.name}". Pick another card.`),f;const a=y.hand.findIndex(o=>o.id===m.id);if(a<0)return f;y.hand.splice(a,1),ds(y,m)}else if(p==="sell"){const a=y.hand.findIndex(o=>o.id===m.id);if(a<0)return f;y.hand.splice(a,1),y.coins+=3}else if(p==="wonder")if(y.wonderStagesBuilt<y.wonder.stages.length){const a=y.wonder.stages[y.wonderStagesBuilt];if(!we(y,a.cost))return fe(k,"You don't have enough resources to build this wonder stage!"),f;const o=y.hand.findIndex(n=>n.id===m.id);if(o<0)return f;y.hand.splice(o,1),y.wonderStagesBuilt++;const b=a.effect;vs(y,b,a.cost)}else return fe(k,"Your wonder is already complete!"),f;for(let a=1;a<f.players.length;a++){const o=f.players[a],b=o.hand.filter(L=>!o.built.some(C=>C.name===L.name)&&we(o,L.cost));let n,D="build";if(b.length>0)n=dt({...o,hand:b}),D="build";else{if(o.wonderStagesBuilt<o.wonder.stages.length){const L=o.wonder.stages[o.wonderStagesBuilt];we(o,L.cost)&&(n=o.hand[0],D="wonder")}!n&&o.hand.length>0&&(n=o.hand[0],D="sell")}if(n){const L=o.hand.findIndex(C=>C.id===n.id);if(L>=0){if(o.hand.splice(L,1),console.log("picked",n.name,"to",D,"for bot",o.name),D==="build")ds(o,n);else if(D==="sell")o.coins+=3;else if(D==="wonder"){const C=o.wonder.stages[o.wonderStagesBuilt];o.wonderStagesBuilt++;const V=C.effect;vs(o,V,C.cost)}}}}const $=f.players.map(a=>a.hand),G=[$[$.length-1],...$.slice(0,$.length-1)];for(let a=0;a<f.players.length;a++)f.players[a].hand=G[a],console.log(f.players[a].name,"s hand:",f.players[a].hand);if(f.players.some(a=>a.hand.length>0))!r(k).startsWith("You already built")&&!r(k).startsWith("You don't have enough resources")&&fe(k,"Turn resolved. Next pick.");else if(mt(f),f.age<3)f.age++,lt(f),fe(k,`End of Age ${f.age-1} finished. Scores updated. Age ${f.age} begins!`);else{const a=Math.max(...f.players.map(o=>o.score));fe(B,f.players.filter(o=>o.score===a)),fe(k,`Game over! ${r(B).map(o=>o.wonder.name).join(", ")} won with ${a} points!`),console.log("Final scores:",f.players.map(o=>({name:o.name,score:o.score}))),console.log("Winners:",r(B))}return{...f,players:f.players.map(a=>({...a,hand:[...a.hand],built:[...a.built]}))}})}Cs();var j=ae(),W=X(j);{var ee=m=>{var p=pa(),f=w(X(p),2);{var y=b=>{var n=Qt();M(()=>{S(n,"src",l[c().age]),S(n,"alt","Age "+c().age)}),g(b,n)};N(f,b=>{l[c().age]&&b(y)})}var $=w(f,2),G=x($,!0);h($);var O=w($,2),a=x(O);z(a,5,()=>c().players,Y,(b,n,D)=>{var L=ia();let C;var V=x(L),oe=x(V);{var se=A=>{var _=Jt();M(()=>{S(_,"src",d[r(n).wonder.id]),S(_,"alt",r(n).wonder.name),S(_,"title",r(n).wonder.name)}),g(A,_)};N(oe,A=>{r(n).wonder&&r(n).wonder.id&&d[r(n).wonder.id]&&A(se)})}var te=w(oe,2),le=x(te,!0);h(te);var de=w(te,2),Be=x(de);z(Be,5,()=>r(n).wonder.stages,Y,(A,_,Z)=>{var T=sa(),H=x(T);H.textContent=`Stage ${Z+1}`;var J=w(H,2),pe=w(x(J));{var qe=R=>{var P=ae(),Me=X(P);z(Me,1,()=>Object.entries(r(_).cost),Y,(Pe,Ne)=>{var Le=Ae(()=>Ue(r(Ne),2));let He=()=>r(Le)[0],Ve=()=>r(Le)[1];var ge=Zt(),Ge=x(ge);h(ge),M(()=>F(Ge,`${Ve()??""} ${He()??""}`)),g(Pe,ge)}),g(R,P)},ye=R=>{var P=Xt();g(R,P)};N(pe,R=>{r(_).cost?R(qe):R(ye,!1)})}h(J);var es=w(J,2),ss=w(x(es));{var bs=R=>{var P=ze();M(()=>F(P,`+${r(_).effect.points??""} Points`)),g(R,P)};N(ss,R=>{r(_).effect.points&&R(bs)})}var ts=w(ss,2);{var xs=R=>{var P=ze();M(()=>F(P,`+${r(_).effect.coins??""} Coins`)),g(R,P)};N(ts,R=>{r(_).effect.coins&&R(xs)})}var as=w(ts,2);{var ks=R=>{var P=ze();M(()=>F(P,`+${r(_).effect.military??""} Military`)),g(R,P)};N(as,R=>{r(_).effect.military&&R(ks)})}var rs=w(as,2);{var Rs=R=>{var P=ae(),Me=X(P);z(Me,1,()=>Object.entries(r(_).effect.resources),Y,(Pe,Ne)=>{var Le=Ae(()=>Ue(r(Ne),2));let He=()=>r(Le)[0],Ve=()=>r(Le)[1];var ge=Kt(),Ge=x(ge);h(ge),M(()=>F(Ge,`${Ve()??""} ${He()??""}`)),g(Pe,ge)}),g(R,P)};N(rs,R=>{r(_).effect.resources&&R(Rs)})}var qs=w(rs,2);{var Ls=R=>{var P=ea();g(R,P)};N(qs,R=>{!r(_).effect.points&&!r(_).effect.coins&&!r(_).effect.military&&!r(_).effect.resources&&R(Ls)})}h(es),h(T),M(()=>Je(T,1,`stage ${Z<r(n).wonderStagesBuilt?"built":""}`,"svelte-fx47kq")),g(A,T)}),h(Be),h(de),h(V);var be=w(V,2),xe=x(be),he=x(xe),Ee=x(he),Se=w(Ee,2),$e=x(Se,!0);h(Se),h(he);var _e=w(he,2),ke=x(_e),Re=w(ke,2),De=x(Re,!0);h(Re),h(_e);var q=w(_e,2),E=x(q),ie=w(E,2),ve=x(ie,!0);h(ie),h(q),h(xe);var ne=w(xe,4);z(ne,5,()=>Object.entries(r(n).resources),Y,(A,_)=>{var Z=Ae(()=>Ue(r(_),2));let T=()=>r(Z)[0],H=()=>r(Z)[1];var J=ta(),pe=x(J),qe=w(pe,2),ye=x(qe,!0);h(qe),h(J),M(()=>{S(pe,"src",v[T()]),S(pe,"alt",T()),F(ye,H())}),g(A,J)}),h(ne);var Q=w(ne,4),ce=x(Q);{var me=A=>{var _=aa();g(A,_)},ue=A=>{var _=oa();z(_,5,()=>r(n).built,Y,(Z,T)=>{var H=ra(),J=x(H,!0);h(H),M(()=>F(J,r(T).name)),g(Z,H)}),h(_),g(A,_)};N(ce,A=>{r(n).built.length===0?A(me):A(ue,!1)})}h(Q),h(be),h(L),M(A=>{C=Je(L,1,"player-summary svelte-fx47kq",null,C,A),F(le,r(n).wonder?.name),S(Ee,"src",v.coin),F($e,r(n).coins),S(ke,"src",v.military),F(De,r(n).military),S(E,"src",v.victory),F(ve,r(n).score)},[()=>({current:D===0,winner:r(B).some(A=>A.name===r(n).name)})]),g(b,L)}),h(a);var o=w(a,2);z(o,5,()=>c().players[0].hand,Y,(b,n)=>{var D=ua(),L=x(D),C=x(L,!0);h(L);var V=w(L,4),oe=x(V);{var se=q=>{var E=ae(),ie=X(E);z(ie,1,()=>Object.entries(r(n).cost),Y,(ve,ne)=>{var Q=Ae(()=>Ue(r(ne),2));let ce=()=>r(Q)[0],me=()=>r(Q)[1];var ue=ae(),A=X(ue);{var _=T=>{var H=na();M(()=>{S(H,"src",v["coin"+me()]),S(H,"alt","coin"+me())}),g(T,H)},Z=T=>{var H=ae(),J=X(H);z(J,1,()=>Array(me()),Y,(pe,qe)=>{var ye=ca();M(()=>{S(ye,"src",v[ce()]),S(ye,"alt",ce())}),g(pe,ye)}),g(T,H)};N(A,T=>{ce()==="coins"?T(_):T(Z,!1)})}g(ve,ue)}),g(q,E)},te=q=>{var E=fa();g(q,E)};N(oe,q=>{r(n).cost&&Object.keys(r(n).cost).length>0?q(se):q(te,!1)})}h(V);var le=w(V,4),de=x(le);{var Be=q=>{var E=ae(),ie=X(E);z(ie,1,()=>Object.entries(r(n).effect.resources),Y,(ve,ne)=>{var Q=Ae(()=>Ue(r(ne),2));let ce=()=>r(Q)[0],me=()=>r(Q)[1];var ue=ae(),A=X(ue);z(A,1,()=>Array(me()),Y,(_,Z)=>{var T=la();M(()=>{S(T,"src",v[ce()]),S(T,"alt",ce())}),g(_,T)}),g(ve,ue)}),g(q,E)};N(de,q=>{r(n).effect.resources&&q(Be)})}var be=w(de,2);{var xe=q=>{var E=da();M(()=>{S(E,"src",v["coin"+r(n).effect.coins]),S(E,"alt","coin"+r(n).effect.coins)}),g(q,E)};N(be,q=>{r(n).effect.coins&&q(xe)})}var he=w(be,2);{var Ee=q=>{var E=ae(),ie=X(E);z(ie,1,()=>Array(r(n).effect.military),Y,(ve,ne)=>{var Q=va();M(()=>S(Q,"src",v.military)),g(ve,Q)}),g(q,E)};N(he,q=>{r(n).effect.military&&q(Ee)})}var Se=w(he,2);{var $e=q=>{var E=ma();M(()=>{S(E,"src",v["victory"+r(n).effect.points]),S(E,"alt","victory"+r(n).effect.points)}),g(q,E)};N(Se,q=>{r(n).effect.points&&q($e)})}h(le);var _e=w(le,2),ke=x(_e),Re=w(ke,2),De=w(Re,2);h(_e),h(D),M(()=>{Je(D,1,`card-buttons card-type-${r(n).type??""}`,"svelte-fx47kq"),F(C,r(n).name)}),je("click",ke,()=>I(r(n),"build")),je("click",Re,()=>I(r(n),"sell")),je("click",De,()=>I(r(n),"wonder")),g(b,D)}),h(o),h(O),M(()=>F(G,r(k))),g(m,p)},u=m=>{var p=ya();g(m,p)};N(W,m=>{c()?m(ee):m(u,!1)})}g(t,j),Qs(),i()}export{Ra as component,ka as universal};
